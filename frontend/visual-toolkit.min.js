"use strict";var VisualToolkit=(()=>{var $n=Object.defineProperty;var Fr=Object.getOwnPropertyDescriptor;var Nr=Object.getOwnPropertyNames;var _r=Object.prototype.hasOwnProperty;var Y=(e,t)=>{for(var n in t)$n(e,n,{get:t[n],enumerable:!0})},jr=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Nr(t))!_r.call(e,r)&&r!==n&&$n(e,r,{get:()=>t[r],enumerable:!(o=Fr(t,r))||o.enumerable});return e};var Jr=e=>jr($n({},"__esModule",{value:!0}),e);var Xa={};Y(Xa,{amplitude:()=>ae,applyShadow:()=>Gt,bioGlow:()=>Xe,bioluminescence:()=>ie,bob:()=>Mt,calculateDirectionalIllumination:()=>Ft,calculateIllumination:()=>fe,clearShadow:()=>Dt,createBioParticles:()=>en,createDeepParticles:()=>Qe,createEye:()=>Gn,createEyes:()=>Jt,createMarineSnow:()=>Ke,createSeeker:()=>St,createSeekerSwarm:()=>wt,cssBioGlow:()=>Ne,cssBreathingGlow:()=>Wt,cssCreatureBody:()=>_e,cssDeepWater:()=>Fe,cssDistantCreature:()=>Je,cssEyeGlow:()=>zt,cssFishGlow:()=>At,cssGlow:()=>Lt,cssHudGlow:()=>Et,cssJellyfishBell:()=>je,cssJellyfishGlow:()=>Bt,cssTimings:()=>$t,darkness:()=>Ee,deepSea:()=>N,deepWaterBackground:()=>Ye,depthPresets:()=>On,drawBarnacles:()=>ln,drawBioParticles:()=>nn,drawBiolumGlow:()=>kn,drawCaustics:()=>jt,drawEye:()=>Ln,drawEyes:()=>Ut,drawGrille:()=>ce,drawJellyfish:()=>an,drawLens:()=>Ae,drawLight:()=>ze,drawLightCone:()=>rn,drawMarineSnow:()=>Ze,drawOffsetShadow:()=>Ot,drawOrganicSurface:()=>sn,drawOrganicTexture:()=>_t,drawPanelLines:()=>Le,drawPlayerLight:()=>Nt,drawROV:()=>tn,drawScarring:()=>dn,drawSeeker:()=>In,drawSeekerSwarm:()=>Rt,drawSpecimen:()=>on,drawTentacle:()=>Vt,drawTether:()=>Be,drawTrackingEye:()=>qt,drawWithDepth:()=>Xt,drift:()=>yt,eyeGlow:()=>Ve,getTheme:()=>er,getThemeNames:()=>nr,hexToRgb:()=>Zt,lightBeam:()=>qe,material3D:()=>De,materials:()=>V,organicRadii:()=>Ht,organicRadius:()=>Yt,playerLight:()=>He,pulse:()=>pe,radialGlow:()=>kt,randomBioHue:()=>We,registerTheme:()=>ee,scenes:()=>xt,staggerDelay:()=>Tt,surfacePalettes:()=>ne,themes:()=>tr,timing:()=>x,updateDeepParticles:()=>xe,updateEye:()=>Dn,updateEyes:()=>Kt,updateMarineSnow:()=>Ue,updateSeeker:()=>Ge,updateSeekerSwarm:()=>Pt,updateSeekerWithDrift:()=>Tn,vignette:()=>It,waver:()=>Ct});var x={glacial:8e-4,verySlow:.001,slow:.002,medium:.003,fast:.005,rapid:.01},ae={micro:.02,small:.03,medium:.1,large:.3};function yt(e,t=x.verySlow,n=x.slow){return{x:Math.sin(e*t)*ae.micro+Math.sin(e*n)*ae.micro*.5,y:Math.cos(e*t*1.1)*ae.micro+Math.cos(e*n*.9)*ae.micro*.3,rotation:Math.sin(e*x.glacial)*ae.small}}function Mt(e,t=x.slow,n=.02){return Math.sin(e*t)*n}function pe(e,t=x.medium,n=.8,o=1.2){let r=(Math.sin(e*t)+1)/2;return n+r*(o-n)}function Ct(e,t,n=x.slow){return{x:Math.sin(e*n+t*.5)*.5,y:Math.cos(e*n+t*.3)*.5}}function St(e,t){return{x:Math.random()*e,y:Math.random()*t,vx:0,vy:0,size:2+Math.random()*6,maxSpeed:1+Math.random()*3,awareness:150+Math.random()*250,timidity:.3+Math.random()*.7,glow:0,hue:180+Math.random()*40}}function Ge(e,t,n,o,r,a){let i=t-e.x,s=n-e.y,d=Math.sqrt(i*i+s*s);d<e.awareness?o>15*e.timidity?(e.vx-=i/d*.5,e.vy-=s/d*.5,e.glow=Math.max(0,e.glow-.1)):d>40?(e.vx+=i/d*.08,e.vy+=s/d*.08,e.glow=Math.min(1,e.glow+.02)):(e.vx+=s/d*.1,e.vy-=i/d*.1,e.glow=1):(e.vx+=(Math.random()-.5)*.1,e.vy+=(Math.random()-.5)*.1,e.glow=Math.max(0,e.glow-.01));let l=Math.sqrt(e.vx*e.vx+e.vy*e.vy);l>e.maxSpeed&&(e.vx=e.vx/l*e.maxSpeed,e.vy=e.vy/l*e.maxSpeed),e.vx*=.98,e.vy*=.98,e.x+=e.vx,e.y+=e.vy,e.x<-50&&(e.x=r+50),e.x>r+50&&(e.x=-50),e.y<-50&&(e.y=a+50),e.y>a+50&&(e.y=-50)}function wt(e,t,n,o={}){let{spawnBias:r="uniform",sizeRange:a=[2,8],speedRange:i=[1,4],hueRange:s=[180,220]}=o,d=[];for(let l=0;l<e;l++){let u,h;switch(r){case"center":{let m=Math.random()*Math.PI*2,b=Math.random()*Math.random()*Math.min(t,n)*.4;u=t/2+Math.cos(m)*b,h=n/2+Math.sin(m)*b;break}case"edges":{let m=Math.floor(Math.random()*4),b=Math.random();switch(m){case 0:u=b*t,h=Math.random()*50;break;case 1:u=t-Math.random()*50,h=b*n;break;case 2:u=b*t,h=n-Math.random()*50;break;default:u=Math.random()*50,h=b*n}break}default:u=Math.random()*t,h=Math.random()*n}d.push({x:u,y:h,vx:0,vy:0,size:a[0]+Math.random()*(a[1]-a[0]),maxSpeed:i[0]+Math.random()*(i[1]-i[0]),awareness:150+Math.random()*250,timidity:.3+Math.random()*.7,glow:0,hue:s[0]+Math.random()*(s[1]-s[0])})}return d}function Tn(e,t,n,o,r,a,i=0){if(Ge(e,t,n,o,r,a),i>0){let s=t-e.x,d=n-e.y;if(Math.sqrt(s*s+d*d)>e.awareness){let u=r/2,h=a/2,m=u-e.x,b=h-e.y,p=Math.sqrt(m*m+b*b);p>0&&(e.vx+=m/p*i,e.vy+=b/p*i)}}}function Pt(e,t,n,o,r,a,i=0){for(let s of e)i>0?Tn(s,t,n,o,r,a,i):Ge(s,t,n,o,r,a)}function kn(e,t,n,o,r,a,i){let s=i!==void 0?(Math.sin(i*.003)+1)/2:1,d=a*(.7+s*.3),l=o*(.9+s*.2),u=e.createRadialGradient(t,n,0,t,n,l*3);u.addColorStop(0,`hsla(${r}, 70%, 60%, ${d*.6})`),u.addColorStop(.5,`hsla(${r}, 60%, 40%, ${d*.2})`),u.addColorStop(1,"transparent"),e.fillStyle=u,e.beginPath(),e.arc(t,n,l*3,0,Math.PI*2),e.fill(),e.fillStyle=`hsla(${r}, 50%, 70%, ${d*.8})`,e.beginPath(),e.arc(t,n,l*.6,0,Math.PI*2),e.fill(),e.fillStyle=`hsla(${r}, 30%, 90%, ${d*.9})`,e.beginPath(),e.arc(t,n,l*.2,0,Math.PI*2),e.fill()}function In(e,t,n=150,o,r,a){let i=t.glow;if(o!==void 0&&r!==void 0){let s=Math.sqrt((t.x-o)**2+(t.y-r)**2);s<n&&(i=Math.max(i,(1-s/n)*.8))}i<.05||kn(e,t.x,t.y,t.size,t.hue,i,a)}function Rt(e,t,n={}){let{lightX:o,lightY:r,lightRadius:a=150,time:i}=n,s=[...t].sort((d,l)=>{let u=d.glow,h=l.glow;if(o!==void 0&&r!==void 0){let m=Math.sqrt((d.x-o)**2+(d.y-r)**2),b=Math.sqrt((l.x-o)**2+(l.y-r)**2);m<a&&(u=Math.max(u,(1-m/a)*.8)),b<a&&(h=Math.max(h,(1-b/a)*.8))}return u-h});for(let d of s)In(e,d,a,o,r,i)}var $t={pulse:"4s",drift:"8s",creature:"12s",ambient:"20s",glacial:"30s"};function Tt(e,t=.3){return`${e*t}s`}function De(e,t,n,o,r,a){let i=e.createLinearGradient(t,n,t,n+r);return i.addColorStop(0,a.highlight),i.addColorStop(.5,a.mid),i.addColorStop(1,a.shadow),i}function kt(e,t,n,o,r,a){let i=e.createRadialGradient(t,n,o,t,n,r);return i.addColorStop(0,a.core),i.addColorStop(.4,a.mid),i.addColorStop(.7,a.outer),i.addColorStop(1,"transparent"),i}function It(e,t,n,o,r,a=.5){let i=e.createRadialGradient(t,n,o,t,n,r);return i.addColorStop(0,"transparent"),i.addColorStop(1,`rgba(0, 0, 0, ${a})`),i}function Ot(e,t,n=4,o=4,r="rgba(0, 0, 0, 0.4)"){e.save(),e.translate(n,o),e.fillStyle=r,t(),e.restore()}function Gt(e,t,n,o=0,r=0){e.shadowColor=n,e.shadowBlur=t,e.shadowOffsetX=o,e.shadowOffsetY=r}function Dt(e){e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}function Lt(e,t="medium"){let n={subtle:[.3,.15],medium:[.6,.3],strong:[.9,.5]},[o,r]=n[t],a=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(!a)return"none";let[,i,s,d]=a;return`
    0 0 20px rgba(${i}, ${s}, ${d}, ${o}),
    0 0 40px rgba(${i}, ${s}, ${d}, ${r})
  `.trim()}function Bt(){return`
    0 0 20px rgba(150, 200, 255, 0.3),
    inset 0 -10px 20px rgba(100, 180, 255, 0.2)
  `.trim()}function At(){return`
    0 0 10px rgba(100, 200, 255, 0.5),
    0 0 20px rgba(80, 180, 255, 0.3)
  `.trim()}function zt(){return`
    0 0 15px rgba(255, 100, 80, 0.6),
    0 0 30px rgba(255, 80, 60, 0.3)
  `.trim()}function Et(){return"0 0 10px rgba(77, 208, 225, 0.3)"}function Wt(){return{dim:"0 0 10px rgba(77, 208, 225, 0.2)",bright:"0 0 25px rgba(77, 208, 225, 0.5)"}}var On={equipment:{shadowOffset:{x:4,y:4},shadowColor:"rgba(0, 0, 0, 0.4)",outlineWidth:2,outlineColor:"#8a5a15"},light:{shadowOffset:{x:2,y:2},shadowColor:"rgba(0, 0, 0, 0.3)",outlineWidth:1,outlineColor:"#cc4420"},creature:{shadowOffset:{x:0,y:0},shadowColor:"transparent",outlineWidth:0,outlineColor:"transparent"}};function Xt(e,t,n,o){let r=On[t];(r.shadowOffset.x!==0||r.shadowOffset.y!==0)&&(e.save(),e.translate(r.shadowOffset.x,r.shadowOffset.y),e.fillStyle=r.shadowColor,n(),e.restore()),e.fillStyle=o,n(),r.outlineWidth>0&&(e.strokeStyle=r.outlineColor,e.lineWidth=r.outlineWidth,n(),e.stroke())}function Yt(){let e=[40+Math.random()*30,40+Math.random()*30,40+Math.random()*30,40+Math.random()*30];return`${e[0]}% ${e[1]}% ${e[2]}% ${e[3]}%`}var Ht={blob:"60% 50% 45% 55%",fish:"60% 40% 40% 60%",bell:"50% 50% 40% 40%",head:"55% 45% 50% 50%",tail:"30% 70% 60% 40%"};function Le(e,t,n,o,r,a=[.25,.75],i="rgba(100, 60, 20, 0.5)"){e.strokeStyle=i,e.lineWidth=1;for(let s of a){let d=t+o*s;e.beginPath(),e.moveTo(d,n),e.lineTo(d,n+r),e.stroke()}}function ce(e,t,n,o,r,a=4,i="#555"){e.strokeStyle=i,e.lineWidth=2;let s=r/(a+1);for(let d=1;d<=a;d++){let l=n+s*d;e.beginPath(),e.moveTo(t,l),e.lineTo(t+o,l),e.stroke()}}function Be(e,t,n,o,r,a,i=10,s="rgba(80, 80, 80, 0.6)"){e.strokeStyle=s,e.lineWidth=3,e.setLineDash([8,4]);let d=t+Math.sin(a*.002)*i;e.beginPath(),e.moveTo(t,n),e.lineTo(d,r),e.stroke(),e.setLineDash([])}function Ae(e,t,n,o,r,a="#222",i="#1a1a2e",s="rgba(100, 150, 200, 0.5)"){e.fillStyle=a,e.beginPath(),e.arc(t,n,o,0,Math.PI*2),e.fill(),e.fillStyle=i,e.beginPath(),e.arc(t,n,r,0,Math.PI*2),e.fill(),e.fillStyle=s,e.beginPath(),e.arc(t-2,n-2,r*.4,0,Math.PI*2),e.fill()}function ze(e,t,n,o,r,a){if(e.fillStyle="#444",e.beginPath(),e.arc(t,n,o,0,Math.PI*2),e.fill(),r){let i=.8+Math.sin(a*.005)*.1,s=e.createRadialGradient(t,n,0,t,n,o*8);s.addColorStop(0,`rgba(255, 250, 230, ${i})`),s.addColorStop(.2,`rgba(255, 240, 200, ${i*.5})`),s.addColorStop(1,"rgba(255, 240, 200, 0)"),e.fillStyle=s,e.beginPath(),e.arc(t,n,o*8,0,Math.PI*2),e.fill(),e.fillStyle=`rgba(255, 255, 240, ${i})`,e.beginPath(),e.arc(t,n,o*.6,0,Math.PI*2),e.fill()}}function qt(e,t,n,o,r,a,i=0){let s=30+i*30,d=e.createRadialGradient(t,n,0,t,n,s);d.addColorStop(0,`rgba(${180+i*75}, ${60+i*40}, ${60+i*20}, 0.8)`),d.addColorStop(.5,`rgba(${120+i*60}, 40, 40, 0.3)`),d.addColorStop(1,"transparent"),e.fillStyle=d,e.beginPath(),e.arc(t,n,s,0,Math.PI*2),e.fill();let l=o*(1+i*.5);e.fillStyle=`rgba(${200+i*55}, ${80+i*80}, ${60+i*40}, 1)`,e.beginPath(),e.arc(t,n,l,0,Math.PI*2),e.fill();let u=r-t,h=a-n,m=Math.sqrt(u*u+h*h),b=m>0?u/m*3:0,p=m>0?h/m*3:0;e.fillStyle="rgba(10, 0, 0, 1)",e.beginPath(),i>.4?e.ellipse(t+b,n+p,2,l*.7,0,0,Math.PI*2):e.arc(t+b,n+p,4-i*2,0,Math.PI*2),e.fill()}function Vt(e,t,n,o="rgba(10, 10, 15, 0.9)"){if(!(t.length<2)){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let r=1;r<t.length;r++)e.lineTo(t[r].x,t[r].y);e.strokeStyle=o,e.lineWidth=n,e.lineCap="round",e.stroke()}}function fe(e,t,n,o,r=200){let a=e-n,i=t-o,s=Math.sqrt(a*a+i*i);if(s>=r)return 0;let d=1-s/r;return d*d}function Ft(e,t,n,o,r,a=200){let i=fe(e,t,n,o,a);if(i===0)return 0;let s=e-n,d=t-o,l=Math.atan2(d,s),u=Math.abs(l-r),m=1-Math.min(u,Math.PI*2-u)/Math.PI;return i*(.3+m*.7)}function Nt(e,t,n,o=120,r={}){let{intensity:a=1,pulseTime:i,coreColor:s={r:255,g:255,b:255},ambientColor:d={r:180,g:220,b:255}}=r,l=i!==void 0?Math.sin(i*.003)*20:0,u=o+l;for(let m=5;m>=1;m--){let b=u*(m/2),p=.15/m*a,g=e.createRadialGradient(t,n,0,t,n,b);g.addColorStop(0,`rgba(${d.r}, ${d.g}, ${d.b}, ${p})`),g.addColorStop(.5,`rgba(${Math.round(d.r*.55)}, ${d.g}, ${Math.round(d.b*.85)}, ${p*.5})`),g.addColorStop(1,"transparent"),e.fillStyle=g,e.beginPath(),e.arc(t,n,b,0,Math.PI*2),e.fill()}let h=e.createRadialGradient(t,n,0,t,n,15);h.addColorStop(0,`rgba(${s.r}, ${s.g}, ${s.b}, ${.9*a})`),h.addColorStop(.5,`rgba(${Math.round(s.r*.8)}, ${Math.round(s.g*.94)}, ${s.b}, ${.5*a})`),h.addColorStop(1,"transparent"),e.fillStyle=h,e.beginPath(),e.arc(t,n,15,0,Math.PI*2),e.fill()}function _t(e,t,n,o={}){let{density:r=20,color:a={r:20,g:30,b:40},intensity:i=.15,time:s=0,seed:d=12345}=o,l=u=>{let h=Math.sin(d+u*127.1)*43758.5453;return h-Math.floor(h)};for(let u=0;u<r;u++){let h=l(u)*t,m=l(u+1e3)*n,b=s>0?Math.sin(s*8e-4+u*.5)*3:0,p=s>0?Math.cos(s*6e-4+u*.3)*2:0,g=h+b,f=m+p,c=30+l(u+2e3)*80,v=i*(.5+l(u+3e3)*.5),C=e.createRadialGradient(g,f,0,g,f,c);C.addColorStop(0,`rgba(${a.r}, ${a.g}, ${a.b}, ${v})`),C.addColorStop(.6,`rgba(${a.r}, ${a.g}, ${a.b}, ${v*.3})`),C.addColorStop(1,"transparent"),e.fillStyle=C,e.beginPath(),e.arc(g,f,c,0,Math.PI*2),e.fill()}}function jt(e,t,n,o,r={}){let{count:a=5,heightRatio:i=.4,intensity:s=.03}=r;for(let d=0;d<a;d++){let l=(Math.sin(o*.001+d)*.3+.5)*t,u=n*.1,h=e.createRadialGradient(l,u,0,l,u,150);h.addColorStop(0,`rgba(100, 150, 200, ${s})`),h.addColorStop(1,"rgba(100, 150, 200, 0)"),e.fillStyle=h,e.fillRect(0,0,t,n*i)}}function Gn(e){return{x:e.x,y:e.y,size:e.size??8,openness:1,awarenessRadius:e.awarenessRadius??200,blinkTimer:2e3+Math.random()*3e3,isBlinking:!1,blinkProgress:0,dilation:.5,hue:e.hue??0,illumination:0,pupilOffset:{x:0,y:0}}}function Dn(e,t,n,o=16){e.illumination=fe(t,n,e.x,e.y,e.awarenessRadius);let r=t-e.x,a=n-e.y,i=Math.sqrt(r*r+a*a);if(i>0){let d=e.size*.3,l=r/i*d,u=a/i*d;e.pupilOffset.x+=(l-e.pupilOffset.x)*.1,e.pupilOffset.y+=(u-e.pupilOffset.y)*.1}let s=1-e.illumination*.8;e.dilation+=(s-e.dilation)*.05,e.isBlinking?(e.blinkProgress+=o/150,e.blinkProgress<.5?e.openness=1-e.blinkProgress*2:e.openness=(e.blinkProgress-.5)*2,e.blinkProgress>=1&&(e.isBlinking=!1,e.blinkProgress=0,e.openness=1,e.blinkTimer=2e3+Math.random()*4e3)):(e.blinkTimer-=o,e.blinkTimer<=0&&(e.isBlinking=!0,e.blinkProgress=0))}function Ln(e,t,n={}){let{showGlow:o=!0,glowSize:r=2.5}=n,a=t.size*t.openness;if(a<.5)return;let i=t.hue===0||t.hue<60?200:100,s=t.hue>30&&t.hue<90?150:50,d=t.hue>150?200:50,l=t.illumination*55,u=Math.min(255,i+l),h=Math.min(255,s+t.illumination*40),m=Math.min(255,d+t.illumination*20);if(o){let g=a*r+t.illumination*a,f=e.createRadialGradient(t.x,t.y,0,t.x,t.y,g);f.addColorStop(0,`rgba(${u}, ${h}, ${m}, ${.6+t.illumination*.2})`),f.addColorStop(.5,`rgba(${u*.6}, ${h*.6}, ${m*.6}, ${.2+t.illumination*.2})`),f.addColorStop(1,"transparent"),e.fillStyle=f,e.beginPath(),e.arc(t.x,t.y,g,0,Math.PI*2),e.fill()}e.fillStyle=`rgba(${u}, ${h}, ${m}, ${.8+t.illumination*.2})`,e.beginPath(),e.arc(t.x,t.y,a,0,Math.PI*2),e.fill();let b=t.x+t.pupilOffset.x,p=t.y+t.pupilOffset.y;if(e.fillStyle="rgba(10, 0, 0, 0.9)",e.beginPath(),t.illumination>.4){let g=2*t.dilation,f=a*.7;e.ellipse(b,p,g,f,0,0,Math.PI*2)}else{let g=2+t.dilation*2;e.arc(b,p,g,0,Math.PI*2)}e.fill(),t.openness>.5&&(e.fillStyle=`rgba(255, 255, 255, ${.3*t.openness})`,e.beginPath(),e.arc(t.x-a*.3,t.y-a*.3,a*.2,0,Math.PI*2),e.fill())}function Jt(e){return e.map(Gn)}function Kt(e,t,n,o=16){for(let r of e)Dn(r,t,n,o)}function Ut(e,t,n){for(let o of t)Ln(e,o,n)}function Zt(e){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}}var ve=class{constructor(t){this.onFrame=t;this.animationId=null;this.frameCount=0;this.lastFrameTime=0;this.isRunning=!1;this.render=()=>{if(!this.isRunning)return;let t=performance.now(),n=t-this.lastFrameTime;this.lastFrameTime=t,this.onFrame(this.frameCount,n),this.frameCount++,this.animationId=requestAnimationFrame(this.render)}}start(){this.isRunning||(this.isRunning=!0,this.lastFrameTime=performance.now(),this.frameCount=0,this.render())}stop(){this.animationId!==null&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.isRunning=!1}reset(){this.frameCount=0,this.lastFrameTime=performance.now()}getFrameNum(){return this.frameCount}isRunning_(){return this.isRunning}};var ye=class{constructor(t){this.resizeObserver=null;this.canvas=t}startResizing(){if(this.resizeObserver)return;let t=this.handleResize.bind(this);this.resizeObserver=new ResizeObserver(t),this.handleResize(),this.resizeObserver.observe(this.canvas.parentElement)}stopResizing(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}registerResizeCallback(t){this.resizeCallback=t}getSize(){return{width:this.canvas.width,height:this.canvas.height}}getCenter(){return{x:this.canvas.width/2,y:this.canvas.height/2}}getBounds(){return this.canvas.getBoundingClientRect()}handleResize(){let t=this.canvas.getBoundingClientRect(),n=window.devicePixelRatio||1;this.canvas.width=t.width*n,this.canvas.height=t.height*n;let o=this.canvas.getContext("2d");o&&o.scale(n,n),this.resizeCallback&&this.resizeCallback()}};var Me=class{constructor(t){this.pos={x:-1e3,y:-1e3,angle:0,distance:0,isOver:!1};this.centerX=0;this.centerY=0;this.onMouseMove=this.handleMouseMove.bind(this);this.onMouseLeave=this.handleMouseLeave.bind(this);this.onMouseEnter=this.handleMouseEnter.bind(this);this.canvas=t,this.updateCenter()}startTracking(){this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("mouseleave",this.onMouseLeave),this.canvas.addEventListener("mouseenter",this.onMouseEnter)}stopTracking(){this.canvas.removeEventListener("mousemove",this.onMouseMove),this.canvas.removeEventListener("mouseleave",this.onMouseLeave),this.canvas.removeEventListener("mouseenter",this.onMouseEnter)}getPosition(){return{...this.pos}}isOver(){return this.pos.isOver}updateCenter(){this.centerX=this.canvas.width/2,this.centerY=this.canvas.height/2}handleMouseMove(t){let n=this.canvas.getBoundingClientRect(),o=(t.clientX-n.left)*(this.canvas.width/n.width),r=(t.clientY-n.top)*(this.canvas.height/n.height);this.pos.x=o,this.pos.y=r;let a=o-this.centerX,i=r-this.centerY;this.pos.distance=Math.sqrt(a*a+i*i),this.pos.angle=Math.atan2(i,a)*(180/Math.PI),this.pos.angle<0&&(this.pos.angle+=360),this.pos.isOver=!0}handleMouseLeave(){this.pos.x=-1e3,this.pos.y=-1e3,this.pos.isOver=!1}handleMouseEnter(){this.pos.isOver=!0}};var q=class{constructor(){this.frameNum=0;this.deltaTime=0}async init(t,n){this.canvas=t,this.ctx=t.getContext("2d"),this.config={...this.defaultConfig,...n},this.responsiveCanvas=new ye(t),this.responsiveCanvas.registerResizeCallback(()=>this.onCanvasResize()),this.responsiveCanvas.startResizing(),this.animationLoop=new ve((o,r)=>{this.frameNum=o,this.deltaTime=r,this.render(this.ctx,r),this.config.onFrame&&this.config.onFrame(o,r)}),await this.onInit(),this.animationLoop.start()}cleanup(){this.animationLoop?.stop(),this.responsiveCanvas?.stopResizing(),this.cursorManager?.stopTracking(),this.onCleanup()}async onInit(){}onCanvasResize(){}onCleanup(){}startCursorTracking(){if(this.cursorManager||(this.cursorManager=new Me(this.canvas)),this.cursorManager.startTracking(),this.responsiveCanvas){let t=this.onCanvasResize.bind(this),n=()=>{this.cursorManager?.updateCenter(),t()};this.onCanvasResize=n}}getCursorPos(){return this.cursorManager?.getPosition()??{x:-1e3,y:-1e3,angle:0,distance:0,isOver:!1}}getCanvasSize(){return this.responsiveCanvas?.getSize()??{width:this.canvas.width,height:this.canvas.height}}getCanvasCenter(){return this.responsiveCanvas?.getCenter()??{x:this.canvas.width/2,y:this.canvas.height/2}}};var Ce=class extends q{constructor(){super(...arguments);this.name="Shadows";this.description="Jellyfish-like creatures drifting in the deep";this.defaultConfig={intensity:.5,scale:1,duration:1/0};this.shadows=[];this.particles=[];this.time=0;this.lastW=0;this.lastH=0}async onInit(){this.startCursorTracking(),this.initializeParticles(),this.resizeShadows()}onCanvasResize(){let{width:n,height:o}=this.getCanvasSize();(this.shadows.length===0||Math.abs(n-this.lastW)>20||Math.abs(o-this.lastH)>20)&&this.resizeShadows()}onCleanup(){this.shadows=[],this.particles=[]}render(n,o){let{width:r,height:a}=this.getCanvasSize(),i=n.createLinearGradient(0,0,0,a);i.addColorStop(0,"#020911"),i.addColorStop(.5,"#010508"),i.addColorStop(1,"#000305"),n.fillStyle=i,n.fillRect(0,0,r,a),this.updateAndDrawShadows(n,r,a),this.drawLightSource(n,r,a),this.drawMarineSnow(n,r,a),this.drawVignette(n,r,a),this.time+=16}initializeParticles(){this.particles=[];for(let n=0;n<10;n++)this.particles.push({x:Math.random(),y:Math.random(),size:.5+Math.random()*1.5,speed:5e-4+Math.random()*.001,alpha:.1+Math.random()*.2})}resizeShadows(){let{width:n,height:o}=this.getCanvasSize();this.shadows=[];let r=4+Math.floor(Math.random()*4);for(let a=0;a<r;a++)this.shadows.push({x:Math.random()*n,y:Math.random()*o,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*1.5-.5,size:60+Math.random()*80,bellSize:40+Math.random()*50,tentacleCount:5+Math.floor(Math.random()*4),angle:Math.random()*Math.PI*2,angleSpeed:(Math.random()-.5)*.03,pulsePhase:Math.random()*Math.PI*2,pulseSpeed:.5+Math.random()*.5,timeOffset:Math.random()*1e3});this.lastW=n,this.lastH=o}updateAndDrawShadows(n,o,r){let a=this.getCursorPos();for(let i of this.shadows){i.x+=i.vx,i.y+=i.vy,i.angle+=i.angleSpeed,i.pulsePhase+=i.pulseSpeed*.01,Math.random()<.01&&(i.vx+=(Math.random()-.5)*.5,i.vy+=(Math.random()-.5)*.3),i.x<-i.size*2&&(i.x=o+i.size),i.x>o+i.size*2&&(i.x=-i.size),i.y<-i.size*2&&(i.y=r+i.size),i.y>r+i.size*2&&(i.y=-i.size);let s=Math.sqrt(i.vx**2+i.vy**2);s>3&&(i.vx=i.vx/s*3,i.vy=i.vy/s*3),i.vx*=.995,i.vy*=.995}for(let i of this.shadows){n.save();let s=this.time*.001+i.timeOffset,d=Math.sin(i.pulsePhase)*.15+1,l=i.bellSize*d;n.translate(i.x,i.y),n.rotate(i.angle),n.beginPath();let u=12;for(let g=0;g<=u;g++){let f=g/u*Math.PI*2,c=l*(.7+Math.sin(f*3+s)*.1),v=Math.cos(f)*c,C=Math.sin(f)*c-l*.3;g===0?n.moveTo(v,C):n.lineTo(v,C)}n.closePath();let h=this.calculateIllumination(i.x,i.y,a),b=.8+h*.08;n.fillStyle=`rgba(5, 3, 8, ${b})`,n.shadowBlur=12,n.shadowColor="rgba(0, 0, 0, 0.4)",n.fill();let p=i.size*1.5;for(let g=0;g<i.tentacleCount;g++){let f=g/i.tentacleCount*Math.PI*2,c=Math.cos(f)*l*.6,v=Math.sin(f)*l*.3,C=8;n.beginPath(),n.moveTo(c,v);for(let $=1;$<=C;$++){let S=$/C,k=c+Math.sin(s*1.5+g+S*2)*l*.15,P=v+S*p+Math.sin(s*2+g*2+S*3)*l*.1;n.lineTo(k,P)}let y=.8+h*.08;n.strokeStyle=`rgba(5, 3, 8, ${y})`,n.lineWidth=l*.1,n.lineCap="round",n.lineJoin="round",n.shadowBlur=6,n.shadowColor="rgba(0, 0, 0, 0.3)",n.stroke()}n.restore()}}calculateIllumination(n,o,r){if(!r.isOver)return 0;let a=n-r.x,i=o-r.y,s=a*a+i*i,d=200,l=d*d;return s<l?Math.pow(1-Math.sqrt(s)/d,2.5):0}drawLightSource(n,o,r){let a=this.getCursorPos();if(!a.isOver)return;let i=n.createRadialGradient(a.x,a.y,0,a.x,a.y,200);i.addColorStop(0,"rgba(200, 240, 255, 0.15)"),i.addColorStop(.5,"rgba(150, 200, 255, 0.08)"),i.addColorStop(1,"transparent"),n.fillStyle=i,n.beginPath(),n.arc(a.x,a.y,200,0,Math.PI*2),n.fill();let s=n.createRadialGradient(a.x,a.y,0,a.x,a.y,16);s.addColorStop(0,"rgba(255, 255, 255, 0.9)"),s.addColorStop(.6,"rgba(220, 240, 255, 0.5)"),s.addColorStop(1,"transparent"),n.fillStyle=s,n.beginPath(),n.arc(a.x,a.y,16,0,Math.PI*2),n.fill()}drawMarineSnow(n,o,r){for(let a of this.particles)a.y+=a.speed,a.x+=Math.sin(this.time*.001+a.y*5)*3e-4,a.y>1.05&&(a.y=-.05,a.x=Math.random()),n.fillStyle=`rgba(150, 180, 200, ${a.alpha})`,n.beginPath(),n.arc(a.x*o,a.y*r,a.size,0,Math.PI*2),n.fill()}drawVignette(n,o,r){let a=n.createRadialGradient(o/2,r/2,r*.25,o/2,r/2,r*.85);a.addColorStop(0,"transparent"),a.addColorStop(1,"rgba(0, 0, 0, 0.4)"),n.fillStyle=a,n.fillRect(0,0,o,r)}},so=new Ce;var Se=class extends q{constructor(){super(...arguments);this.name="Seekers";this.description="Bioluminescent swarm responding to light";this.defaultConfig={intensity:.7,scale:1,duration:1/0};this.seekers=[];this.particles=[];this.time=0}async onInit(){this.startCursorTracking(),this.initializeParticles(),this.resizeSeekersSwarm()}onCanvasResize(){let{width:n,height:o}=this.getCanvasSize();this.seekers.length===0&&this.resizeSeekersSwarm()}onCleanup(){this.seekers=[],this.particles=[]}initializeParticles(){this.particles=[];for(let n=0;n<30;n++)this.particles.push({x:Math.random(),y:Math.random(),size:.5+Math.random()*1.5,speed:5e-4+Math.random()*.001,alpha:.1+Math.random()*.2})}resizeSeekersSwarm(){let{width:n,height:o}=this.getCanvasSize();this.seekers=[];for(let r=0;r<50;r++){let a=Math.random()*Math.PI*2,i=Math.random()*Math.random()*100,s=n/2+Math.cos(a)*i,d=o/2+Math.sin(a)*i;s=Math.max(0,Math.min(n,s)),d=Math.max(0,Math.min(o,d)),this.seekers.push({x:s,y:d,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,size:3+Math.random()*5,brightness:.4+Math.random()*.4,bodyHue:190+Math.random()*20})}}render(n,o){let{width:r,height:a}=this.getCanvasSize(),i=this.getCursorPos(),s=n.createLinearGradient(0,0,0,a);s.addColorStop(0,"#020810"),s.addColorStop(.5,"#010508"),s.addColorStop(1,"#000305"),n.fillStyle=s,n.fillRect(0,0,r,a);let d=Math.sqrt((i.x-(i.x-o*.1))**2+(i.y-(i.y-o*.1))**2);for(let h of this.seekers){let m=i.x-h.x,b=i.y-h.y,p=Math.sqrt(m*m+b*b);if(i.isOver&&p<300){let v=Math.atan2(b,m),C=Math.max(0,1-p/300)*.15;h.vx+=Math.cos(v)*C,h.vy+=Math.sin(v)*C}else h.vx+=(Math.random()-.5)*.05,h.vy+=(Math.random()-.5)*.05;let g=r/2-h.x,f=a/2-h.y,c=Math.sqrt(g*g+f*f);if(c>200){let v=Math.atan2(f,g),C=Math.max(0,(c-200)/200)*.02;h.vx+=Math.cos(v)*C,h.vy+=Math.sin(v)*C}h.x+=h.vx,h.y+=h.vy,h.vx*=.98,h.vy*=.98,h.x<-10&&(h.x=r+10),h.x>r+10&&(h.x=-10),h.y<-10&&(h.y=a+10),h.y>a+10&&(h.y=-10)}let l=[...this.seekers].sort((h,m)=>h.y-m.y);for(let h of l){let m=i.x-h.x,b=i.y-h.y,p=Math.sqrt(m*m+b*b),g=h.brightness;i.isOver&&p<300&&(g=.6+Math.max(0,1-p/300)*.4);let f=h.size*3,c=n.createRadialGradient(h.x,h.y,0,h.x,h.y,f);c.addColorStop(0,`hsla(${h.bodyHue}, 100%, 60%, ${g*.6})`),c.addColorStop(.5,`hsla(${h.bodyHue}, 100%, 50%, ${g*.2})`),c.addColorStop(1,"transparent"),n.fillStyle=c,n.beginPath(),n.arc(h.x,h.y,f,0,Math.PI*2),n.fill(),n.fillStyle=`hsla(${h.bodyHue}, 100%, 50%, ${g})`,n.beginPath(),n.arc(h.x,h.y,h.size,0,Math.PI*2),n.fill(),n.fillStyle=`hsla(${h.bodyHue}, 100%, 70%, ${g*.8})`,n.beginPath(),n.arc(h.x,h.y,h.size*.5,0,Math.PI*2),n.fill()}for(let h of this.particles)h.y+=h.speed,h.x+=Math.sin(this.time*.001+h.y*5)*3e-4,h.y>1.05&&(h.y=-.05,h.x=Math.random()),n.fillStyle=`rgba(150, 180, 200, ${h.alpha})`,n.beginPath(),n.arc(h.x*r,h.y*a,h.size,0,Math.PI*2),n.fill();if(i.isOver&&i.x>0&&i.x<r){for(let m=3;m>=1;m--){let b=100*(m/2),p=.08/m,g=n.createRadialGradient(i.x,i.y,0,i.x,i.y,b);g.addColorStop(0,`rgba(180, 220, 255, ${p})`),g.addColorStop(.5,`rgba(100, 180, 220, ${p*.5})`),g.addColorStop(1,"transparent"),n.fillStyle=g,n.beginPath(),n.arc(i.x,i.y,b,0,Math.PI*2),n.fill()}let h=n.createRadialGradient(i.x,i.y,0,i.x,i.y,10);h.addColorStop(0,"rgba(255, 255, 255, 0.7)"),h.addColorStop(.5,"rgba(200, 240, 255, 0.3)"),h.addColorStop(1,"transparent"),n.fillStyle=h,n.beginPath(),n.arc(i.x,i.y,10,0,Math.PI*2),n.fill()}let u=n.createRadialGradient(r/2,a/2,a*.3,r/2,a/2,a*.85);u.addColorStop(0,"transparent"),u.addColorStop(1,"rgba(0, 0, 0, 0.5)"),n.fillStyle=u,n.fillRect(0,0,r,a),this.time+=16}},uo=new Se;var we=class extends q{constructor(){super(...arguments);this.name="Giant Squid";this.description="Encounter with massive cephalopod";this.defaultConfig={intensity:.8,scale:1,duration:1/0};this.particles=[];this.tentacle={progress:0,yCenter:.5,thickness:120,phase:0};this.time=0}async onInit(){this.startCursorTracking(),this.initializeParticles()}onCanvasResize(){}onCleanup(){this.particles=[]}initializeParticles(){this.particles=[];for(let n=0;n<40;n++)this.particles.push({x:Math.random(),y:Math.random(),size:Math.random()*2+.5,speed:Math.random()*3e-4+1e-4,drift:Math.random()*2e-4-1e-4,alpha:Math.random()*.3+.1})}drawMassiveTentacle(n,o,r){let a=-o*.3+this.tentacle.progress*o*1.6,i=this.time*8e-4,s=50,d=[];for(let l=0;l<=s;l++){let u=l/s,h=a-u*o*.8,m=r*this.tentacle.yCenter,b=Math.sin(i+u*3)*r*.15,p=Math.sin(i*.3+u*1.5)*r*.08,g=m+b+p,f=this.tentacle.thickness*(1-u*.6);d.push({x:h,y:g,thickness:f})}n.lineCap="round",n.lineJoin="round";for(let l=1;l<d.length;l++){let u=d[l-1],h=d[l];if(u.x<-100&&h.x<-100||u.x>o+100&&h.x>o+100)continue;let m=l/d.length,b=70+m*30,p=20+m*15,g=35+m*15;n.strokeStyle=`rgb(${b}, ${p}, ${g})`,n.lineWidth=(u.thickness+h.thickness)/2,n.beginPath(),n.moveTo(u.x,u.y),n.lineTo(h.x,h.y),n.stroke()}for(let l=2;l<d.length-2;l+=3){let u=d[l];if(u.x<-50||u.x>o+50)continue;let h=u.thickness*.25,m=d[l+1].x-d[l-1].x,b=d[l+1].y-d[l-1].y,p=Math.atan2(b,m)+Math.PI/2,g=u.x+Math.cos(p)*u.thickness*.35,f=u.y+Math.sin(p)*u.thickness*.35;n.beginPath(),n.arc(g,f,h,0,Math.PI*2),n.fillStyle="rgba(50, 15, 25, 0.9)",n.fill(),n.beginPath(),n.arc(g,f,h*.5,0,Math.PI*2),n.fillStyle="rgba(20, 5, 10, 0.95)",n.fill(),n.beginPath(),n.arc(g,f,h*.8,0,Math.PI*2),n.strokeStyle="rgba(100, 40, 50, 0.4)",n.lineWidth=2,n.stroke()}for(let l=5;l<d.length-5;l+=8){let u=d[l];if(u.x<0||u.x>o)continue;let h=this.time*.002+l*.3,m=Math.sin(h)*.5+.5,b=4+m*3,p=.3+m*.4;n.beginPath(),n.arc(u.x,u.y,b,0,Math.PI*2),n.fillStyle=`rgba(80, 180, 220, ${p})`,n.fill();let g=n.createRadialGradient(u.x,u.y,0,u.x,u.y,b*4);g.addColorStop(0,`rgba(80, 180, 220, ${p*.4})`),g.addColorStop(1,"rgba(80, 180, 220, 0)"),n.fillStyle=g,n.beginPath(),n.arc(u.x,u.y,b*4,0,Math.PI*2),n.fill()}n.strokeStyle="rgba(40, 10, 20, 0.3)",n.lineWidth=1;for(let l=4;l<d.length-4;l+=6){let u=d[l];if(u.x<0||u.x>o)continue;let h=d[l+1].x-d[l-1].x,m=d[l+1].y-d[l-1].y,b=Math.atan2(m,h)+Math.PI/2;n.beginPath(),n.moveTo(u.x+Math.cos(b)*u.thickness*.4,u.y+Math.sin(b)*u.thickness*.4),n.lineTo(u.x-Math.cos(b)*u.thickness*.4,u.y-Math.sin(b)*u.thickness*.4),n.stroke()}}render(n,o){let{width:r,height:a}=this.getCanvasSize(),i=this.getCursorPos();n.fillStyle="#020306",n.fillRect(0,0,r,a);let s=n.createLinearGradient(0,0,0,a);s.addColorStop(0,"rgba(5, 15, 30, 0.4)"),s.addColorStop(1,"rgba(0, 5, 15, 0.2)"),n.fillStyle=s,n.fillRect(0,0,r,a);for(let l of this.particles)l.y-=l.speed,l.x+=l.drift,l.y<-.05&&(l.y=1.05,l.x=Math.random()),n.beginPath(),n.arc(l.x*r,l.y*a,l.size,0,Math.PI*2),n.fillStyle=`rgba(150, 180, 200, ${l.alpha})`,n.fill();if(i.isOver&&i.x>0&&i.x<r){let l=n.createRadialGradient(i.x,i.y,0,i.x,i.y,180);l.addColorStop(0,"rgba(200, 220, 255, 0.12)"),l.addColorStop(.5,"rgba(150, 180, 220, 0.04)"),l.addColorStop(1,"rgba(100, 150, 200, 0)"),n.fillStyle=l,n.beginPath(),n.arc(i.x,i.y,180,0,Math.PI*2),n.fill()}this.time>1e3&&(this.tentacle.progress=Math.min((this.time-1e3)/12e3,1.2)),this.drawMassiveTentacle(n,r,a);let d=n.createRadialGradient(r/2,a/2,a*.2,r/2,a/2,a*.9);d.addColorStop(0,"rgba(0, 0, 0, 0)"),d.addColorStop(1,"rgba(0, 0, 0, 0.7)"),n.fillStyle=d,n.fillRect(0,0,r,a),this.time+=16}},go=new we;var Pe=class extends q{constructor(){super(...arguments);this.name="ROV Exterior";this.description="External camera - ROV Nereid descent";this.defaultConfig={intensity:.7,duration:1/0};this.time=0;this.particles=[];this.timing={glacial:8e-4,verySlow:.001,slow:.002};this.deepSea={surface:"#020810",mid:"#051018",deep:"#020a12",abyss:"#010508"};this.materials={rovYellow:{highlight:"#e8a832",mid:"#d4942a",shadow:"#b87820",outline:"#8a5a15"},flotation:{fill:"#ff6b35",outline:"#cc4420"},metal:{light:"#666",mid:"#444",dark:"#333",darkest:"#222"},lens:{body:"#1a1a2e",glint:"rgba(100, 150, 200, 0.5)"},panel:{line:"rgba(100, 60, 20, 0.5)"}};this.rov={x:.5,y:.45}}async onInit(){this.particles=[];for(let n=0;n<80;n++)this.particles.push({x:Math.random(),y:Math.random(),size:Math.random()*2+.5,speed:Math.random()*.008+.003,alpha:Math.random()*.5+.2})}onCanvasResize(){}render(n,o){let r=this.canvas.width/window.devicePixelRatio,a=this.canvas.height/window.devicePixelRatio,i=n.createLinearGradient(0,0,0,a);i.addColorStop(0,this.deepSea.surface),i.addColorStop(.3,this.deepSea.mid),i.addColorStop(.6,this.deepSea.deep),i.addColorStop(1,this.deepSea.abyss),n.fillStyle=i,n.fillRect(0,0,r,a);for(let m=0;m<3;m++){let b=(Math.sin(this.time*this.timing.glacial+m)*.3+.5)*r,p=n.createRadialGradient(b,a*.1,0,b,a*.1,150);p.addColorStop(0,"rgba(100, 150, 200, 0.03)"),p.addColorStop(1,"transparent"),n.fillStyle=p,n.fillRect(0,0,r,a*.4)}for(let m of this.particles)m.y-=m.speed,m.y<-.05&&(m.y=1.05,m.x=Math.random()),n.beginPath(),n.arc(m.x*r,m.y*a,m.size,0,Math.PI*2),n.fillStyle=`rgba(180, 200, 220, ${m.alpha})`,n.fill();let s=this.drift(this.time),d=(this.rov.x+s.x)*r,l=(this.rov.y+s.y)*a;this.drawROV(n,d,l,1.2),n.save(),n.translate(d,l),n.rotate(s.rotation);let u=n.createLinearGradient(0,50,0,a*.6);u.addColorStop(0,"rgba(255, 250, 230, 0.15)"),u.addColorStop(.5,"rgba(200, 220, 255, 0.05)"),u.addColorStop(1,"transparent"),n.fillStyle=u,n.beginPath(),n.moveTo(-35,50),n.lineTo(-80,a*.5),n.lineTo(80,a*.5),n.lineTo(35,50),n.closePath(),n.fill(),n.restore();let h=n.createRadialGradient(r/2,a/2,a*.3,r/2,a/2,a*.8);h.addColorStop(0,"transparent"),h.addColorStop(1,"rgba(0, 0, 0, 0.5)"),n.fillStyle=h,n.fillRect(0,0,r,a),this.time+=16}onCleanup(){}drift(n){return{x:Math.sin(n*this.timing.verySlow)*.02+Math.sin(n*this.timing.slow)*.01,y:Math.cos(n*this.timing.verySlow*1.1)*.02+Math.cos(n*this.timing.slow*.9)*.006,rotation:Math.sin(n*this.timing.glacial)*.03}}material3D(n,o,r,a,i,s){let d=n.createLinearGradient(o,r,o,r+i);return d.addColorStop(0,s.highlight),d.addColorStop(.5,s.mid),d.addColorStop(1,s.shadow),d}drawPanelLines(n,o,r,a,i,s){n.strokeStyle=this.materials.panel.line,n.lineWidth=1;for(let d of s){let l=o+a*d;n.beginPath(),n.moveTo(l,r),n.lineTo(l,r+i),n.stroke()}}drawGrille(n,o,r,a,i,s){n.strokeStyle=this.materials.metal.light,n.lineWidth=2;let d=i/(s+1);for(let l=1;l<=s;l++){let u=r+d*l;n.beginPath(),n.moveTo(o,u),n.lineTo(o+a,u),n.stroke()}}drawLens(n,o,r,a,i){n.fillStyle=this.materials.metal.darkest,n.beginPath(),n.arc(o,r,a,0,Math.PI*2),n.fill(),n.fillStyle=this.materials.lens.body,n.beginPath(),n.arc(o,r,i,0,Math.PI*2),n.fill(),n.fillStyle=this.materials.lens.glint,n.beginPath(),n.arc(o-2,r-2,i*.4,0,Math.PI*2),n.fill()}drawLight(n,o,r,a,i){if(n.fillStyle=this.materials.metal.mid,n.beginPath(),n.arc(o,r,a,0,Math.PI*2),n.fill(),i){let s=.8+Math.sin(this.time*this.timing.slow)*.1,d=n.createRadialGradient(o,r,0,o,r,a*8);d.addColorStop(0,`rgba(255, 250, 230, ${s})`),d.addColorStop(.2,`rgba(255, 240, 200, ${s*.5})`),d.addColorStop(1,"rgba(255, 240, 200, 0)"),n.fillStyle=d,n.beginPath(),n.arc(o,r,a*8,0,Math.PI*2),n.fill(),n.fillStyle=`rgba(255, 255, 240, ${s})`,n.beginPath(),n.arc(o,r,a*.6,0,Math.PI*2),n.fill()}}drawTether(n,o,r,a,i){n.strokeStyle="rgba(80, 80, 80, 0.6)",n.lineWidth=3,n.setLineDash([8,4]);let s=o+Math.sin(this.time*this.timing.slow)*i;n.beginPath(),n.moveTo(o,r),n.lineTo(s,a),n.stroke(),n.setLineDash([])}drawROV(n,o,r,a){n.save(),n.translate(o,r);let i=this.drift(this.time);n.rotate(i.rotation),n.scale(a,a);let s=80,d=50;n.fillStyle="rgba(0, 0, 0, 0.4)",n.fillRect(-s/2+4,-d/2+4,s,d),n.fillStyle=this.material3D(n,-s/2,-d/2,s,d,this.materials.rovYellow),n.fillRect(-s/2,-d/2,s,d),n.strokeStyle=this.materials.rovYellow.outline,n.lineWidth=2,n.strokeRect(-s/2,-d/2,s,d),this.drawPanelLines(n,-s/2,-d/2,s,d,[.25,.75]),n.fillStyle=this.materials.flotation.fill,n.fillRect(-s/2+5,-d/2-15,s-10,15),n.strokeStyle=this.materials.flotation.outline,n.strokeRect(-s/2+5,-d/2-15,s-10,15),n.fillStyle=this.materials.metal.dark,n.fillRect(-s/2-15,-10,15,20),n.fillRect(s/2,-10,15,20),this.drawGrille(n,-s/2-15,-10,15,20,4),this.drawGrille(n,s/2,-10,15,20,4),this.drawLens(n,0,d/2+10,12,8),this.drawLight(n,-25,d/2+5,8,!0),this.drawLight(n,25,d/2+5,8,!0),n.strokeStyle=this.materials.metal.light,n.lineWidth=4,n.lineCap="round",n.beginPath(),n.moveTo(-s/2+10,d/2),n.lineTo(-s/2+5,d/2+20),n.lineTo(-s/2+15,d/2+25),n.stroke(),this.drawTether(n,0,-d/2-15,-d/2-100,10),n.restore()}},fo=new Pe;var Re=class extends q{constructor(){super(...arguments);this.name="Leviathan";this.description="Encounter with a massive, ancient creature";this.defaultConfig={intensity:.8,duration:1/0};this.time=0;this.leviathan={x:-400,y:0,targetY:0,speed:1.5,size:280,opacity:0,active:!0,direction:1};this.seekers=[]}async onInit(){this.seekers=[];for(let n=0;n<15;n++)this.seekers.push({x:Math.random()*600,y:Math.random()*400,vx:0,vy:0,size:2+Math.random()*3,glow:.3+Math.random()*.4});this.leviathan.y=this.canvas.height*.5,this.leviathan.targetY=this.leviathan.y+(Math.random()-.5)*50}onCanvasResize(){this.leviathan.y=this.canvas.height*.5,this.leviathan.targetY=this.leviathan.y+(Math.random()-.5)*50}render(n,o){let r=this.canvas.width/window.devicePixelRatio,a=this.canvas.height/window.devicePixelRatio;n.fillStyle="#000",n.fillRect(0,0,r,a);let i=this.cursorManager?this.cursorManager.getPosition():{x:-1e3,y:-1e3},s=i.x>=0&&i.x<=r&&i.y>=0&&i.y<=a,d=s?i.x:-1e3,l=s?i.y:-1e3;if(this.seekers.forEach(h=>{if(h.x+=h.vx,h.y+=h.vy,h.vx*=.98,h.vy*=.98,h.vx+=(Math.random()-.5)*.1,h.vy+=(Math.random()-.5)*.1,d>0){let f={x:d-h.x,y:l-h.y},c=Math.sqrt(f.x*f.x+f.y*f.y);if(c<200&&c>0){let v=(1-c/200)*.3;h.vx+=f.x/c*v,h.vy+=f.y/c*v,h.glow=Math.min(1,h.glow+.02)}}h.x<0&&(h.x=r),h.x>r&&(h.x=0),h.y<0&&(h.y=a),h.y>a&&(h.y=0);let m=h.x-this.leviathan.x,b=h.y-this.leviathan.y,p=Math.sqrt(m*m+b*b);if(p<this.leviathan.size*1.5&&p>0){let f=(1-p/(this.leviathan.size*1.5))*3;h.vx+=m/p*f,h.vy+=b/p*f,h.glow=Math.min(1,h.glow+.1)}h.glow=Math.max(.3,h.glow-.01);let g=n.createRadialGradient(h.x,h.y,0,h.x,h.y,h.size*4);g.addColorStop(0,`rgba(100, 200, 220, ${h.glow})`),g.addColorStop(.5,`rgba(60, 150, 180, ${h.glow*.3})`),g.addColorStop(1,"transparent"),n.fillStyle=g,n.beginPath(),n.arc(h.x,h.y,h.size*4,0,Math.PI*2),n.fill()}),this.leviathan.active){this.leviathan.x+=this.leviathan.speed*this.leviathan.direction,this.leviathan.y+=(this.leviathan.targetY-this.leviathan.y)*.01;let h=Math.min(this.leviathan.x+300,r-this.leviathan.x+400);this.leviathan.opacity=Math.min(.8,h/500);let m=d-this.leviathan.x,b=l-this.leviathan.y,p=Math.sqrt(m*m+b*b),g=d>0?Math.max(0,1-p/(this.leviathan.size*1.5)):0;n.save();let f=this.leviathan.size*1.8,c=n.createRadialGradient(this.leviathan.x,this.leviathan.y,this.leviathan.size*.5,this.leviathan.x,this.leviathan.y,f);c.addColorStop(0,`rgba(0, 0, 0, ${this.leviathan.opacity*.8})`),c.addColorStop(1,"transparent"),n.fillStyle=c,n.beginPath(),n.arc(this.leviathan.x,this.leviathan.y,f,0,Math.PI*2),n.fill(),n.globalAlpha=this.leviathan.opacity;let v=g>.1?`rgb(${15+g*25}, ${12+g*18}, ${20+g*25})`:"#050308";if(n.fillStyle=v,n.beginPath(),n.ellipse(this.leviathan.x,this.leviathan.y,this.leviathan.size,this.leviathan.size*.35,0,0,Math.PI*2),n.fill(),g>.2){n.globalAlpha=this.leviathan.opacity*g*.6;for(let I=0;I<8;I++){let L=this.leviathan.x-this.leviathan.size*.6+I*this.leviathan.size*.18,B=this.leviathan.y;n.strokeStyle=`rgba(60, 50, 70, ${g})`,n.lineWidth=2,n.beginPath(),n.ellipse(L,B,8,this.leviathan.size*.28,0,0,Math.PI*2),n.stroke()}n.globalAlpha=this.leviathan.opacity}n.fillStyle=v,n.beginPath(),n.moveTo(this.leviathan.x-this.leviathan.direction*this.leviathan.size,this.leviathan.y),n.quadraticCurveTo(this.leviathan.x-this.leviathan.direction*this.leviathan.size*1.5,this.leviathan.y+Math.sin(this.time*.003)*30,this.leviathan.x-this.leviathan.direction*this.leviathan.size*2.2,this.leviathan.y+Math.sin(this.time*.002)*50),n.quadraticCurveTo(this.leviathan.x-this.leviathan.direction*this.leviathan.size*1.5,this.leviathan.y-Math.sin(this.time*.003)*20,this.leviathan.x-this.leviathan.direction*this.leviathan.size,this.leviathan.y),n.fill();let C=this.leviathan.x+this.leviathan.direction*this.leviathan.size*.5,M=this.leviathan.y-this.leviathan.size*.08,y=d>0?Math.max(0,1-Math.sqrt(Math.pow(d-C,2)+Math.pow(l-M,2))/200):0,$=8+y*6,S=30+y*30,k=n.createRadialGradient(C,M,0,C,M,S);k.addColorStop(0,`rgba(${180+y*75}, ${60+y*40}, ${60+y*20}, ${this.leviathan.opacity*(.8+y*.2)})`),k.addColorStop(.5,`rgba(${120+y*60}, 40, 40, ${this.leviathan.opacity*(.3+y*.3)})`),k.addColorStop(1,"transparent"),n.fillStyle=k,n.beginPath(),n.arc(C,M,S,0,Math.PI*2),n.fill();let P=y>.3?Math.sin(this.time*.01)*.2:0;n.fillStyle=`rgba(${200+y*55}, ${80+y*80}, ${60+y*40}, ${this.leviathan.opacity})`,n.beginPath(),n.arc(C,M,$*(1+P),0,Math.PI*2),n.fill();let w=Math.sqrt(Math.pow(d-C,2)+Math.pow(l-M,2))||1,R=d>0?(d-C)/w*3:0,O=l>0?(l-M)/w*3:0;if(n.fillStyle=`rgba(10, 0, 0, ${this.leviathan.opacity})`,n.beginPath(),y>.4?n.ellipse(C+R,M+O,2,$*.7,0,0,Math.PI*2):n.arc(C+R,M+O,4-y*2,0,Math.PI*2),n.fill(),g>.4){let I=this.leviathan.x+this.leviathan.direction*this.leviathan.size*.3,L=this.leviathan.y+this.leviathan.size*.12,B=(g-.4)*1.6,A=n.createRadialGradient(I,L,0,I,L,20);A.addColorStop(0,`rgba(180, 60, 60, ${this.leviathan.opacity*B*.6})`),A.addColorStop(1,"transparent"),n.fillStyle=A,n.beginPath(),n.arc(I,L,20,0,Math.PI*2),n.fill(),n.fillStyle=`rgba(200, 80, 60, ${this.leviathan.opacity*B})`,n.beginPath(),n.arc(I,L,5,0,Math.PI*2),n.fill()}let W=6,E=Math.floor(g*8);for(let I=0;I<W+E;I++){let L=I>=W,B=this.leviathan.x-this.leviathan.direction*(this.leviathan.size*.3+I%8*this.leviathan.size*.25),A=this.leviathan.y+Math.sin(I*1.5+this.time*.002)*(this.leviathan.size*.15)+(L?(I%2?-1:1)*this.leviathan.size*.2:0),X=4+Math.sin(this.time*.005+I)*2,G=L?g*.8:1,H=n.createRadialGradient(B,A,0,B,A,X*3);H.addColorStop(0,`rgba(80, 180, 200, ${this.leviathan.opacity*.6*G})`),H.addColorStop(.5,`rgba(60, 140, 160, ${this.leviathan.opacity*.2*G})`),H.addColorStop(1,"transparent"),n.fillStyle=H,n.beginPath(),n.arc(B,A,X*3,0,Math.PI*2),n.fill()}n.restore(),this.leviathan.x>r+this.leviathan.size*2.5&&(this.leviathan.x=-this.leviathan.size*2,this.leviathan.y=a*.3+Math.random()*a*.4,this.leviathan.targetY=this.leviathan.y+(Math.random()-.5)*80,this.leviathan.speed=1.2+Math.random()*1)}if(d>0){let m=n.createRadialGradient(d,l,0,d,l,120);m.addColorStop(0,"rgba(200, 220, 255, 0.15)"),m.addColorStop(.3,"rgba(150, 180, 220, 0.08)"),m.addColorStop(.6,"rgba(100, 140, 180, 0.03)"),m.addColorStop(1,"transparent"),n.fillStyle=m,n.beginPath(),n.arc(d,l,120,0,Math.PI*2),n.fill();let b=n.createRadialGradient(d,l,0,d,l,8);b.addColorStop(0,"rgba(220, 240, 255, 0.4)"),b.addColorStop(1,"transparent"),n.fillStyle=b,n.beginPath(),n.arc(d,l,8,0,Math.PI*2),n.fill()}let u=n.createRadialGradient(r/2,a/2,a*.2,r/2,a/2,a);u.addColorStop(0,"transparent"),u.addColorStop(1,"rgba(0, 0, 0, 0.4)"),n.fillStyle=u,n.fillRect(0,0,r,a),this.time+=16}onCleanup(){}},Mo=new Re;var $e=class extends q{constructor(){super(...arguments);this.name="The Wall";this.description="A massive organic surface covered in watching eyes";this.defaultConfig={intensity:.8,duration:1/0};this.time=0;this.eyes=[];this.particles=[];this.mottledBase=null;this.timing={glacial:8e-4,verySlow:.001,slow:.002,medium:.003};this.palette={base:{r:28,g:22,b:26},mid:{r:38,g:30,b:35},highlight:{r:58,g:48,b:52},shadow:{r:18,g:14,b:18},vein:{r:50,g:28,b:35},veinHighlight:{r:85,g:50,b:55}};this.F2=.5*(Math.sqrt(3)-1);this.G2=(3-Math.sqrt(3))/6;this.grad3=[[1,1],[-1,1],[1,-1],[-1,-1],[1,0],[-1,0],[0,1],[0,-1]];this.perm=[]}async onInit(){this.perm=this.createPerm(42),this.eyes=[];for(let n=0;n<12;n++)this.eyes.push({x:Math.random()*.85+.075,y:Math.random()*.85+.075,size:5+Math.random()*12,openness:0,awareness:100+Math.random()*120,blinkTimer:Math.random()*500,isBlinking:!1});this.particles=[];for(let n=0;n<15;n++)this.particles.push({x:Math.random(),y:Math.random(),size:Math.random()*1.5+.5,speed:Math.random()*.002+.001,alpha:Math.random()*.3+.1})}onCanvasResize(){this.mottledBase=null}render(n,o){let r=this.canvas.width/window.devicePixelRatio,a=this.canvas.height/window.devicePixelRatio,i=this.cursorManager?this.cursorManager.getPosition():{x:-1e3,y:-1e3},s={x:i.x>=0&&i.x<=r?i.x:-1e3,y:i.y>=0&&i.y<=a?i.y:-1e3};if(this.drawOrganicSurface(n,r,a,{lightX:s.x,lightY:s.y,time:this.time}),s.x>0&&s.x<r){for(let u=5;u>=1;u--){let h=150*(u/2),m=.12/u,b=n.createRadialGradient(s.x,s.y,0,s.x,s.y,h);b.addColorStop(0,`rgba(180, 220, 255, ${m})`),b.addColorStop(.5,`rgba(100, 180, 220, ${m*.5})`),b.addColorStop(1,"transparent"),n.fillStyle=b,n.beginPath(),n.arc(s.x,s.y,h,0,Math.PI*2),n.fill()}let l=n.createRadialGradient(s.x,s.y,0,s.x,s.y,15);l.addColorStop(0,"rgba(255, 255, 255, 0.9)"),l.addColorStop(.5,"rgba(200, 240, 255, 0.5)"),l.addColorStop(1,"transparent"),n.fillStyle=l,n.beginPath(),n.arc(s.x,s.y,15,0,Math.PI*2),n.fill()}for(let l of this.eyes){let u=l.x*r,h=l.y*a,m=0;if(s.x>0){let g=s.x-u,f=s.y-h,c=Math.sqrt(g*g+f*f);c<l.awareness&&(m=1-c/l.awareness,m=m*m)}let b=m>.1?Math.min(m*1.5,1):0;l.openness+=(b-l.openness)*.05,l.openness>.5&&(l.blinkTimer++,l.blinkTimer>200&&Math.random()<.008&&(l.isBlinking=!0,setTimeout(()=>{l.isBlinking=!1},120),l.blinkTimer=0));let p=l.isBlinking?l.openness*.1:l.openness;this.drawTrackingEye(n,u,h,l.size,s.x,s.y,m,p)}for(let l of this.particles)l.y+=l.speed,l.x+=Math.sin(this.time*this.timing.verySlow+l.y*10)*5e-4,l.y>1.05&&(l.y=-.05,l.x=Math.random()),n.beginPath(),n.arc(l.x*r,l.y*a,l.size,0,Math.PI*2),n.fillStyle=`rgba(150, 180, 200, ${l.alpha})`,n.fill();let d=n.createRadialGradient(r/2,a/2,a*.2,r/2,a/2,a*.9);d.addColorStop(0,"transparent"),d.addColorStop(1,"rgba(0, 0, 0, 0.7)"),n.fillStyle=d,n.fillRect(0,0,r,a),this.time+=16}onCleanup(){}createPerm(n){let o=Array.from({length:256},(a,i)=>i),r=n;for(let a=255;a>0;a--){r=r*1103515245+12345&2147483647;let i=r%(a+1);[o[a],o[i]]=[o[i],o[a]]}return[...o,...o]}simplex2D(n,o){let r=(n+o)*this.F2,a=Math.floor(n+r),i=Math.floor(o+r),s=(a+i)*this.G2,d=n-(a-s),l=o-(i-s),u=d>l?1:0,h=d>l?0:1,m=d-u+this.G2,b=l-h+this.G2,p=d-1+2*this.G2,g=l-1+2*this.G2,f=a&255,c=i&255,v=this.perm[f+this.perm[c]]%8,C=this.perm[f+u+this.perm[c+h]]%8,M=this.perm[f+1+this.perm[c+1]]%8,y=0,$=0,S=0,k=.5-d*d-l*l;k>=0&&(k*=k,y=k*k*(this.grad3[v][0]*d+this.grad3[v][1]*l));let P=.5-m*m-b*b;P>=0&&(P*=P,$=P*P*(this.grad3[C][0]*m+this.grad3[C][1]*b));let w=.5-p*p-g*g;return w>=0&&(w*=w,S=w*w*(this.grad3[M][0]*p+this.grad3[M][1]*g)),70*(y+$+S)}fbm(n,o,r=4){let a=0,i=.5,s=1,d=0;for(let l=0;l<r;l++)a+=i*this.simplex2D(n*s,o*s),d+=i,i*=.5,s*=2;return a/d}drawOrganicSurface(n,o,r,a){let{lightX:i,lightY:s,time:d}=a;if(!this.mottledBase||this.mottledBase.width!==o||this.mottledBase.height!==r){this.mottledBase=document.createElement("canvas"),this.mottledBase.width=o,this.mottledBase.height=r;let l=this.mottledBase.getContext("2d"),u=l.createImageData(o,r),h=u.data,m=.008;for(let b=0;b<r;b++)for(let p=0;p<o;p++){let g=this.fbm(p*m,b*m,4),f=this.fbm(p*m*2+100,b*m*2+100,3),c=(g+1)/2,v=(f+1)/2,C,M,y;if(c<.4){let S=c/.4;C=this.palette.shadow.r+(this.palette.base.r-this.palette.shadow.r)*S,M=this.palette.shadow.g+(this.palette.base.g-this.palette.shadow.g)*S,y=this.palette.shadow.b+(this.palette.base.b-this.palette.shadow.b)*S}else if(c<.7){let S=(c-.4)/.3;C=this.palette.base.r+(this.palette.mid.r-this.palette.base.r)*S,M=this.palette.base.g+(this.palette.mid.g-this.palette.base.g)*S,y=this.palette.base.b+(this.palette.mid.b-this.palette.base.b)*S}else{let S=(c-.7)/.3;C=this.palette.mid.r+(this.palette.highlight.r-this.palette.mid.r)*S*.3,M=this.palette.mid.g+(this.palette.highlight.g-this.palette.mid.g)*S*.3,y=this.palette.mid.b+(this.palette.highlight.b-this.palette.mid.b)*S*.3}C+=(v-.5)*10,M+=(v-.5)*8,y+=(v-.5)*10;let $=(b*o+p)*4;h[$]=Math.max(0,Math.min(255,C)),h[$+1]=Math.max(0,Math.min(255,M)),h[$+2]=Math.max(0,Math.min(255,y)),h[$+3]=255}l.putImageData(u,0,0)}n.drawImage(this.mottledBase,0,0),n.lineCap="round",n.lineJoin="round";for(let l=0;l<6;l++){let u=Math.floor((this.simplex2D(l*100,0)+1)*2)%4,h=(this.simplex2D(l*50,l*50)+1)/2,m,b,p;switch(u){case 0:m=h*o,b=-20,p=Math.PI/2+this.simplex2D(l*30,0)*.4;break;case 1:m=o+20,b=h*r,p=Math.PI+this.simplex2D(l*30,100)*.4;break;case 2:m=h*o,b=r+20,p=-Math.PI/2+this.simplex2D(l*30,200)*.4;break;default:m=-20,b=h*r,p=this.simplex2D(l*30,300)*.4}let g=5+Math.abs(this.simplex2D(l*20,l*20))*4,f=[{x:m,y:b,t:g}];for(let c=0;c<12;c++){let v=this.simplex2D(l*1e3+c*10,0)*.5;p+=v;let C=25+this.simplex2D(l*1e3+c*20,0)*15,M=Math.sin(d*.002+c*.5)*2;m+=Math.cos(p)*C,b+=Math.sin(p)*C+M;let y=this.simplex2D(l*1e3+c*15,500);if(g*=.92+y*.1,y>.6&&(g*=1.15),f.push({x:m,y:b,t:Math.max(.5,g)}),m<-50||m>o+50||b<-50||b>r+50)break}for(let c=0;c<f.length-1;c++){let v=f[Math.max(0,c-1)],C=f[c],M=f[c+1],y=f[Math.min(f.length-1,c+2)],$=C.x+(M.x-v.x)/6,S=C.y+(M.y-v.y)/6,k=M.x-(y.x-C.x)/6,P=M.y-(y.y-C.y)/6,w=(C.t+M.t)/2;n.strokeStyle=`rgba(${this.palette.shadow.r}, ${this.palette.shadow.g}, ${this.palette.shadow.b}, 0.4)`,n.lineWidth=w+2,n.beginPath(),n.moveTo(C.x+1,C.y+1),n.bezierCurveTo($+1,S+1,k+1,P+1,M.x+1,M.y+1),n.stroke(),n.strokeStyle=`rgba(${this.palette.vein.r}, ${this.palette.vein.g}, ${this.palette.vein.b}, 0.7)`,n.lineWidth=w,n.beginPath(),n.moveTo(C.x,C.y),n.bezierCurveTo($,S,k,P,M.x,M.y),n.stroke(),n.strokeStyle=`rgba(${this.palette.veinHighlight.r}, ${this.palette.veinHighlight.g}, ${this.palette.veinHighlight.b}, 0.25)`,n.lineWidth=w*.4,n.beginPath(),n.moveTo(C.x,C.y-w*.25),n.bezierCurveTo($,S-w*.25,k,P-w*.25,M.x,M.y-w*.25),n.stroke()}}if(i>0&&s>0){let l=n.createRadialGradient(i,s,0,i,s,200);l.addColorStop(0,`rgba(${this.palette.veinHighlight.r+20}, ${this.palette.veinHighlight.g}, ${this.palette.veinHighlight.b-10}, 0.15)`),l.addColorStop(.3,`rgba(${this.palette.vein.r+15}, ${this.palette.vein.g}, ${this.palette.vein.b}, 0.1)`),l.addColorStop(.6,`rgba(${this.palette.mid.r+10}, ${this.palette.mid.g+5}, ${this.palette.mid.b+5}, 0.05)`),l.addColorStop(1,"transparent"),n.fillStyle=l,n.fillRect(0,0,o,r);let u=n.createRadialGradient(i,s,0,i,s,100);u.addColorStop(0,`rgba(${this.palette.highlight.r+40}, ${this.palette.highlight.g+35}, ${this.palette.highlight.b+30}, 0.2)`),u.addColorStop(.5,`rgba(${this.palette.highlight.r+20}, ${this.palette.highlight.g+15}, ${this.palette.highlight.b+10}, 0.08)`),u.addColorStop(1,"transparent"),n.fillStyle=u,n.fillRect(0,0,o,r)}}drawTrackingEye(n,o,r,a,i,s,d,l){if(l<.05)return;let u=a*l,h=(30+d*30)*l,m=n.createRadialGradient(o,r,0,o,r,h),b=180+d*75,p=60+d*40,g=60+d*20;m.addColorStop(0,`rgba(${b}, ${p}, ${g}, ${.8*l})`),m.addColorStop(.5,`rgba(${120+d*60}, 40, 40, ${.3*l})`),m.addColorStop(1,"transparent"),n.fillStyle=m,n.beginPath(),n.arc(o,r,h,0,Math.PI*2),n.fill(),n.fillStyle=`rgba(${200+d*55}, ${80+d*80}, ${60+d*40}, ${l})`,n.beginPath(),n.arc(o,r,u,0,Math.PI*2),n.fill();let f=i-o,c=s-r,v=Math.sqrt(f*f+c*c),C=v>0?f/v*u*.3:0,M=v>0?c/v*u*.3:0;n.fillStyle=`rgba(10, 0, 0, ${l})`,n.beginPath(),d>.4?n.ellipse(o+C,r+M,2*l,u*.7,0,0,Math.PI*2):n.arc(o+C,r+M,(4-d*2)*l,0,Math.PI*2),n.fill()}},wo=new $e;var Kr=new Ce,Ur=new Se,Zr=new we,Qr=new Pe,xr=new Re,ea=new $e,Qt={shadows:Kr,seekers:Ur,giantSquid:Zr,rovExterior:Qr,leviathan:xr,wall:ea};var xt={deepSea:Qt};var oe={};function ee(e,t){oe[e]&&console.warn(`Theme "${e}" is already registered. Overwriting.`),oe[e]=t}function er(e){return oe[e]}function nr(){return Object.keys(oe)}var tr=new Proxy({},{get(e,t){if(typeof t=="string")return oe[t]},ownKeys(){return Object.keys(oe)},has(e,t){return t in oe}});var Bn={};Y(Bn,{bioGlow:()=>Xe,bioluminescence:()=>ie,darkness:()=>Ee,deepSea:()=>N,materials:()=>V,randomBioHue:()=>We});var N={background:{surface:"#020810",mid:"#051018",deep:"#020a12",abyss:"#010508",void:"#000000"},water:{ambient:"rgba(100, 150, 200, 0.03)",light:"rgba(180, 200, 220, 0.4)",particleDim:"rgba(180, 200, 230, 0.3)"},hud:{text:"rgba(77, 208, 225, 0.5)",recording:"rgba(255, 150, 100, 0.7)"}},ie={cyan:{core:"rgba(100, 200, 255, 0.9)",mid:"rgba(80, 180, 255, 0.5)",outer:"rgba(60, 150, 255, 0.2)",halo:"rgba(77, 208, 225, 0.5)"},warm:{core:"rgba(255, 100, 80, 0.8)",mid:"rgba(255, 80, 60, 0.4)",outer:"rgba(200, 50, 50, 0.3)"},playerLight:{core:"rgba(255, 255, 255, 0.9)",inner:"rgba(200, 240, 255, 0.5)",mid:"rgba(180, 220, 255, 0.15)",ambient:"rgba(100, 180, 220, 0.1)"},hueRange:{min:180,max:220}},V={rovYellow:{highlight:"#e8a832",mid:"#d4942a",shadow:"#b87820",outline:"#8a5a15"},flotation:{fill:"#ff6b35",outline:"#cc4420"},metal:{light:"#666666",mid:"#444444",dark:"#333333",darkest:"#222222"},lens:{body:"#1a1a2e",glint:"rgba(100, 150, 200, 0.5)"},panel:{line:"rgba(100, 60, 20, 0.5)",shadow:"rgba(0, 0, 0, 0.4)"},creatureFlesh:e=>({r:15+e*25,g:12+e*18,b:20+e*25})},Ee={true:"#000000",soft:"#010508",tendril:"rgba(10, 10, 15, 0.9)",vignette:"rgba(0, 0, 0, 0.4)",shadow:"rgba(0, 0, 0, 0.4)"};function We(){let{min:e,max:t}=ie.hueRange;return e+Math.random()*(t-e)}function Xe(e,t=70,n=60,o=.6){return`hsla(${e}, ${t}%, ${n}%, ${o})`}var An={};Y(An,{cssBioGlow:()=>Ne,cssCreatureBody:()=>_e,cssDeepWater:()=>Fe,cssDistantCreature:()=>Je,cssJellyfishBell:()=>je,deepWaterBackground:()=>Ye,eyeGlow:()=>Ve,lightBeam:()=>qe,playerLight:()=>He});function Ye(e,t){let n=e.createLinearGradient(0,0,0,t);return n.addColorStop(0,N.background.surface),n.addColorStop(.3,N.background.mid),n.addColorStop(.6,N.background.deep),n.addColorStop(1,N.background.abyss),n}function He(e,t,n,o,r=1){let a=[];for(let s=5;s>=1;s--){let d=o*(s/2),l=.15/s*r,u=e.createRadialGradient(t,n,0,t,n,d);u.addColorStop(0,`rgba(180, 220, 255, ${l})`),u.addColorStop(.5,`rgba(100, 180, 220, ${l*.5})`),u.addColorStop(1,"transparent"),a.push(u)}let i=e.createRadialGradient(t,n,0,t,n,15);return i.addColorStop(0,`rgba(255, 255, 255, ${.9*r})`),i.addColorStop(.5,`rgba(200, 240, 255, ${.5*r})`),i.addColorStop(1,"transparent"),a.push(i),a}function qe(e,t,n){let o=e.createLinearGradient(0,t,0,n);return o.addColorStop(0,"rgba(255, 250, 230, 0.15)"),o.addColorStop(.5,"rgba(200, 220, 255, 0.05)"),o.addColorStop(1,"rgba(200, 220, 255, 0)"),o}function Ve(e,t,n,o,r=0){let a=e.createRadialGradient(t,n,0,t,n,o),i=180+r*75,s=60+r*40,d=60+r*20;return a.addColorStop(0,`rgba(${i}, ${s}, ${d}, 0.8)`),a.addColorStop(.5,`rgba(${120+r*60}, 40, 40, 0.3)`),a.addColorStop(1,"transparent"),a}function Fe(){return`linear-gradient(
    180deg,
    ${N.background.surface} 0%,
    ${N.background.mid} 30%,
    ${N.background.deep} 60%,
    ${N.background.abyss} 100%
  )`}function Ne(e="cyan"){let t=ie[e];return`radial-gradient(
    circle,
    ${t.core} 0%,
    ${t.mid} 30%,
    ${t.outer} 60%,
    transparent 70%
  )`}function _e(e=.8){return`radial-gradient(
    ellipse at 40% 40%,
    rgba(20, 30, 40, ${e}) 0%,
    rgba(15, 25, 35, ${e*.8}) 50%,
    rgba(10, 20, 30, ${e*.5}) 80%,
    transparent 100%
  )`}function je(){return`radial-gradient(
    ellipse at 50% 30%,
    rgba(180, 220, 255, 0.4) 0%,
    rgba(150, 200, 255, 0.2) 40%,
    rgba(120, 180, 255, 0.1) 70%,
    transparent 100%
  )`}function Je(){return`radial-gradient(
    ellipse at center,
    rgba(10, 20, 35, 0.8) 0%,
    transparent 70%
  )`}var zn={};Y(zn,{createBioParticles:()=>en,createDeepParticles:()=>Qe,createMarineSnow:()=>Ke,cssMarineSnowParticle:()=>na,cssMarineSnowStyles:()=>ra,drawBioParticles:()=>nn,drawMarineSnow:()=>Ze,htmlMarineSnow:()=>ta,updateDeepParticles:()=>xe,updateMarineSnow:()=>Ue});function Ke(e=80){return Array.from({length:e},()=>({x:Math.random(),y:Math.random(),size:Math.random()*2+.5,speed:Math.random()*.008+.003,alpha:Math.random()*.5+.2}))}function Ue(e,t="down"){let n=t==="up"?-1:1;for(let o of e)o.y+=o.speed*n,t==="up"&&o.y<-.05?(o.y=1.05,o.x=Math.random()):t==="down"&&o.y>1.05&&(o.y=-.05,o.x=Math.random())}function Ze(e,t,n,o){for(let r of t)e.beginPath(),e.arc(r.x*n,r.y*o,r.size,0,Math.PI*2),e.fillStyle=`rgba(180, 200, 220, ${r.alpha})`,e.fill()}function Qe(e=12){return Array.from({length:e},()=>({x:Math.random(),y:Math.random(),size:Math.random()*1.5+.5,speed:Math.random()*.002+.001,alpha:Math.random()*.3+.1,phase:Math.random()*Math.PI*2}))}function xe(e,t){for(let n of e)n.y+=n.speed,n.x+=Math.sin(t*.001+(n.phase??0))*5e-4,n.y>1.05&&(n.y=-.05,n.x=Math.random())}function na(e){let t=Math.random()*100,n=Math.random()*100,o=Math.random()*5,r=Math.random()>.5?3:2,a=Math.random()>.5?.3:.4;return{style:`
      position: absolute;
      left: ${t}%;
      top: ${n}%;
      width: ${r}px;
      height: ${r}px;
      background: rgba(200, 220, 255, ${a});
      border-radius: 50%;
      animation: snow-drift 8s linear infinite;
      animation-delay: ${o}s;
    `.trim(),animation:`
      @keyframes snow-drift {
        0% { transform: translateY(-20px) translateX(0); opacity: 0; }
        10% { opacity: 1; }
        90% { opacity: 1; }
        100% { transform: translateY(300px) translateX(20px); opacity: 0; }
      }
    `.trim()}}function ta(e=20){return`<div class="marine-snow">${Array.from({length:e},(n,o)=>{let r=Math.random()*100,a=Math.random()*100,i=Math.random()*5;return`<div class="snow-particle" style="left: ${r}%; top: ${a}%; animation-delay: ${i}s;"></div>`}).join(`
`)}</div>`}var ra=`
  .marine-snow {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
  }
  
  .snow-particle {
    position: absolute;
    width: 2px;
    height: 2px;
    background: rgba(200, 220, 255, 0.4);
    border-radius: 50%;
    animation: snow-drift 8s linear infinite;
  }
  
  .snow-particle:nth-child(odd) {
    width: 3px;
    height: 3px;
    background: rgba(180, 200, 230, 0.3);
  }
  
  @keyframes snow-drift {
    0% { transform: translateY(-20px) translateX(0); opacity: 0; }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% { transform: translateY(300px) translateX(20px); opacity: 0; }
  }
`;function en(e=15){return Array.from({length:e},()=>({x:Math.random(),y:Math.random(),size:Math.random()*4+2,speed:Math.random()*.002+.001,alpha:Math.random()*.6+.3,hue:180+Math.random()*40,pulseSpeed:Math.random()*.003+.002,phase:Math.random()*Math.PI*2}))}function nn(e,t,n,o,r){for(let a of t){let i=(Math.sin(r*a.pulseSpeed+(a.phase??0))+1)/2,s=a.alpha*(.5+i*.5),d=a.size*(.8+i*.4),l=a.x*n,u=a.y*o,h=e.createRadialGradient(l,u,0,l,u,d*3);h.addColorStop(0,`hsla(${a.hue}, 70%, 60%, ${s})`),h.addColorStop(.5,`hsla(${a.hue}, 60%, 40%, ${s*.3})`),h.addColorStop(1,"transparent"),e.fillStyle=h,e.beginPath(),e.arc(l,u,d*3,0,Math.PI*2),e.fill(),e.fillStyle=`hsla(${a.hue}, 50%, 80%, ${s})`,e.beginPath(),e.arc(l,u,d*.5,0,Math.PI*2),e.fill()}}var En={};Y(En,{drawJellyfish:()=>an,drawLightCone:()=>rn,drawROV:()=>tn,drawSpecimen:()=>on});var Te={glacial:8e-4,verySlow:.001,slow:.002,medium:.003};function tn(e,t,n,o=1,r={}){let{lightsOn:a=!0,showTether:i=!0,showArm:s=!0,time:d=0,rotation:l=0}=r;e.save(),e.translate(t,n),e.rotate(l),e.scale(o,o);let u=80,h=50;e.fillStyle="rgba(0, 0, 0, 0.4)",e.fillRect(-u/2+4,-h/2+4,u,h),e.fillStyle=De(e,-u/2,-h/2,u,h,V.rovYellow),e.fillRect(-u/2,-h/2,u,h),e.strokeStyle=V.rovYellow.outline,e.lineWidth=2,e.strokeRect(-u/2,-h/2,u,h),Le(e,-u/2,-h/2,u,h,[.25,.75]),e.fillStyle=V.flotation.fill,e.fillRect(-u/2+5,-h/2-15,u-10,15),e.strokeStyle=V.flotation.outline,e.lineWidth=1,e.strokeRect(-u/2+5,-h/2-15,u-10,15),e.fillStyle=V.metal.dark,e.fillRect(-u/2-15,-10,15,20),e.fillRect(u/2,-10,15,20),ce(e,-u/2-15,-10,15,20,4,V.metal.mid),ce(e,u/2,-10,15,20,4,V.metal.mid),Ae(e,0,h/2+10,12,8),a?[-25,25].forEach(m=>{ze(e,m,h/2+5,8,!0,d)}):[-25,25].forEach(m=>{e.fillStyle=V.metal.mid,e.beginPath(),e.arc(m,h/2+5,8,0,Math.PI*2),e.fill()}),s&&(e.strokeStyle=V.metal.mid,e.lineWidth=4,e.lineCap="round",e.beginPath(),e.moveTo(-u/2+10,h/2),e.lineTo(-u/2+5,h/2+20),e.lineTo(-u/2+15,h/2+25),e.stroke()),i&&Be(e,0,-h/2-15,0,-h/2-100,d),e.restore()}function rn(e,t,n,o,r,a={}){let{spread:i=.5,startOpacity:s=.15,color:d={r:255,g:250,b:230}}=a;e.save(),e.translate(t,n),e.rotate(o-Math.PI/2);let l=i/2,u=Math.tan(l)*r,h=e.createLinearGradient(0,0,0,r);h.addColorStop(0,`rgba(${d.r}, ${d.g}, ${d.b}, ${s})`),h.addColorStop(.5,`rgba(${d.r}, ${d.g}, ${d.b}, ${s*.3})`),h.addColorStop(1,`rgba(${d.r}, ${d.g}, ${d.b}, 0)`),e.fillStyle=h,e.beginPath(),e.moveTo(-10,0),e.lineTo(-u,r),e.lineTo(u,r),e.lineTo(10,0),e.closePath(),e.fill(),e.restore()}function an(e,t,n,o={}){let{bellWidth:r=50,tentacleCount:a=4,time:i=0,glowIntensity:s=.4}=o,d=r*.7,l=pe(i,Te.slow,.95,1.05);e.save(),e.translate(t,n);let u=e.createRadialGradient(0,0,0,0,0,r*1.5);u.addColorStop(0,`rgba(150, 200, 255, ${s*.3})`),u.addColorStop(.5,`rgba(150, 200, 255, ${s*.1})`),u.addColorStop(1,"transparent"),e.fillStyle=u,e.beginPath(),e.arc(0,0,r*1.5,0,Math.PI*2),e.fill(),e.scale(l,1/l);let h=e.createRadialGradient(0,-d*.3,0,0,0,r);h.addColorStop(0,`rgba(180, 220, 255, ${s})`),h.addColorStop(.4,`rgba(150, 200, 255, ${s*.5})`),h.addColorStop(.7,`rgba(120, 180, 255, ${s*.25})`),h.addColorStop(1,"transparent"),e.fillStyle=h,e.beginPath(),e.ellipse(0,0,r/2,d/2,0,0,Math.PI,!0),e.fill(),e.fillStyle=`rgba(200, 230, 255, ${s*.3})`,e.beginPath(),e.ellipse(0,-d*.15,r*.25,d*.2,0,0,Math.PI*2),e.fill();let m=r/(a+1),b=d*.3;for(let p=0;p<a;p++){let g=-r/2+m*(p+1),f=40+p%2*15,c=Math.sin(i*Te.slow+p*.8)*5,v=e.createLinearGradient(g,b,g+c,b+f);v.addColorStop(0,`rgba(150, 200, 255, ${s*.5})`),v.addColorStop(.5,`rgba(150, 200, 255, ${s*.2})`),v.addColorStop(1,"transparent"),e.strokeStyle=v,e.lineWidth=2,e.lineCap="round",e.beginPath(),e.moveTo(g,b),e.quadraticCurveTo(g+c*.5,b+f*.5,g+c,b+f),e.stroke()}e.restore()}function on(e,t,n,o={}){let{width:r=70,time:a=0,illumination:i=0,lookAt:s}=o,d=r*.65,l=Math.sin(a*Te.verySlow)*3,u=Math.sin(a*Te.glacial)*.02;e.save(),e.translate(t,n+l),e.rotate(u);let h=.6+i*.3,m=e.createRadialGradient(-r*.1,-d*.1,0,0,0,r*.7);m.addColorStop(0,`rgba(${20+i*15}, ${30+i*10}, ${40+i*10}, ${h})`),m.addColorStop(.5,`rgba(15, 25, 35, ${h*.8})`),m.addColorStop(.8,`rgba(10, 20, 30, ${h*.5})`),m.addColorStop(1,"transparent"),e.fillStyle=m,e.beginPath(),e.ellipse(0,0,r/2,d/2,0,0,Math.PI*2),e.fill();let b=pe(a,Te.medium,.6,1),p=-r*.1,g=-d*.05,f=8*b,c=e.createRadialGradient(p,g,0,p,g,f*2);c.addColorStop(0,`rgba(255, 100, 80, ${.8*b})`),c.addColorStop(.4,`rgba(255, 80, 60, ${.4*b})`),c.addColorStop(1,"transparent"),e.fillStyle=c,e.beginPath(),e.arc(p,g,f*2,0,Math.PI*2),e.fill();let v=r*.15,C=-d*.1,M=4+i*2,y=15+i*10,$=e.createRadialGradient(v,C,0,v,C,y);$.addColorStop(0,`rgba(200, 50, 50, ${.6+i*.3})`),$.addColorStop(.5,`rgba(150, 30, 30, ${.2+i*.2})`),$.addColorStop(1,"transparent"),e.fillStyle=$,e.beginPath(),e.arc(v,C,y,0,Math.PI*2),e.fill(),e.fillStyle=`rgba(200, 50, 50, ${.8+i*.2})`,e.beginPath(),e.arc(v,C,M,0,Math.PI*2),e.fill();let S=0,k=0;if(s){let P=s.x-(t+v),w=s.y-(n+C),R=Math.sqrt(P*P+w*w);R>0&&(S=P/R*2,k=w/R*2)}if(e.fillStyle="rgba(10, 0, 0, 0.9)",e.beginPath(),i>.4?e.ellipse(v+S,C+k,1.5,M*.6,0,0,Math.PI*2):e.arc(v+S,C+k,2,0,Math.PI*2),e.fill(),i>.3){let P=(i-.3)*1.4,w=r*.05,R=d*.15;e.fillStyle=`rgba(180, 40, 40, ${P*.5})`,e.beginPath(),e.arc(w,R,3,0,Math.PI*2),e.fill()}e.restore()}var Xn={};Y(Xn,{drawBarnacles:()=>ln,drawOrganicSurface:()=>sn,drawScarring:()=>dn,surfacePalettes:()=>ne});var aa=.5*(Math.sqrt(3)-1),ke=(3-Math.sqrt(3))/6,ue=[[1,1],[-1,1],[1,-1],[-1,-1],[1,0],[-1,0],[0,1],[0,-1]];function ar(e){let t=Array.from({length:256},(o,r)=>r),n=e;for(let o=255;o>0;o--){n=n*1103515245+12345&2147483647;let r=n%(o+1);[t[o],t[r]]=[t[r],t[o]]}return[...t,...t]}function D(e,t,n){let o=(e+t)*aa,r=Math.floor(e+o),a=Math.floor(t+o),i=(r+a)*ke,s=r-i,d=a-i,l=e-s,u=t-d,h=l>u?1:0,m=l>u?0:1,b=l-h+ke,p=u-m+ke,g=l-1+2*ke,f=u-1+2*ke,c=r&255,v=a&255,C=n[c+n[v]]%8,M=n[c+h+n[v+m]]%8,y=n[c+1+n[v+1]]%8,$=0,S=0,k=0,P=.5-l*l-u*u;P>=0&&(P*=P,$=P*P*(ue[C][0]*l+ue[C][1]*u));let w=.5-b*b-p*p;w>=0&&(w*=w,S=w*w*(ue[M][0]*b+ue[M][1]*p));let R=.5-g*g-f*f;return R>=0&&(R*=R,k=R*R*(ue[y][0]*g+ue[y][1]*f)),70*($+S+k)}function rr(e,t,n,o=4){let r=0,a=.5,i=1,s=0;for(let d=0;d<o;d++)r+=a*D(e*i,t*i,n),s+=a,a*=.5,i*=2;return r/s}var ne={fleshy:{base:{r:28,g:22,b:26},mid:{r:38,g:30,b:35},highlight:{r:58,g:48,b:52},shadow:{r:18,g:14,b:18},vein:{r:50,g:28,b:35},veinHighlight:{r:85,g:50,b:55}},abyssal:{base:{r:20,g:25,b:32},mid:{r:30,g:38,b:48},highlight:{r:50,g:62,b:75},shadow:{r:12,g:15,b:22},vein:{r:35,g:45,b:60},veinHighlight:{r:60,g:80,b:100}},rocky:{base:{r:25,g:28,b:25},mid:{r:38,g:42,b:38},highlight:{r:55,g:62,b:55},shadow:{r:15,g:18,b:16},vein:{r:35,g:32,b:30},veinHighlight:{r:55,g:50,b:45}},membranous:{base:{r:25,g:20,b:30},mid:{r:38,g:30,b:45},highlight:{r:60,g:48,b:68},shadow:{r:15,g:12,b:20},vein:{r:70,g:40,b:55},veinHighlight:{r:100,g:60,b:75}}},oa={visible:{noiseScale:.003,showVeins:!0,veinCount:6},subtle:{noiseScale:.005,showVeins:!0,veinCount:3},dramatic:{noiseScale:.002,showVeins:!0,veinCount:10}};function sn(e,t,n,o={}){let r=o.preset?oa[o.preset]:{},{type:a="fleshy",noiseScale:i=r.noiseScale??.003,showVeins:s=r.showVeins??!0,veinCount:d=r.veinCount??6,seed:l=42,time:u=0,lightX:h,lightY:m,lightRadius:b=250}={...r,...o},p=ne[a]||ne.fleshy,g=ar(l);Wn(e,t,n,p,g,i,u),ia(e,t,n,p,g,i),s&&sa(e,t,n,p,g,d,u),la(e,t,n,p,g,i*3),h!==void 0&&m!==void 0&&da(e,t,n,h,m,b,p,g)}function Wn(e,t,n,o,r,a,i){let u=Math.min(t,1920),h=Math.min(n,1080),m=u*h;if((t>1920||n>1080)&&console.warn(`drawOrganicSurface: Dimensions ${t}x${n} exceed safe limit (1920x1080). Using reduced size ${u}x${h} to prevent memory allocation failure.`),m>2073600){let f=Math.sqrt(2073600/m),c=Math.floor(u*f),v=Math.floor(h*f);return console.warn(`drawOrganicSurface: Pixel count ${m} exceeds limit 2073600. Scaling to ${c}x${v}.`),Wn(e,c,v,o,r,a,i)}let b;try{b=e.createImageData(u,h)}catch(f){if(f instanceof RangeError||f instanceof DOMException){let c=Math.floor(u*.5),v=Math.floor(h*.5);return console.error(`drawOrganicSurface: Failed to allocate ${u}x${h} buffer. Falling back to ${c}x${v}.`,f),Wn(e,c,v,o,r,a,i)}throw f}let p=b.data,g=i*5e-5;for(let f=0;f<h;f++)for(let c=0;c<u;c++){let v=rr(c*a+g,f*a,r,4),C=rr(c*a*2+100,f*a*2+100,r,3),M=(v+1)/2,y=(C+1)/2,$,S,k;if(M<.4){let w=M/.4;$=o.shadow.r+(o.base.r-o.shadow.r)*w,S=o.shadow.g+(o.base.g-o.shadow.g)*w,k=o.shadow.b+(o.base.b-o.shadow.b)*w}else if(M<.7){let w=(M-.4)/.3;$=o.base.r+(o.mid.r-o.base.r)*w,S=o.base.g+(o.mid.g-o.base.g)*w,k=o.base.b+(o.mid.b-o.base.b)*w}else{let w=(M-.7)/.3;$=o.mid.r+(o.highlight.r-o.mid.r)*w*.3,S=o.mid.g+(o.highlight.g-o.mid.g)*w*.3,k=o.mid.b+(o.highlight.b-o.mid.b)*w*.3}$+=(y-.5)*8,S+=(y-.5)*6,k+=(y-.5)*8;let P=(f*t+c)*4;p[P]=Math.max(0,Math.min(255,$)),p[P+1]=Math.max(0,Math.min(255,S)),p[P+2]=Math.max(0,Math.min(255,k)),p[P+3]=255}if(u===t&&h===n)e.putImageData(b,0,0);else{let f=document.createElement("canvas");f.width=u,f.height=h,f.getContext("2d").putImageData(b,0,0),e.drawImage(f,0,0,t,n)}}function ia(e,t,n,o,r,a){let i=a*.5;e.globalCompositeOperation="overlay";for(let s=0;s<8;s++){let d=D(s*50,0,r)*.5+.5,l=D(0,s*50,r)*.5+.5,u=d*t,h=l*n,m=100+Math.abs(D(s*30,s*30,r))*200;if(D(s*20,s*20+500,r)>0){let p=D(s*10,0,r)*Math.PI;e.save(),e.translate(u,h),e.rotate(p);let g=e.createLinearGradient(0,-m*.3,0,m*.3);g.addColorStop(0,`rgba(${o.highlight.r}, ${o.highlight.g}, ${o.highlight.b}, 0.15)`),g.addColorStop(.5,"rgba(128, 128, 128, 0)"),g.addColorStop(1,`rgba(${o.shadow.r}, ${o.shadow.g}, ${o.shadow.b}, 0.1)`),e.fillStyle=g,e.beginPath(),e.ellipse(0,0,m,m*.4,0,0,Math.PI*2),e.fill(),e.restore()}}e.globalCompositeOperation="source-over"}function sa(e,t,n,o,r,a,i){for(let s=0;s<a;s++){let d=Math.floor((D(s*100,0,r)+1)*2)%4,l,u,h,m=(D(s*50,s*50,r)+1)/2;switch(d){case 0:l=m*t,u=-20,h=Math.PI/2+D(s*30,0,r)*.4;break;case 1:l=t+20,u=m*n,h=Math.PI+D(s*30,100,r)*.4;break;case 2:l=m*t,u=n+20,h=-Math.PI/2+D(s*30,200,r)*.4;break;default:l=-20,u=m*n,h=D(s*30,300,r)*.4}or(e,l,u,h,5+Math.abs(D(s*20,s*20,r))*4,0,r,o,i,t,n,s*1e3)}}function or(e,t,n,o,r,a,i,s,d,l,u,h){if(r<1||a>4)return;let m=[{x:t,y:n,thickness:r}],b=t,p=n,g=o,f=r,c=8+Math.floor(Math.abs(D(h,0,i))*6);for(let v=0;v<c;v++){let C=D(h+v*10,a*100,i)*.6;g+=C;let M=30+D(h+v*20,0,i)*20,y=d>0?Math.sin(d*.002+v*.5+h*.01)*2:0;b+=Math.cos(g)*M,p+=Math.sin(g)*M+y;let $=D(h+v*15,a*50+500,i);if(f*=.92+$*.1,$>.6&&(f*=1.15),m.push({x:b,y:p,thickness:Math.max(.5,f)}),b<-50||b>l+50||p<-50||p>u+50)break;if(v>2&&D(h+v*25,a*200,i)>.7&&a<3){let S=g+(D(h+v*30,0,i)>0?1:-1)*(.5+Math.abs(D(h+v*35,0,i))*.5);or(e,b,p,S,f*.6,a+1,i,s,d,l,u,h+v*1e3+a*1e4)}}if(!(m.length<2)){e.lineCap="round",e.lineJoin="round";for(let v=0;v<m.length-1;v++){let C=m[Math.max(0,v-1)],M=m[v],y=m[v+1],$=m[Math.min(m.length-1,v+2)],S=M.x+(y.x-C.x)/6,k=M.y+(y.y-C.y)/6,P=y.x-($.x-M.x)/6,w=y.y-($.y-M.y)/6,R=(M.thickness+y.thickness)/2;e.strokeStyle=`rgba(${s.shadow.r}, ${s.shadow.g}, ${s.shadow.b}, 0.4)`,e.lineWidth=R+2,e.beginPath(),e.moveTo(M.x+1,M.y+1),e.bezierCurveTo(S+1,k+1,P+1,w+1,y.x+1,y.y+1),e.stroke(),e.strokeStyle=`rgba(${s.vein.r}, ${s.vein.g}, ${s.vein.b}, 0.7)`,e.lineWidth=R,e.beginPath(),e.moveTo(M.x,M.y),e.bezierCurveTo(S,k,P,w,y.x,y.y),e.stroke(),e.strokeStyle=`rgba(${s.veinHighlight.r}, ${s.veinHighlight.g}, ${s.veinHighlight.b}, 0.25)`,e.lineWidth=R*.4,e.beginPath(),e.moveTo(M.x,M.y-R*.25),e.bezierCurveTo(S,k-R*.25,P,w-R*.25,y.x,y.y-R*.25),e.stroke()}}}function la(e,t,n,o,r,a){e.globalCompositeOperation="soft-light";for(let i=0;i<15;i++){let s=(D(i*70,0,r)+1)/2*t,d=(D(0,i*70,r)+1)/2*n,l=40+Math.abs(D(i*40,i*40,r))*100,u=D(i*25,500,r)*Math.PI;e.save(),e.translate(s,d),e.rotate(u);let h=.3+Math.abs(D(i*35,0,r))*.4,m=e.createRadialGradient(0,0,0,0,0,l),b=D(i*45,250,r)>0?1.2:.8;m.addColorStop(0,`rgba(${o.mid.r*b}, ${o.mid.g*b}, ${o.mid.b*b}, 0.15)`),m.addColorStop(.7,`rgba(${o.base.r}, ${o.base.g}, ${o.base.b}, 0.05)`),m.addColorStop(1,"transparent"),e.fillStyle=m,e.beginPath(),e.ellipse(0,0,l,l*h,0,0,Math.PI*2),e.fill(),e.restore()}e.globalCompositeOperation="source-over"}function da(e,t,n,o,r,a,i,s){let d=e.createRadialGradient(o,r,0,o,r,a*1.5);d.addColorStop(0,`rgba(${i.veinHighlight.r+20}, ${i.veinHighlight.g}, ${i.veinHighlight.b-10}, 0.12)`),d.addColorStop(.3,`rgba(${i.vein.r+15}, ${i.vein.g}, ${i.vein.b}, 0.08)`),d.addColorStop(.6,`rgba(${i.mid.r+10}, ${i.mid.g+5}, ${i.mid.b+5}, 0.04)`),d.addColorStop(1,"transparent"),e.fillStyle=d,e.fillRect(0,0,t,n);let l=e.createRadialGradient(o,r,0,o,r,a*.5);l.addColorStop(0,`rgba(${i.highlight.r+40}, ${i.highlight.g+35}, ${i.highlight.b+30}, 0.2)`),l.addColorStop(.5,`rgba(${i.highlight.r+20}, ${i.highlight.g+15}, ${i.highlight.b+10}, 0.08)`),l.addColorStop(1,"transparent"),e.fillStyle=l,e.fillRect(0,0,t,n),e.globalCompositeOperation="overlay";let u=a*1.2;for(let h=0;h<5;h++){let m=(D(o*.01+h*20,r*.01,s)+1)*Math.PI,b=20+Math.abs(D(h*30,0,s))*60,p=o+Math.cos(m)*b,g=r+Math.sin(m)*b,f=Math.max(0,1-Math.sqrt((p-o)**2+(g-r)**2)/u)*.3;if(f>.05){e.strokeStyle=`rgba(${i.vein.r+20}, ${i.vein.g}, ${i.vein.b}, ${f})`,e.lineWidth=1+Math.abs(D(h*25,0,s))*2,e.lineCap="round",e.beginPath(),e.moveTo(p,g);let c=m+D(h*15,500,s)*.8,v=20+Math.abs(D(h*35,0,s))*40,C=v*.5,M=m+D(h*20,250,s)*.5;e.quadraticCurveTo(p+Math.cos(M)*C,g+Math.sin(M)*C,p+Math.cos(c)*v,g+Math.sin(c)*v),e.stroke()}}e.globalCompositeOperation="source-over"}function ln(e,t,n,o,r={}){let{count:a=8,seed:i=123,palette:s=ne.rocky}=r,d=ar(i);for(let l=0;l<a;l++){let u=(D(l*50,0,d)+1)*Math.PI,h=Math.abs(D(l*30,l*30,d))*o,m=t+Math.cos(u)*h,b=n+Math.sin(u)*h,p=3+Math.abs(D(l*40,0,d))*8;e.strokeStyle=`rgba(${s.highlight.r}, ${s.highlight.g}, ${s.highlight.b}, 0.5)`,e.lineWidth=2,e.beginPath(),e.arc(m,b,p,Math.PI*.7,Math.PI*1.9),e.stroke(),e.strokeStyle=`rgba(${s.shadow.r}, ${s.shadow.g}, ${s.shadow.b}, 0.6)`,e.beginPath(),e.arc(m,b,p,Math.PI*1.9,Math.PI*.7),e.stroke(),e.fillStyle=`rgba(${s.mid.r}, ${s.mid.g}, ${s.mid.b}, 0.7)`,e.beginPath(),e.arc(m,b,p*.5,0,Math.PI*2),e.fill()}}function dn(e,t,n,o,r={}){let{angle:a=0,width:i=3,palette:s=ne.fleshy}=r,d=t+Math.cos(a)*o*.5,l=n+Math.sin(a)*o*.5,u=t+Math.cos(a)*o,h=n+Math.sin(a)*o,m=(Math.random()-.5)*15,b=d+Math.cos(a+Math.PI/2)*m,p=l+Math.sin(a+Math.PI/2)*m;e.strokeStyle=`rgba(${s.shadow.r}, ${s.shadow.g}, ${s.shadow.b}, 0.7)`,e.lineWidth=i,e.lineCap="round",e.beginPath(),e.moveTo(t,n),e.quadraticCurveTo(b,p,u,h),e.stroke(),e.strokeStyle=`rgba(${s.veinHighlight.r}, ${s.veinHighlight.g}, ${s.veinHighlight.b}, 0.35)`,e.lineWidth=i*.4,e.beginPath(),e.moveTo(t,n-i*.4),e.quadraticCurveTo(b,p-i*.4,u,h-i*.4),e.stroke()}ee("deepSea",{colors:Bn,gradients:An,particles:zn,recipes:En,surfaces:Xn});var Yn={};Y(Yn,{addAlphaToColor:()=>hn,getGrowthColor:()=>lr,livingOs:()=>z,rgbToHex:()=>ir,rgbToRgba:()=>sr});var z={bark:{dark:{r:29,g:20,b:23},mid:{r:61,g:40,b:23},light:{r:92,g:61,b:42}},foliage:{dark:{r:29,g:58,b:45},mid:{r:45,g:90,b:61},light:{r:61,g:106,b:77},vibrant:{r:77,g:122,b:93}},growth:{new:{r:90,g:122,b:77},young:{r:106,g:138,b:93}},decay:{old:{r:29,g:58,b:45},withered:{r:23,g:45,b:35}},unsettling:{hungry:{r:100,g:80,b:60},satisfied:{r:60,g:80,b:60},starving:{r:40,g:50,b:40}}};function ir(e){let t=Math.round(e.r).toString(16).padStart(2,"0"),n=Math.round(e.g).toString(16).padStart(2,"0"),o=Math.round(e.b).toString(16).padStart(2,"0");return`#${t}${n}${o}`}function sr(e,t=1){return`rgba(${Math.round(e.r)}, ${Math.round(e.g)}, ${Math.round(e.b)}, ${t})`}function lr(e){let t=Math.max(0,Math.min(100,e));if(t<20)return z.foliage.mid;if(t<50){let n=(t-20)/30;return{r:Math.round(z.foliage.mid.r+(z.growth.new.r-z.foliage.mid.r)*n),g:Math.round(z.foliage.mid.g+(z.growth.new.g-z.foliage.mid.g)*n),b:Math.round(z.foliage.mid.b+(z.growth.new.b-z.foliage.mid.b)*n)}}else if(t<80){let n=(t-50)/30;return{r:Math.round(z.growth.new.r+(z.unsettling.hungry.r-z.growth.new.r)*n),g:Math.round(z.growth.new.g+(z.unsettling.hungry.g-z.growth.new.g)*n),b:Math.round(z.growth.new.b+(z.unsettling.hungry.b-z.growth.new.b)*n)}}else{let n=(t-80)/20;return{r:Math.round(z.unsettling.hungry.r+(z.unsettling.starving.r-z.unsettling.hungry.r)*n),g:Math.round(z.unsettling.hungry.g+(z.unsettling.starving.g-z.unsettling.hungry.g)*n),b:Math.round(z.unsettling.hungry.b+(z.unsettling.starving.b-z.unsettling.hungry.b)*n)}}}function hn(e,t){let n=Math.max(0,Math.min(1,t)),o=e.match(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*[\d.]+)?\s*\)/i);if(o)return`rgba(${o[1]}, ${o[2]}, ${o[3]}, ${n})`;let r=e.match(/#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})/);if(r){let a=r[1],i,s,d;return a.length===3?(i=parseInt(a[0]+a[0],16),s=parseInt(a[1]+a[1],16),d=parseInt(a[2]+a[2],16)):(i=parseInt(a.slice(0,2),16),s=parseInt(a.slice(2,4),16),d=parseInt(a.slice(4,6),16)),`rgba(${i}, ${s}, ${d}, ${n})`}return console.warn(`Could not parse color format: "${e}". Returning as-is.`),e}var _n={};Y(_n,{drawGrowingRoots:()=>Fn,drawGrowthIndicator:()=>fr,drawOrganicRoots:()=>yr,drawOrganicVine:()=>vr,drawVines:()=>Nn});var Vn={};Y(Vn,{clearPermutationCache:()=>hr,clearTextureCache:()=>ur,createPermutation:()=>Hn,drawBarkTexture:()=>K,drawBarkTextureCached:()=>br,drawOrganicSurface:()=>gr,fbm:()=>j,getOrCreatePermutation:()=>U,getTextureCacheSize:()=>mr,precomputePermutations:()=>dr,simplex2D:()=>T,woodPalettes:()=>qn});var ha=.5*(Math.sqrt(3)-1),Ie=(3-Math.sqrt(3))/6,me=[[1,1],[-1,1],[1,-1],[-1,-1],[1,0],[-1,0],[0,1],[0,-1]];function Hn(e){let t=Array.from({length:256},(o,r)=>r),n=e;for(let o=255;o>0;o--){n=n*1103515245+12345&2147483647;let r=n%(o+1);[t[o],t[r]]=[t[r],t[o]]}return[...t,...t]}var un=new Map;function U(e){if(un.has(e))return un.get(e);let t=Hn(e);return un.set(e,t),t}function dr(e){for(let t of e)U(t)}function hr(){un.clear()}function T(e,t,n){let o=(e+t)*ha,r=Math.floor(e+o),a=Math.floor(t+o),i=(r+a)*Ie,s=r-i,d=a-i,l=e-s,u=t-d,h=l>u?1:0,m=l>u?0:1,b=l-h+Ie,p=u-m+Ie,g=l-1+2*Ie,f=u-1+2*Ie,c=r&255,v=a&255,C=n[c+n[v]]%8,M=n[c+h+n[v+m]]%8,y=n[c+1+n[v+1]]%8,$=0,S=0,k=0,P=.5-l*l-u*u;P>=0&&(P*=P,$=P*P*(me[C][0]*l+me[C][1]*u));let w=.5-b*b-p*p;w>=0&&(w*=w,S=w*w*(me[M][0]*b+me[M][1]*p));let R=.5-g*g-f*f;return R>=0&&(R*=R,k=R*R*(me[y][0]*g+me[y][1]*f)),70*($+S+k)}function j(e,t,n,o=4){let r=0,a=.5,i=1,s=0;for(let d=0;d<o;d++)r+=a*T(e*i,t*i,n),s+=a,a*=.5,i*=2;return r/s}var qn={oak:{darkBrown:{r:35,g:22,b:12},baseBrown:{r:61,g:40,b:23},midBrown:{r:85,g:58,b:35},lightBrown:{r:110,g:78,b:50},grain:{r:45,g:28,b:15},moss:{r:55,g:75,b:40}},darkWood:{darkBrown:{r:20,g:12,b:8},baseBrown:{r:38,g:25,b:15},midBrown:{r:55,g:38,b:25},lightBrown:{r:75,g:52,b:35},grain:{r:28,g:18,b:10},moss:{r:45,g:65,b:35}},weathered:{darkBrown:{r:40,g:35,b:28},baseBrown:{r:65,g:55,b:42},midBrown:{r:88,g:75,b:58},lightBrown:{r:115,g:100,b:80},grain:{r:50,g:42,b:32},moss:{r:60,g:80,b:45}}},se=new Map,ua=.1,ma=10;function ur(){se.clear()}function mr(){return se.size}function K(e,t){let{width:n,height:o,grainFlow:r="vertical",age:a=.5,growthLevel:i=0,knotDensity:s=.3,mossPatches:d=!1,roughness:l=.5,color:u,woodType:h="oak",seed:m=0,time:b=0}=t,p=1920,g=1080,f=p*g,c=Math.min(n,p),v=Math.min(o,g),C=c*v;if((n>p||o>g)&&console.warn(`drawBarkTexture: Dimensions ${n}x${o} exceed safe limit. Using ${c}x${v}.`),C>f){let P=Math.sqrt(f/C);return K(e,{...t,width:Math.floor(c*P),height:Math.floor(v*P)})}let M=Hn(m),y=u?ba(u):qn[h],$;try{$=e.createImageData(c,v)}catch(P){if(P instanceof RangeError||P instanceof DOMException){let w=Math.floor(c*.5),R=Math.floor(v*.5);return console.error(`drawBarkTexture: Allocation failed. Falling back to ${w}x${R}.`),K(e,{...t,width:w,height:R})}throw P}let S=$.data,k=b*5e-5;for(let P=0;P<v;P++)for(let w=0;w<c;w++){let R=(P*c+w)*4,O=j(w*.008+k,P*.008,M,4),W=j(w*.016+100,P*.016+100,M,3),E=(O+1)/2,I=(W+1)/2,L,B,A;if(E<.3){let G=E/.3;L=y.darkBrown.r+(y.baseBrown.r-y.darkBrown.r)*G,B=y.darkBrown.g+(y.baseBrown.g-y.darkBrown.g)*G,A=y.darkBrown.b+(y.baseBrown.b-y.darkBrown.b)*G}else if(E<.6){let G=(E-.3)/.3;L=y.baseBrown.r+(y.midBrown.r-y.baseBrown.r)*G,B=y.baseBrown.g+(y.midBrown.g-y.baseBrown.g)*G,A=y.baseBrown.b+(y.midBrown.b-y.baseBrown.b)*G}else{let G=(E-.6)/.4;L=y.midBrown.r+(y.lightBrown.r-y.midBrown.r)*G*.4,B=y.midBrown.g+(y.lightBrown.g-y.midBrown.g)*G*.4,A=y.midBrown.b+(y.lightBrown.b-y.midBrown.b)*G*.4}L+=(I-.5)*8,B+=(I-.5)*6,A+=(I-.5)*5;let X;if(r==="vertical")X=j(w*.08,P*.008+m*.1,M,3);else if(r==="horizontal")X=j(w*.008+m*.1,P*.08,M,3);else if(r==="radial"){let G=c/2,H=v/2,Q=w-G,J=P-H,de=Math.atan2(J,Q),he=Math.sqrt(Q*Q+J*J);X=j(de*2+he*.01,he*.02,M,3)}else{let G=j(w*.01,P*.01,M,2)*30,H=j(w*.01+50,P*.01+50,M,2)*30;X=j((w+G)*.03,(P+H)*.03,M,3)}if(X>.3&&X<.5){let G=1-Math.abs(X-.4)*10;L=L*(1-G*.3)+y.grain.r*G*.3,B=B*(1-G*.3)+y.grain.g*G*.3,A=A*(1-G*.3)+y.grain.b*G*.3}S[R]=Math.max(0,Math.min(255,L)),S[R+1]=Math.max(0,Math.min(255,B)),S[R+2]=Math.max(0,Math.min(255,A)),S[R+3]=255}if(s>0){let P=Math.floor(s*5*(c*v)/16e4),w=[];for(let R=0;R<P;R++){let O=T(R*100+m,0,M)*.5+.5,W=T(R*100+m,100,M)*.5+.5;w.push({x:O*c,y:W*v,radius:15+T(R*50,m,M)*20})}for(let R=0;R<v;R++)for(let O=0;O<c;O++){let W=(R*c+O)*4;for(let E of w){let I=O-E.x,L=R-E.y,B=Math.sqrt(I*I+L*L);if(B<E.radius*1.5){let A=B/E.radius;if(A<1){let X=Math.sin(B*.5)*.5+.5,G=(1-A)*.4*(1+X*.3);S[W]=Math.max(0,S[W]-G*40),S[W+1]=Math.max(0,S[W+1]-G*35),S[W+2]=Math.max(0,S[W+2]-G*30)}}}}}if(i>.1){let P=Math.min(1,(i-.1)*2)*a,w=Math.floor(P*8);for(let R=0;R<w;R++){let O=T(R*200+m,0,M)*.5+.5,W=T(R*200+m,200,M)*.5+.5,E=50+T(R*100,m,M)*100,I=T(R*150,m+50,M)*Math.PI;for(let L=0;L<v;L++)for(let B=0;B<c;B++){let A=(L*c+B)*4,X=O*c,G=W*v,H=B-X,Q=L-G,J=H*Math.cos(I)+Q*Math.sin(I),de=Math.abs(-H*Math.sin(I)+Q*Math.cos(I));if(J>0&&J<E&&de<3){let he=1-de/3,Pn=1-J/E,re=he*Pn*P*.5;S[A]=Math.max(0,S[A]-re*50),S[A+1]=Math.max(0,S[A+1]-re*45),S[A+2]=Math.max(0,S[A+2]-re*40)}}}}if(i>.3){let P=Math.min(1,(i-.3)*2.5)*l;for(let w=0;w<v;w++)for(let R=0;R<c;R++){let O=(w*c+R)*4,E=j(R*.1,w*.1,M,5)*P*12;S[O]=Math.max(0,Math.min(255,S[O]+E)),S[O+1]=Math.max(0,Math.min(255,S[O+1]+E*.8)),S[O+2]=Math.max(0,Math.min(255,S[O+2]+E*.6))}}if(d&&i>.5){let P=(i-.5)*2;for(let w=0;w<v;w++)for(let R=0;R<c;R++){let O=(w*c+R)*4,W=j(R*.015+m*.5,w*.015,M,3);if(W>.3){let E=(W-.3)*1.4*P,I=Math.min(.6,E);S[O]=S[O]*(1-I)+y.moss.r*I,S[O+1]=S[O+1]*(1-I)+y.moss.g*I,S[O+2]=S[O+2]*(1-I)+y.moss.b*I}}}if(c===n&&v===o)e.putImageData($,0,0);else{let P=document.createElement("canvas");P.width=c,P.height=v,P.getContext("2d").putImageData($,0,0),e.drawImage(P,0,0,n,o)}}function br(e,t){let{cacheKey:n,cacheTolerance:o=ua,growthLevel:r=0,...a}=t;if(!n){K(e,t);return}let i=se.get(n);if(i&&Math.abs(i.growthLevel-r)<o){e.drawImage(i.canvas,0,0);return}let s=typeof OffscreenCanvas<"u"?new OffscreenCanvas(t.width,t.height):document.createElement("canvas");s instanceof OffscreenCanvas,s.width=t.width,s.height=t.height;let d=s.getContext("2d");if(K(d,t),e.drawImage(s,0,0),se.size>=ma){let l=se.keys().next().value;se.delete(l)}se.set(n,{canvas:s,growthLevel:r,timestamp:Date.now()})}function gr(e,t){let{type:n="organic",...o}=t;n==="bark"?K(e,{...o,grainFlow:"vertical",roughness:.7}):n==="wood"?K(e,{...o,grainFlow:"vertical",roughness:.4}):K(e,{...o,grainFlow:"chaotic",roughness:(o.roughness||.5)*.6})}function ba(e){let t=ga(e);return{darkBrown:{r:t.r*.5,g:t.g*.5,b:t.b*.5},baseBrown:t,midBrown:{r:t.r*1.3,g:t.g*1.3,b:t.b*1.3},lightBrown:{r:t.r*1.6,g:t.g*1.6,b:t.b*1.6},grain:{r:t.r*.7,g:t.g*.7,b:t.b*.7},moss:{r:55,g:75,b:40}}}function ga(e){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:61,g:40,b:23}}function Fn(e,t){let{origin:n,direction:o="down",length:r,branches:a=2,thickness:i=3,color:s="#3d2817",time:d=0,seed:l=0}=t;e.save(),e.strokeStyle=s,e.lineCap="round",e.lineJoin="round";let u={down:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},up:{x:0,y:-1}}[o],h=r*150,m=30+l%20,b=n.x+u.x*h,p=n.y+u.y*h,g=n.x+u.x*(h*.3)+(l%15-7),f=n.y+u.y*(h*.3)+(l%15-7),c=n.x+u.x*(h*.7)+(l%10-5),v=n.y+u.y*(h*.7)+(l%10-5);e.beginPath(),e.moveTo(n.x,n.y),e.bezierCurveTo(g,f,c,v,b,p);let C=e.createLinearGradient(n.x,n.y,b,p);C.addColorStop(0,s);let M=hn(s,0);C.addColorStop(1,M),e.strokeStyle=C,e.lineWidth=i*(1-r*.3),e.stroke();for(let y=0;y<a;y++){let $=(y+1)/(a+1),S=pr(n.x,g,c,b,$),k=pr(n.y,f,v,p,$),P=-u.y,w=u.x,O=((l+y*100)%60-30)*Math.PI/180,W=P*Math.cos(O)-w*Math.sin(O),E=P*Math.sin(O)+w*Math.cos(O),I=r*40*(.5+l%50/100),L=S+W*I,B=k+E*I;e.beginPath(),e.moveTo(S,k),e.lineTo(L,B),e.lineWidth=i*.5*(1-$),e.strokeStyle=s,e.stroke()}e.restore()}function Nn(e,t){let{origin:n,length:o,thickness:r=2,color:a="#2d5a3d",path:i}=t;if(e.save(),e.strokeStyle=a,e.lineCap="round",e.lineJoin="round",e.lineWidth=r,i&&i.length>1){let s=i.filter(d=>d!=null&&typeof d=="object"&&typeof d.x=="number"&&typeof d.y=="number"&&!isNaN(d.x)&&!isNaN(d.y));if(s.length<2)console.warn(`drawVines: Path array has insufficient valid points (${s.length} valid out of ${i.length} total). Falling back to generated path.`);else{e.beginPath(),e.moveTo(s[0].x,s[0].y);for(let d=1;d<s.length;d++){let l=s[d-1],u=s[d];if(d<s.length-1){let h=s[d+1],m=l.x+(u.x-l.x)*.5,b=l.y+(u.y-l.y)*.5,p=u.x+(h.x-u.x)*.3,g=u.y+(h.y-u.y)*.3;e.bezierCurveTo(m,b,p,g,u.x,u.y)}else e.lineTo(u.x,u.y)}e.stroke(),e.restore();return}}{let s=Math.floor(o*20);e.beginPath(),e.moveTo(n.x,n.y);let d=n.x,l=n.y;for(let u=1;u<=s;u++){let h=u/s,m=Math.sin(h*Math.PI*3)*.3,b=Math.cos(m)*10,p=Math.sin(m)*10+5;d+=b,l+=p,e.lineTo(d,l)}e.stroke()}e.restore()}function fr(e,t){let{x:n,y:o,width:r,height:a,growthLevel:i,style:s="vines",color:d="#5a7a4d"}=t;e.save();let l=Math.max(0,Math.min(1,i)),u=a*l;switch(s){case"vines":let h=Math.floor(r/15);for(let p=0;p<h;p++){let g=n+p*r/h+5;Nn(e,{origin:{x:g,y:o+a},length:l,thickness:2,color:d,direction:"up"})}break;case"roots":let m=Math.floor(r/20);for(let p=0;p<m;p++){let g=n+p*r/m+10;Fn(e,{origin:{x:g,y:o},length:l,thickness:2,color:d,direction:"down",branches:1,seed:p*100})}break;case"leaves":let b=Math.floor(l*10);for(let p=0;p<b;p++){let g=n+Math.random()*r,f=o+a-Math.random()*u;e.fillStyle=d,e.beginPath(),e.arc(g,f,4,0,Math.PI*2),e.fill()}break;case"bark":e.fillStyle=d,e.fillRect(n,o+a-u,r,u);break}e.restore()}function pr(e,t,n,o,r){let a=1-r;return a*a*a*e+3*a*a*r*t+3*a*r*r*n+r*r*r*o}function vr(e,t){let{origin:n,target:o,length:r,branchingDepth:a=2,organicVariation:i=.5,hasLeaves:s=!1,hasTendrils:d=!1,growthLevel:l=1,thickness:u=4,color:h="#2d5a3d",leafColor:m,time:b=0,seed:p=0}=t,g=Cr(h),f=U(p),c=m||fa(g,.15);e.save(),e.lineCap="round",e.lineJoin="round",e.strokeStyle=g,e.fillStyle=c;let v;o?v=Math.atan2(o.y-n.y,o.x-n.x):v=T(p,0,f)*Math.PI*2;let C=[],M=[];cr(e,n.x,n.y,v,u,r*l,0,a,i,f,p,b,g,o,C,M,s,d);for(let y of C)y.thickness>=1.5&&cr(e,y.x,y.y,y.angle,y.thickness,r*l*(1-y.progress)*.6,1,a,i,f,p+y.progress*1e3,b,g,void 0,[],M,s,d);if(s&&M.length>0)for(let y of M)ca(e,y.x,y.y,y.angle,y.size,c);e.restore()}function cr(e,t,n,o,r,a,i,s,d,l,u,h,m,b,p,g,f,c){if(a<5||r<.5)return;let v=Math.max(4,Math.floor(a/15)),C=a/v,M=t,y=n,$=o,S=r,k=Math.sin(h*.0015+u)*.03*d;for(let P=0;P<v;P++){let w=P/v,R=u+P*100+i*1e4,O=T(R,i*50,l)*.4*d,W=b?Math.atan2(b.y-y,b.x-M)*.1:0;$+=O+W+k;let I=.94+(T(R+500,u,l)>.6?.08:0);S*=I,S=Math.max(.5,S);let L=M+Math.cos($)*C,B=y+Math.sin($)*C,A=C*.3*(1+T(R+200,0,l)*d*.5),X=C*.3*(1+T(R+300,0,l)*d*.5),G=$+T(R+400,0,l)*.2*d,H=$-T(R+450,0,l)*.2*d,Q=M+Math.cos(G)*A,J=y+Math.sin(G)*A,de=L-Math.cos(H)*X,he=B-Math.sin(H)*X;e.beginPath(),e.moveTo(M,y),e.bezierCurveTo(Q,J,de,he,L,B);let Pn=1-w*.2;if(e.strokeStyle=Oe(m,Pn),e.lineWidth=S,e.stroke(),i<s&&P>1&&P<v-1&&T(R+600,i,l)>.6-i*.1){let re=T(R+700,0,l)>0?1:-1,Rn=$+re*(.4+T(R+800,0,l)*.4);p.push({x:M,y,angle:Rn,thickness:S*.55,progress:w})}if(f&&P>0&&P%3===0&&S>1){let re=T(R+900,0,l)>0?1:-1,Rn=$+re*Math.PI*.4,Vr=6+T(R+950,0,l)*4;g.push({x:M,y,angle:Rn,size:Vr*(1-w*.3)})}M=L,y=B}c&&S<r*.5&&pa(e,M,y,$,S,l,u,m)}function pa(e,t,n,o,r,a,i,s){let d=2+T(i,100,a)*1.5,l=d*Math.PI*2,u=15+T(i+200,0,a)*10,h=T(i+300,0,a)>0?1:-1;e.beginPath(),e.moveTo(t,n);let m=t,b=n,p=u/(d*Math.PI*2),g=30;for(let f=1;f<=g;f++){let c=f/g,v=o+h*c*l,C=p*(1-c*.7);m=t+Math.cos(v)*C*c*u*.5,b=n+Math.sin(v)*C*c*u*.5,e.lineTo(m,b)}e.strokeStyle=Oe(s,.85),e.lineWidth=Math.max(.5,r*.4),e.stroke()}function ca(e,t,n,o,r,a){e.save(),e.translate(t,n),e.rotate(o),e.beginPath(),e.moveTo(0,0),e.quadraticCurveTo(r*.5,-r*.4,r,0),e.quadraticCurveTo(r*.5,r*.4,0,0),e.fillStyle=a,e.fill(),e.beginPath(),e.moveTo(0,0),e.lineTo(r*.8,0),e.strokeStyle=Oe(a,.7),e.lineWidth=.5,e.stroke(),e.restore()}function yr(e,t){let{origin:n,mainRootCount:o=4,maxDepth:r=3,length:a,growthLevel:i=1,thickness:s=5,color:d="#3d2817",surfaceY:l,time:u=0,seed:h=0}=t,m=U(h);e.save(),e.lineCap="round",e.lineJoin="round";let b=Math.max(2,Math.min(6,o));for(let p=0;p<b;p++){let g=h+p*1e4,f=Math.PI*.5,c=Math.PI*.6,v=(p/(b-1)-.5)*c,C=T(g,0,m)*.2,M=f+v+C,y=a*(.7+T(g+100,0,m)*.5)*i,$=s*(.8+T(g+200,0,m)*.4);Mr(e,n.x,n.y,M,$,y,0,r,m,g,u,d,l)}e.restore()}function Mr(e,t,n,o,r,a,i,s,d,l,u,h,m){if(a<8||r<1||i>s)return;let b=Math.max(3,Math.floor(a/20)),p=a/b,g=t,f=n,c=o,v=r,C=.6;for(let M=0;M<b;M++){let y=M/b,$=l+M*100+i*5e3,S=T($,i*30,d)*.6*C,k=(i===0?.02:.01)*(c<Math.PI?1:-1);c+=S+k;let P=T($+500,l,d)>.65?1.12:.92;v*=P,v=Math.max(1,Math.min(r*1.2,v));let w=g+Math.cos(c)*p,R=f+Math.sin(c)*p,O=p*.35,W=c+T($+200,0,d)*.3,E=c-T($+250,0,d)*.3,I=g+Math.cos(W)*O,L=f+Math.sin(W)*O,B=w-Math.cos(E)*O,A=R-Math.sin(E)*O;if(e.beginPath(),e.moveTo(g,f),e.bezierCurveTo(I,L,B,A,w,R),e.strokeStyle=Oe(h,.85-i*.05),e.lineWidth=v,e.stroke(),i<s&&M>0&&T($+600,i,d)>.5-i*.1){let X=T($+700,0,d)>0?1:-1,G=c+X*(.5+T($+800,0,d)*.5);Mr(e,g,f,G,v*.5,a*(1-y)*.5,i+1,s,d,$+1e3,u,h,m)}m!==void 0&&f<m&&n>=m&&(e.fillStyle=Oe(h,.6),e.beginPath(),e.ellipse(g,m,v*1.5,v*.8,0,0,Math.PI*2),e.fill()),g=w,f=R}}function Oe(e,t){let n=Sr(e);return wr(Math.round(n.r*t),Math.round(n.g*t),Math.round(n.b*t))}function fa(e,t){let n=Sr(e);return wr(Math.round(n.r+(255-n.r)*t),Math.round(n.g+(255-n.g)*t),Math.round(n.b+(255-n.b)*t))}function Cr(e){return e?/^#([a-f\d]{3}){1,2}$/i.test(e)||e.startsWith("rgb")?e:(console.warn(`Invalid color format: ${e}, using default green`),"#2d5a3d"):"#2d5a3d"}function Sr(e){let t=Cr(e),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:{r:45,g:90,b:61}}function wr(e,t,n){return"#"+[e,t,n].map(o=>{let r=Math.max(0,Math.min(255,o)).toString(16);return r.length===1?"0"+r:r}).join("")}var Kn={};Y(Kn,{drawFlower:()=>$r,drawLeaf:()=>jn,drawLeaves:()=>Pr});function jn(e,t){let{x:n,y:o,size:r=20,rotation:a=0,type:i="simple",color:s="#3d6a4d",opacity:d=1,growthLevel:l=1,seed:u=0}=t;switch(e.save(),e.translate(n,o),e.rotate(a),e.globalAlpha=d,i){case"simple":Rr(e,r,s);break;case"veined":va(e,r,s);break;case"organic":ya(e,r,s);break;case"detailed":Ma(e,r,s,l,u);break}e.restore()}function Pr(e,t){t.forEach(n=>{let o=n.x+(n.driftX||0),r=n.y+(n.driftY||0);jn(e,{...n,x:o,y:r})})}function Rr(e,t,n){e.fillStyle=n,e.beginPath(),e.moveTo(0,-t*.5),e.bezierCurveTo(t*.3,-t*.2,t*.4,t*.3,0,t*.5),e.bezierCurveTo(-t*.4,t*.3,-t*.3,-t*.2,0,-t*.5),e.closePath(),e.fill()}function va(e,t,n){Rr(e,t,n),e.strokeStyle=n,e.lineWidth=1,e.globalAlpha=.4,e.beginPath(),e.moveTo(0,-t*.5),e.lineTo(0,t*.5),e.stroke();let o=3;for(let r=0;r<o;r++){let a=(r+1)/(o+1),i=-t*.5+t*a;e.beginPath(),e.moveTo(0,i),e.lineTo(-t*.3,i+t*.1),e.stroke(),e.beginPath(),e.moveTo(0,i),e.lineTo(t*.3,i+t*.1),e.stroke()}e.globalAlpha=1}function ya(e,t,n){e.fillStyle=n,e.beginPath();let o=8,r=Math.PI*2/o;e.moveTo(0,-t*.5);for(let a=0;a<=o;a++){let i=r*a-Math.PI/2,s=t*.5*(1+Math.sin(a*.7)*.2),d=Math.cos(i)*s,l=Math.sin(i)*s;if(a===0)e.moveTo(d,l);else{let u=r*(a-1)-Math.PI/2,h=t*.5*(1+Math.sin((a-1)*.7)*.2),m=Math.cos(u)*h,b=Math.sin(u)*h,p=(m+d)/2+Math.sin(a)*t*.1,g=(b+l)/2+Math.cos(a)*t*.1;e.quadraticCurveTo(p,g,d,l)}}e.closePath(),e.fill(),e.strokeStyle=n,e.lineWidth=.5,e.globalAlpha=.3,e.beginPath(),e.moveTo(0,-t*.5),e.lineTo(0,t*.5),e.stroke(),e.globalAlpha=1}function Ma(e,t,n,o,r){let a=U(r),i=mn(n);e.beginPath();let d=24/2,l=[],u=[];for(let h=0;h<=d;h++){let m=h/d,p=Math.sin(m*Math.PI)*.4*t,g=-t*.5+m*t,f=T(r+h*10,0,a)*t*.08,c=T(r+h*10,100,a)*t*.03;l.push({x:-p+f,y:g+c}),u.push({x:p-f,y:g+c})}e.moveTo(0,-t*.5);for(let h=0;h<u.length-1;h++){let m=u[h],b=u[h+1],p=(m.x+b.x)/2+T(r+h*20,200,a)*t*.05,g=(m.y+b.y)/2;e.quadraticCurveTo(m.x,m.y,p,g)}e.lineTo(0,t*.5);for(let h=l.length-1;h>0;h--){let m=l[h],b=l[h-1],p=(m.x+b.x)/2-T(r+h*20,300,a)*t*.05,g=(m.y+b.y)/2;e.quadraticCurveTo(m.x,m.y,p,g)}e.closePath(),e.fillStyle=n,e.fill(),o>.3&&Ca(e,t,i,a,r,o),o>.2&&Sa(e,t,n,a,r,o)}function Ca(e,t,n,o,r,a){let i=(a-.3)*1.4,s=Math.floor(i*8);e.save();for(let d=0;d<s;d++){let l=T(r+d*50,0,o)*t*.35,u=T(r+d*50,50,o)*t*.4,h=3+T(r+d*50,100,o)*4,m=T(r+d*50,150,o)*20,b=`rgba(${Math.max(0,n.r+m)}, ${Math.max(0,n.g+m)}, ${Math.max(0,n.b+m)}, 0.3)`;e.fillStyle=b,e.beginPath(),e.ellipse(l,u,h,h*.7,T(r+d,0,o),0,Math.PI*2),e.fill()}e.restore()}function Sa(e,t,n,o,r,a){let i=Tr(n,.7),s=Math.min(1,a*1.2);e.save(),e.strokeStyle=i,e.lineCap="round",e.lineWidth=1.5,e.globalAlpha=.5*s,e.beginPath(),e.moveTo(0,-t*.45),e.bezierCurveTo(T(r,0,o)*2,0,T(r+100,0,o)*2,t*.3,0,t*.45),e.stroke();let d=Math.floor(4+s*2);for(let l=0;l<d;l++){let u=(l+1)/(d+1),h=-t*.45+u*t*.9,m=Math.sin(u*Math.PI)*t*.35;for(let b of[-1,1]){let p=b*m*.85,g=h+t*.05;if(e.lineWidth=1,e.globalAlpha=.4*s,e.beginPath(),e.moveTo(0,h),e.quadraticCurveTo(b*m*.3+T(r+l*20,b*100,o)*3,h+t*.02,p,g),e.stroke(),a>.5){let f=2+Math.floor((a-.5)*4);for(let c=0;c<f;c++){let v=(c+1)/(f+1),C=b*m*.3*v,M=h+t*.02*v,y=C+b*m*.2,$=M+t*.03;e.lineWidth=.5,e.globalAlpha=.3*s,e.beginPath(),e.moveTo(C,M),e.lineTo(y,$),e.stroke()}}}}e.restore()}function $r(e,t){let{x:n,y:o,petalCount:r=5,petalLength:a=15,color:i="#e8a0b0",centerColor:s="#f5d76e",growthStage:d=1,rotation:l=0,seed:u=0}=t,h=U(u);e.save(),e.translate(n,o),e.rotate(l);let m=d*Math.PI*.4,b=Math.max(4,Math.min(8,r)),p=Math.PI*2/b;for(let g=0;g<b;g++){let f=p*g-Math.PI/2,c=u+g*100,v=1+T(c,0,h)*.15,C=1+T(c,50,h)*.1,M=T(c,100,h)*15,y=(1-d)*a*.3;e.save(),e.rotate(f);let $=mn(i),S=Jn(Math.min(255,Math.max(0,$.r+M)),Math.min(255,Math.max(0,$.g+M)),Math.min(255,Math.max(0,$.b+M)));wa(e,y,a*v*d,a*.35*C,m,S,h,c),e.restore()}if(d>.3){let g=a*.25*Math.min(1,(d-.3)*1.5);Pa(e,g,s,h,u)}e.restore()}function wa(e,t,n,o,r,a,i,s){e.save(),e.translate(0,-t),e.rotate(-r*.3),e.fillStyle=a,e.beginPath(),e.moveTo(0,0),e.bezierCurveTo(o*.8+T(s,0,i)*o*.2,-n*.3,o*.6+T(s,50,i)*o*.2,-n*.7,T(s,100,i)*o*.1,-n),e.bezierCurveTo(-o*.6-T(s,150,i)*o*.2,-n*.7,-o*.8-T(s,200,i)*o*.2,-n*.3,0,0),e.closePath(),e.fill(),e.strokeStyle=Tr(a,.85),e.lineWidth=.5,e.globalAlpha=.4,e.beginPath(),e.moveTo(0,0),e.quadraticCurveTo(T(s+300,0,i)*o*.2,-n*.5,0,-n*.85),e.stroke(),e.restore()}function Pa(e,t,n,o,r){let a=mn(n);e.fillStyle=n,e.beginPath(),e.arc(0,0,t,0,Math.PI*2),e.fill();let i=Math.floor(t*2);for(let s=0;s<i;s++){let d=s/i*Math.PI*2,l=T(r+s*10,0,o),u=t*(.3+l*.5),h=Math.cos(d)*u,m=Math.sin(d)*u,b=1+T(r+s*10,100,o)*1,p=T(r+s*10,200,o)*30;e.fillStyle=Jn(Math.max(0,Math.min(255,a.r-p)),Math.max(0,Math.min(255,a.g-p)),Math.max(0,Math.min(255,a.b-p))),e.beginPath(),e.arc(h,m,b,0,Math.PI*2),e.fill()}}function mn(e){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:61,g:106,b:77}}function Jn(e,t,n){return"#"+[e,t,n].map(o=>{let r=Math.max(0,Math.min(255,Math.round(o))).toString(16);return r.length===1?"0"+r:r}).join("")}function Tr(e,t){let n=mn(e);return Jn(Math.round(n.r*t),Math.round(n.g*t),Math.round(n.b*t))}var xn={};Y(xn,{GROWTH_TIMING:()=>Qn,applyDrift:()=>Ir,applyGrowthTiming:()=>Br,applySway:()=>kr,calculateDrift:()=>Zn,calculateGrowthProgress:()=>Or,calculatePulse:()=>Dr,calculateScalePulse:()=>Lr,calculateSway:()=>Un,calculateTipGrowthMultiplier:()=>Gr});function Un(e){let{intensity:t=.5,speed:n=1,time:o,baseRotation:r=0}=e,a=Math.sin(o*n*.5)*t*.05;return r+a}function Zn(e){let{intensity:t=.5,speed:n=1,time:o,baseX:r=0,baseY:a=0}=e,i=Math.sin(o*n*.3)*t*5,s=Math.cos(o*n*.2)*t*3;return{x:r+i,y:a+s}}function kr(e,t,n,o){let r=Un(o);e.save(),e.translate(t,n),e.rotate(r),e.translate(-t,-n)}function Ir(e,t){let{x:n,y:o}=Zn(t);e.translate(n,o)}function Or(e){let{baseGrowth:t,time:n,seed:o=0,style:r="linear"}=e,a=Math.max(0,Math.min(1,t));switch(r){case"linear":return a;case"pulse":{let s=1+(Math.sin(n*.0015+o)*.5+.5)*.3;return Math.min(1,a*s)}case"surge":{let i=a*a,s=Math.sin(n*.001+o*.1)*.05;return Math.max(0,Math.min(1,i+s))}case"glacial":{let d=(Math.sin(n*2e-4+o)*.5+.5-.5)*.04;return Math.max(0,Math.min(1,a+d))}default:return a}}function Gr(e,t,n=0){let o=e*.3,r=Math.sin(t*.002+n+e*10)*.1;return 1+o+r*e}function Dr(e){let{time:t,intensity:n=.15,speed:o=1,minOpacity:r=.8}=e,a=Math.sin(t*.002*o)*.5+.5,i=1-r;return r+Ra(a,i,n)}function Ra(e,t,n){return e*t*n+t*(1-n)}function Lr(e,t=.02,n=1){return 1+Math.sin(e*.001*n)*t}var Qn={glacial:{baseSpeed:2e-4,pulseSpeed:.001,tipMultiplier:1.2},slow:{baseSpeed:5e-4,pulseSpeed:.0015,tipMultiplier:1.3},normal:{baseSpeed:.001,pulseSpeed:.002,tipMultiplier:1.4},fast:{baseSpeed:.003,pulseSpeed:.004,tipMultiplier:1.5}};function Br(e,t,n="slow",o=0){let r=Qn[n],a=t*r.baseSpeed,i=Math.sin(t*r.pulseSpeed+o)*.1,s=e+i*e;return Math.max(0,Math.min(1,s))}ee("livingOs",{colors:Yn,growth:_n,plants:Kn,textures:Vn,motion:xn});var bn={};Y(bn,{gardenWindow:()=>Z,interpolateColor:()=>zr,overgrown:()=>_,softGarden:()=>te,terrarium:()=>F,withAlpha:()=>Ar});var te={background:{light:"#faf6f1",mid:"#efe8dc",dark:"#dfd4c8"},accents:{pollen:"#f5e5b8",warmth:"#ffd9a3",sunRay:"#fff8eb"},particles:{pollen:{bright:"rgba(245, 229, 184, 0.6)",mid:"rgba(235, 215, 160, 0.4)",dim:"rgba(220, 200, 140, 0.2)"}}},F={background:{surface:"#c8d5b9",mid:"#7a9b76",deep:"#4a6b47",shadow:"#2d4a2c"},foliage:{new:"#a8c69f",mature:"#6b8f67",shadow:"#4a6247",accent:"#8fb581"},particles:{leaves:{light:"rgba(168, 198, 159, 0.5)",mid:"rgba(107, 143, 103, 0.35)",dark:"rgba(74, 98, 71, 0.2)"}}},Z={glass:{tint:"rgba(245, 248, 250, 0.3)",edge:"rgba(220, 230, 235, 0.5)",smudge:"rgba(200, 210, 220, 0.15)"},garden:{muted:"#b8c9b5",soft:"#9db09a",distant:"#8a998763"},particles:{dust:{bright:"rgba(220, 230, 240, 0.25)",dim:"rgba(180, 200, 220, 0.12)",veryDim:"rgba(150, 170, 190, 0.05)"}}},_={background:{dense:"#3d5a3c",vibrant:"#5a7f58",light:"#7fa67d"},growth:{vine:"#4f6b4e",leaf:"#6d8f6b",wild:"#5f9a5c",shadow:"#3a5538"},particles:{fragments:{bright:"rgba(127, 166, 125, 0.6)",mid:"rgba(95, 154, 92, 0.4)",dim:"rgba(62, 85, 60, 0.2)"}}};function Ar(e,t){let n=e.replace("#",""),o=parseInt(n.substring(0,2),16),r=parseInt(n.substring(2,4),16),a=parseInt(n.substring(4,6),16);return`rgba(${o}, ${r}, ${a}, ${t})`}function zr(e,t,n){let o=e.replace("#",""),r=t.replace("#",""),a=parseInt(o.substring(0,2),16),i=parseInt(o.substring(2,4),16),s=parseInt(o.substring(4,6),16),d=parseInt(r.substring(0,2),16),l=parseInt(r.substring(2,4),16),u=parseInt(r.substring(4,6),16),h=Math.round(a+(d-a)*n),m=Math.round(i+(l-i)*n),b=Math.round(s+(u-s)*n);return`#${h.toString(16).padStart(2,"0")}${m.toString(16).padStart(2,"0")}${b.toString(16).padStart(2,"0")}`}var gn={};Y(gn,{applyDepthLayers:()=>$a,applyFrostedGlassEffect:()=>Ta,drawAtmosphericFog:()=>ka,drawSunRays:()=>at,gardenWindowBackground:()=>tt,overgrownBackground:()=>rt,softGardenBackground:()=>et,terrariumBackground:()=>nt});function et(e,t,n){let o=e.createLinearGradient(0,0,0,n);o.addColorStop(0,te.background.light),o.addColorStop(.5,te.background.mid),o.addColorStop(1,te.background.dark),e.fillStyle=o,e.fillRect(0,0,t,n)}function nt(e,t,n){let o=e.createLinearGradient(0,0,0,n);o.addColorStop(0,F.background.deep),o.addColorStop(1,F.background.shadow),e.fillStyle=o,e.fillRect(0,0,t,n);let r=e.createLinearGradient(0,n*.2,0,n);r.addColorStop(0,F.background.mid),r.addColorStop(1,F.background.deep),e.fillStyle=r,e.globalAlpha=.6,e.fillRect(0,n*.3,t,n*.7),e.globalAlpha=1;let a=e.createLinearGradient(0,0,0,n*.4);a.addColorStop(0,F.background.surface),a.addColorStop(1,F.background.mid),e.fillStyle=a,e.globalAlpha=.5,e.fillRect(0,0,t,n*.4),e.globalAlpha=1}function tt(e,t,n){let o=e.createLinearGradient(0,0,0,n);o.addColorStop(0,Z.garden.soft),o.addColorStop(.5,Z.garden.muted),o.addColorStop(1,Z.garden.distant),e.fillStyle=o,e.fillRect(0,0,t,n),e.fillStyle=Z.glass.tint,e.fillRect(0,0,t,n)}function rt(e,t,n){let o=e.createLinearGradient(0,0,0,n);o.addColorStop(0,_.background.vibrant),o.addColorStop(.4,_.background.dense),o.addColorStop(.7,_.background.dense),o.addColorStop(1,_.growth.shadow),e.fillStyle=o,e.fillRect(0,0,t,n);let r=e.createRadialGradient(t/2,n/2,Math.min(t,n)*.3,t/2,n/2,Math.max(t,n)*.8);r.addColorStop(0,"transparent"),r.addColorStop(.7,"rgba(0, 0, 0, 0.1)"),r.addColorStop(1,"rgba(0, 0, 0, 0.2)"),e.fillStyle=r,e.fillRect(0,0,t,n)}function $a(e,t,n,o,r=3){for(let a=0;a<r;a++){let i=1/r*(a+1)*.2,s=o/r*a,d=o/r;e.fillStyle=t.includes("rgba")?t.replace(/[\d.]+\)$/,`${i})`):`rgba(0, 0, 0, ${i})`,e.fillRect(0,s,n,d)}}function at(e,t,n,o=4){e.save();for(let r=0;r<o;r++){let a=Math.PI/o*(r+.5)-Math.PI/4,i=t*.5,s=n*-.2,d=i+Math.cos(a)*t,l=s+Math.sin(a)*n*1.5,u=e.createLinearGradient(i,s,d,l);u.addColorStop(0,"rgba(255, 248, 235, 0.3)"),u.addColorStop(.5,"rgba(255, 240, 220, 0.1)"),u.addColorStop(1,"transparent"),e.fillStyle=u,e.beginPath(),e.moveTo(i,s),e.lineTo(i+Math.cos(a)*t*1.5,s+Math.sin(a)*n*2),e.lineTo(i-Math.sin(a)*(t*.15),s+Math.cos(a)*(n*.15)),e.closePath(),e.fill()}e.restore()}function Ta(e,t,n,o=.1){let r=document.createElement("canvas");r.width=100,r.height=100;let a=r.getContext("2d");if(!a)return;for(let s=0;s<100;s+=5)for(let d=0;d<100;d+=5){let l=Math.random()*o;a.fillStyle=`rgba(255, 255, 255, ${l})`,a.fillRect(s,d,5,5)}let i=e.createPattern(r,"repeat");i&&(e.fillStyle=i,e.fillRect(0,0,t,n))}function ka(e,t,n,o=.3){let r=e.createLinearGradient(0,0,0,n);r.addColorStop(0,`rgba(255, 255, 255, ${o*.5})`),r.addColorStop(.5,`rgba(255, 255, 255, ${o})`),r.addColorStop(1,`rgba(255, 255, 255, ${o*.3})`),e.fillStyle=r,e.fillRect(0,0,t,n)}var cn={};Y(cn,{createDustMotes:()=>dt,createFloatingLeaves:()=>st,createOvergrownParticles:()=>ut,createPollen:()=>pn,updateDustMotes:()=>ht,updateFloatingLeaves:()=>lt,updateOvergrownParticles:()=>mt,updatePollen:()=>it});var ot={glacial:8e-4,verySlow:.001,slow:.002};function pn(e=35){let t=[];for(let n=0;n<e;n++)t.push({x:Math.random()*100,y:Math.random()*100,size:.8+Math.random()*2.2,speed:.001+Math.random()*.004,alpha:.15+Math.random()*.25,driftPhase:Math.random()*Math.PI*2});return t}function it(e,t,n,o,r){e.forEach(a=>{a.y+=a.speed*r,a.y>110&&(a.y=-10),a.y<-5&&(a.y=105);let i=Math.sin(r*ot.glacial+a.driftPhase)*.3,s=(a.x+i)*(n/100),d=a.y*(o/100);t.save(),t.fillStyle=`rgba(245, 229, 184, ${a.alpha})`,t.beginPath(),t.arc(s,d,a.size,0,Math.PI*2),t.fill(),t.strokeStyle=`rgba(255, 240, 220, ${a.alpha*.5})`,t.lineWidth=.5,t.stroke(),t.restore()})}function st(e=18){let t=["oval","pointed","round"],n=[];for(let o=0;o<e;o++)n.push({x:Math.random()*100,y:Math.random()*100,size:3+Math.random()*5,speed:8e-4+Math.random()*.0022,alpha:.2+Math.random()*.3,rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*ot.verySlow,shape:t[Math.floor(Math.random()*t.length)]});return n}function lt(e,t,n,o,r){e.forEach(a=>{a.y+=a.speed*r*.5,a.x+=Math.sin(r*ot.glacial+a.y*.01)*a.speed*.3,a.rotation+=a.rotationSpeed*r,a.y>110&&(a.y=-10),a.x<-10&&(a.x=110),a.x>110&&(a.x=-10);let i=a.x*(n/100),s=a.y*(o/100);switch(t.save(),t.translate(i,s),t.rotate(a.rotation),t.fillStyle=`rgba(107, 143, 103, ${a.alpha})`,a.shape){case"oval":t.ellipse(0,0,a.size*1.5,a.size,0,0,Math.PI*2);break;case"pointed":t.beginPath(),t.moveTo(0,-a.size),t.quadraticCurveTo(a.size*.7,0,0,a.size),t.quadraticCurveTo(-a.size*.7,0,0,-a.size);break;case"round":t.arc(0,0,a.size,0,Math.PI*2);break}t.fill(),t.restore()})}function dt(e=55){let t=[];for(let n=0;n<e;n++)t.push({x:Math.random()*100,y:Math.random()*100,z:Math.random(),size:.5+Math.random()*1,speed:5e-4+Math.random()*.0015,alpha:.08+Math.random()*.17,phase:Math.random()*Math.PI*2});return t}function ht(e,t,n,o,r){e.forEach(a=>{a.x+=Math.sin(r*a.speed+a.phase)*a.speed*.5,a.y+=Math.cos(r*a.speed+a.phase*1.3)*a.speed*.5,a.x=(a.x+100)%100,a.y=(a.y+100)%100;let i=a.x*(n/100),s=a.y*(o/100);t.save();let d=a.alpha*(.5+a.z*.5);t.fillStyle=`rgba(220, 230, 240, ${d})`,t.beginPath(),t.arc(i,s,a.size,0,Math.PI*2),t.fill(),t.restore()})}function ut(e=75){let t=[];for(let n=0;n<e;n++){let o=Math.random()>.6;t.push({x:Math.random()*100,y:Math.random()*100,size:o?1.5+Math.random()*3:.8+Math.random()*2,speed:8e-4+Math.random()*.003,alpha:.2+Math.random()*.35,rotation:Math.random()*Math.PI*2,type:o?"fragment":"pollen"})}return t}function mt(e,t,n,o,r){e.forEach(a=>{a.y+=a.speed*r*1.2,a.x+=Math.sin(r*a.speed+a.y)*a.speed*.8,a.type==="fragment"&&(a.rotation+=a.speed*r*.3),a.y>110&&(a.y=-10),a.x<-10&&(a.x=110),a.x>110&&(a.x=-10);let i=a.x*(n/100),s=a.y*(o/100);t.save(),t.translate(i,s),a.type==="fragment"?(t.rotate(a.rotation),t.fillStyle=`rgba(95, 154, 92, ${a.alpha})`,t.fillRect(-a.size*.3,-a.size*.6,a.size*.6,a.size)):(t.fillStyle=`rgba(127, 166, 125, ${a.alpha})`,t.beginPath(),t.arc(0,0,a.size,0,Math.PI*2),t.fill()),t.restore()})}var Sn={};Y(Sn,{drawBlurredPlant:()=>Mn,drawFlower:()=>Wr,drawFlowerCluster:()=>Ia,drawLeafCluster:()=>vn,drawOrganicVine:()=>le,drawPetal:()=>yn,drawPlantSilhouette:()=>Cn,drawPointedLeaf:()=>fn,drawSimpleLeaf:()=>be,drawVineSegment:()=>Er});function be(e,t,n,o,r,a=0){e.save(),e.translate(t,n),e.rotate(a),e.fillStyle=r,e.beginPath(),e.moveTo(0,-o),e.quadraticCurveTo(o*.6,-o*.3,o*.5,0),e.quadraticCurveTo(o*.6,o*.3,0,o),e.quadraticCurveTo(-o*.6,o*.3,-o*.5,0),e.quadraticCurveTo(-o*.6,-o*.3,0,-o),e.closePath(),e.fill(),e.strokeStyle="rgba(0, 0, 0, 0.15)",e.lineWidth=.5,e.beginPath(),e.moveTo(0,-o),e.quadraticCurveTo(o*.1,0,0,o),e.stroke(),e.restore()}function fn(e,t,n,o,r,a=0){e.save(),e.translate(t,n),e.rotate(a),e.fillStyle=r,e.beginPath(),e.moveTo(0,-o*1.2),e.quadraticCurveTo(o*.5,-o*.4,o*.6,o*.3),e.quadraticCurveTo(o*.3,o*.8,0,o),e.quadraticCurveTo(-o*.3,o*.8,-o*.6,o*.3),e.quadraticCurveTo(-o*.5,-o*.4,0,-o*1.2),e.closePath(),e.fill(),e.restore()}function vn(e,t,n,o=5,r=8,a="#6b8f67",i=1){e.save();for(let s=0;s<o;s++){let d=(Math.random()-.5)*r*i,l=(Math.random()-.5)*r*i,u=s/o*Math.PI*2,h=.6+Math.random()*.4;e.globalAlpha=h,s%2===0?be(e,t+d,n+l,r*.7,a,u):fn(e,t+d,n+l,r*.6,a,u)}e.globalAlpha=1,e.restore()}function yn(e,t,n,o,r,a,i=0){e.save(),e.translate(t,n),e.rotate(i),e.fillStyle=a,e.beginPath(),e.ellipse(0,0,o*.5,r,0,0,Math.PI*2),e.fill(),e.restore()}function Er(e,t,n,o,r,a,i,s=.1){e.save();let d=(t+o)/2+(Math.random()-.5)*s*20,l=(n+r)/2+(Math.random()-.5)*s*20;e.strokeStyle=i,e.lineWidth=a,e.lineCap="round",e.lineJoin="round",e.beginPath(),e.moveTo(t,n),e.quadraticCurveTo(d,l,o,r),e.stroke(),e.restore()}function le(e,t,n,o,r,a,i,s=0,d=3){if(s>d||a<.5)return;let l=t+Math.cos(r)*o,u=n+Math.sin(r)*o;if(Er(e,t,n,l,u,a,i,.08),s<d){let h=o*.7,m=a*.75,b=r-.4+(Math.random()-.5)*.2;le(e,l,u,h,b,m,i,s+1,d);let p=r+.4+(Math.random()-.5)*.2;le(e,l,u,h,p,m,i,s+1,d)}}function Wr(e,t,n,o=5,r=6,a="#a8c69f",i="#f5e5b8"){e.save();for(let s=0;s<o;s++){let d=s/o*Math.PI*2,l=t+Math.cos(d)*r*.8,u=n+Math.sin(d)*r*.8;yn(e,l,u,r*.6,r,a,d)}e.fillStyle=i,e.beginPath(),e.arc(t,n,r*.4,0,Math.PI*2),e.fill(),e.restore()}function Ia(e,t,n,o=3,r=30){for(let a=0;a<o;a++){let i=(Math.random()-.5)*r,s=(Math.random()-.5)*r,d=4+Math.floor(Math.random()*3);Wr(e,t+i,n+s,d,4+Math.random()*2)}}function Mn(e,t,n,o,r,a=4){e.save(),e.filter=`blur(${a}px)`,e.globalAlpha=.4,vn(e,t,n,8,o,r,1.5),e.filter="none",e.globalAlpha=1,e.restore()}function Cn(e,t,n,o,r,a=6){e.save(),e.fillStyle=r,e.fillRect(t-1,n,2,o);for(let i=0;i<a;i++){let s=n+o/a*i,d=4+(a-i)*.5;i%2===0?be(e,t-d*.8,s,d,r,-.3):be(e,t+d*.8,s,d,r,.3)}e.restore()}var wn={};Y(wn,{drawAnimatedShimmer:()=>Ba,drawDepthFog:()=>Oa,drawEdgeVignette:()=>La,drawFrostedGlassOverlay:()=>bt,drawGlassSmudges:()=>gt,drawLensDamage:()=>ft,drawLensReflection:()=>Ga,drawLightRays:()=>Da,drawOrganicNoise:()=>ct,drawVignette:()=>pt});function bt(e,t,n,o=.15){e.save(),e.fillStyle=`rgba(245, 248, 250, ${o*.3})`,e.fillRect(0,0,t,n);for(let r=0;r<t;r+=8)for(let a=0;a<n;a+=8){let i=Math.random()*o*.5;e.fillStyle=`rgba(255, 255, 255, ${i})`,e.fillRect(r,a,Math.random()*4+2,Math.random()*4+2)}e.restore()}function gt(e,t,n,o=8){e.save();for(let r=0;r<o;r++){let a=Math.random()*t,i=Math.random()*n,s=20+Math.random()*40,d=3+Math.random()*8,l=e.createLinearGradient(a,i,a,i+d*2);l.addColorStop(0,`rgba(220, 230, 235, ${Math.random()*.08})`),l.addColorStop(.5,`rgba(200, 210, 220, ${Math.random()*.1})`),l.addColorStop(1,"transparent"),e.fillStyle=l,e.fillRect(a,i,s,d)}e.restore()}function Oa(e,t,n,o="rgba(255, 255, 255, 0.3)",r=3){e.save();for(let a=0;a<r;a++){let i=n/r*a,s=n/r,d=1/r*(a+1)*.15,l=e.createLinearGradient(0,i,0,i+s);l.addColorStop(0,`rgba(255, 255, 255, ${d*.5})`),l.addColorStop(.5,`rgba(255, 255, 255, ${d})`),l.addColorStop(1,`rgba(255, 255, 255, ${d*.5})`),e.fillStyle=l,e.fillRect(0,i,t,s)}e.restore()}function pt(e,t,n,o=.3){e.save();let r=e.createRadialGradient(t/2,n/2,Math.min(t,n)*.2,t/2,n/2,Math.max(t,n)*.8);r.addColorStop(0,"transparent"),r.addColorStop(.6,`rgba(0, 0, 0, ${o*.3})`),r.addColorStop(1,`rgba(0, 0, 0, ${o})`),e.fillStyle=r,e.fillRect(0,0,t,n),e.restore()}function ct(e,t,n,o=.2,r=20){e.save();for(let a=0;a<t;a+=r)for(let i=0;i<n;i+=r){let s=Math.random()*o;e.fillStyle=`rgba(0, 0, 0, ${s})`,e.fillRect(a,i,r,r)}e.restore()}function Ga(e,t,n,o=40,r=.3){e.save();let a=e.createRadialGradient(t,n,0,t,n,o);a.addColorStop(0,`rgba(255, 255, 255, ${r})`),a.addColorStop(.5,`rgba(255, 255, 255, ${r*.3})`),a.addColorStop(1,"transparent"),e.fillStyle=a,e.beginPath(),e.arc(t,n,o,0,Math.PI*2),e.fill(),e.restore()}function ft(e,t,n,o=3){e.save(),e.strokeStyle="rgba(100, 100, 100, 0.3)",e.lineWidth=1,e.lineCap="round";for(let r=0;r<o;r++){let a=Math.random()*t,i=Math.random()*n,s=a+(Math.random()-.5)*200,d=i+(Math.random()-.5)*200;e.beginPath(),e.moveTo(a,i);for(let l=0;l<10;l++){let u=a+(s-a)*l/10+(Math.random()-.5)*10,h=i+(d-i)*l/10+(Math.random()-.5)*10;e.lineTo(u,h)}e.lineTo(s,d),e.stroke()}e.restore()}function Da(e,t,n,o=4,r=.2){e.save();for(let a=0;a<o;a++){let i=Math.PI/o*a-Math.PI/8,s=t/2,d=-n*.2,l=s+Math.cos(i)*t*1.5,u=d+Math.sin(i)*n*2,h=e.createLinearGradient(s,d,l,u);h.addColorStop(0,`rgba(255, 248, 235, ${r})`),h.addColorStop(.5,`rgba(255, 240, 220, ${r*.5})`),h.addColorStop(1,"transparent"),e.fillStyle=h,e.beginPath(),e.moveTo(s,d),e.lineTo(l,u),e.lineTo(s-Math.sin(i)*t*.3,d+Math.cos(i)*n*.3),e.closePath(),e.fill()}e.restore()}function La(e,t,n,o="rgba(0, 0, 0, 0.3)",r=40){e.save(),e.fillStyle=o,e.fillRect(0,0,t,r),e.fillRect(0,n-r,t,r),e.fillRect(0,0,r,n),e.fillRect(t-r,0,r,n),e.restore()}function Ba(e,t,n,o,r,a,i=.15){e.save();let s=Math.sin(a*.002)*i;e.fillStyle=`rgba(255, 255, 255, ${s})`,e.fillRect(t,n,o,r),e.restore()}var vt={};Y(vt,{drawGardenThroughGlass:()=>Hr,drawOvergrownCamera:()=>qr,drawSoftGardenWindow:()=>Xr,drawTerrariumView:()=>Yr});var ge={glacial:8e-4,verySlow:.001,slow:.002},Aa={pollenParticles:pn(35)};function Xr(e,t,n,o,r,a={}){let{time:i=0,intensity:s=1}=a;e.save(),e.translate(t,n),et(e,o,r),e.globalAlpha=.3*s,at(e,o,r,4),e.globalAlpha=1,it(Aa.pollenParticles,e,o,r,i),e.globalAlpha=.25*s;for(let d=0;d<6;d++){let l=(Math.sin(i*ge.glacial+d)*.5+.5)*o,u=(Math.cos(i*ge.glacial+d*.7)*.5+.5)*r;yn(e,l,u,3,5,te.accents.pollen,0)}e.globalAlpha=1,e.restore()}var za={leafParticles:st(18)};function Yr(e,t,n,o,r,a={}){let{time:i=0,growthLevel:s=0,intensity:d=1}=a;e.save(),e.translate(t,n),nt(e,o,r),e.globalAlpha=.35*d;for(let l=0;l<6;l++){let u=o/6*l+Math.sin(i*ge.verySlow+l)*20,h=r*.3+(Math.random()*30-15);Mn(e,u,h,12+Math.random()*8,F.foliage.shadow)}e.globalAlpha=1,e.globalAlpha=.6*d;for(let l=0;l<5;l++){let u=(Math.random()*.8+.1)*o,h=(Math.random()*.4+.2)*r;vn(e,u,h,6,8,F.foliage.mature,1.2)}e.globalAlpha=1,lt(za.leafParticles,e,o,r,i),e.globalAlpha=.8*d,Cn(e,o*.15,r*.4,r*.5,F.background.shadow,7),Cn(e,o*.85,r*.35,r*.55,F.background.shadow,8),e.globalAlpha=1,e.strokeStyle=`rgba(200, 220, 230, ${.1*d})`,e.lineWidth=2,e.strokeRect(10,10,o-20,r-20),e.restore()}var Ea={dustMotes:dt(55),pollenParticles:pn(15)};function Hr(e,t,n,o,r,a={}){let{time:i=0,intensity:s=1}=a;e.save(),e.translate(t,n),tt(e,o,r),e.globalAlpha=.25*s;for(let d=0;d<10;d++){let l=(Math.random()*.8+.1)*o,u=(Math.random()*.6+.1)*r;Mn(e,l,u,15+Math.random()*10,Z.garden.soft,8)}e.globalAlpha=1,ht(Ea.dustMotes,e,o,r,i),e.globalAlpha=.2*s,bt(e,o,r,.12),e.globalAlpha=1,e.globalAlpha=.15*s,gt(e,o,r,6),e.globalAlpha=1,e.globalAlpha=.3*s,pt(e,o,r,.25),e.globalAlpha=1,e.restore()}var Wa={particles:ut(75)};function qr(e,t,n,o,r,a={}){let{time:i=0,growthLevel:s=0,intensity:d=1}=a;e.save(),e.translate(t,n),rt(e,o,r),e.globalAlpha=.7*d;for(let l=0;l<3;l++){let u=r/3*l+Math.sin(i*ge.verySlow+l)*20;le(e,-10,u,60+l*20,.2+Math.random()*.3,2+l*.5,_.growth.vine,0,2)}for(let l=0;l<3;l++){let u=r/3*l+Math.cos(i*ge.verySlow+l*1.5)*20;le(e,o+10,u,60+l*20,Math.PI-(.2+Math.random()*.3),2+l*.5,_.growth.vine,0,2)}for(let l=0;l<2;l++){let u=o/2.5*l+Math.sin(i*ge.verySlow+l*2)*20;le(e,u,-10,50+l*15,Math.PI/2+(Math.random()-.5)*.4,1.5+l*.5,_.growth.vine,0,2)}e.globalAlpha=1,e.globalAlpha=.65*d;for(let l=0;l<40;l++){let u=Math.random()*o,h=Math.random()*r,m=3+Math.random()*6,b=Math.random()*Math.PI*2;Math.random()>.5?be(e,u,h,m,_.growth.leaf,b):fn(e,u,h,m,_.growth.wild,b)}e.globalAlpha=1,mt(Wa.particles,e,o,r,i),e.globalAlpha=.2*d,ct(e,o,r,.15,30),e.globalAlpha=1,s>50&&(e.globalAlpha=.15*d,ft(e,o,r,2),e.globalAlpha=1),e.restore()}ee("garden",{colors:bn,gradients:gn,particles:cn,plants:Sn,textures:wn,recipes:vt});return Jr(Xa);})();
