"use strict";var VisualToolkit=(()=>{var _=Object.defineProperty;var Se=Object.getOwnPropertyDescriptor;var ye=Object.getOwnPropertyNames;var Ce=Object.prototype.hasOwnProperty;var ve=(n,e)=>{for(var r in e)_(n,r,{get:e[r],enumerable:!0})},$e=(n,e,r,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of ye(e))!Ce.call(n,t)&&t!==r&&_(n,t,{get:()=>e[t],enumerable:!(a=Se(e,t))||a.enumerable});return n};var Pe=n=>$e(_({},"__esModule",{value:!0}),n);var Ee={};ve(Ee,{amplitude:()=>I,applyShadow:()=>zn,bioGlow:()=>un,bioluminescence:()=>L,bob:()=>mn,calculateDirectionalIllumination:()=>se,calculateIllumination:()=>X,clearShadow:()=>Ln,createBioParticles:()=>Qn,createDeepParticles:()=>jn,createEdgeTendrils:()=>fn,createEye:()=>an,createEyes:()=>be,createMarineSnow:()=>Hn,createSeeker:()=>cn,createSeekerSwarm:()=>pn,createTendril:()=>Q,cssBioGlow:()=>Dn,cssBreathingGlow:()=>Wn,cssCreatureBody:()=>Gn,cssDeepWater:()=>kn,cssDistantCreature:()=>In,cssEyeGlow:()=>An,cssFishGlow:()=>qn,cssGlow:()=>En,cssHudGlow:()=>Xn,cssJellyfishBell:()=>On,cssJellyfishGlow:()=>Yn,cssMarineSnowParticle:()=>Nn,cssMarineSnowStyles:()=>Kn,cssTimings:()=>Sn,darkness:()=>V,deepSea:()=>D,deepWaterBackground:()=>Cn,depthPresets:()=>tn,drawBarnacles:()=>we,drawBioParticles:()=>Zn,drawBiolumGlow:()=>en,drawCaustics:()=>ue,drawEye:()=>sn,drawEyes:()=>ge,drawGrille:()=>q,drawJellyfish:()=>oe,drawLens:()=>U,drawLight:()=>N,drawLightCone:()=>ae,drawMarineSnow:()=>Fn,drawOffsetShadow:()=>Bn,drawOrganicSurface:()=>ce,drawOrganicTexture:()=>de,drawPanelLines:()=>F,drawPlayerLight:()=>le,drawROV:()=>te,drawScarring:()=>Me,drawSeeker:()=>rn,drawSeekerSwarm:()=>Mn,drawSpecimen:()=>ie,drawTendril:()=>x,drawTendrils:()=>hn,drawTentacle:()=>re,drawTether:()=>j,drawTrackingEye:()=>ee,drawWithDepth:()=>Vn,drift:()=>bn,eyeGlow:()=>Tn,hexToRgb:()=>ln,htmlMarineSnow:()=>_n,lightBeam:()=>Pn,material3D:()=>J,materials:()=>k,organicRadii:()=>ne,organicRadius:()=>xn,playerLight:()=>$n,pulse:()=>Y,radialGlow:()=>vn,randomBioHue:()=>dn,staggerDelay:()=>yn,surfacePalettes:()=>z,tendrilPalettes:()=>Z,timing:()=>O,updateDeepParticles:()=>Un,updateEye:()=>on,updateEyes:()=>me,updateMarineSnow:()=>Jn,updateSeeker:()=>H,updateSeekerSwarm:()=>wn,updateSeekerWithDrift:()=>nn,updateTendril:()=>gn,vignette:()=>Rn,waver:()=>K});var D={background:{surface:"#020810",mid:"#051018",deep:"#020a12",abyss:"#010508",void:"#000000"},water:{ambient:"rgba(100, 150, 200, 0.03)",light:"rgba(180, 200, 220, 0.4)",particleDim:"rgba(180, 200, 230, 0.3)"},hud:{text:"rgba(77, 208, 225, 0.5)",recording:"rgba(255, 150, 100, 0.7)"}},L={cyan:{core:"rgba(100, 200, 255, 0.9)",mid:"rgba(80, 180, 255, 0.5)",outer:"rgba(60, 150, 255, 0.2)",halo:"rgba(77, 208, 225, 0.5)"},warm:{core:"rgba(255, 100, 80, 0.8)",mid:"rgba(255, 80, 60, 0.4)",outer:"rgba(200, 50, 50, 0.3)"},playerLight:{core:"rgba(255, 255, 255, 0.9)",inner:"rgba(200, 240, 255, 0.5)",mid:"rgba(180, 220, 255, 0.15)",ambient:"rgba(100, 180, 220, 0.1)"},hueRange:{min:180,max:220}},k={rovYellow:{highlight:"#e8a832",mid:"#d4942a",shadow:"#b87820",outline:"#8a5a15"},flotation:{fill:"#ff6b35",outline:"#cc4420"},metal:{light:"#666666",mid:"#444444",dark:"#333333",darkest:"#222222"},lens:{body:"#1a1a2e",glint:"rgba(100, 150, 200, 0.5)"},panel:{line:"rgba(100, 60, 20, 0.5)",shadow:"rgba(0, 0, 0, 0.4)"},creatureFlesh:n=>({r:15+n*25,g:12+n*18,b:20+n*25})},V={true:"#000000",soft:"#010508",tendril:"rgba(10, 10, 15, 0.9)",vignette:"rgba(0, 0, 0, 0.4)",shadow:"rgba(0, 0, 0, 0.4)"};function ln(n){let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:{r:0,g:0,b:0}}function dn(){let{min:n,max:e}=L.hueRange;return n+Math.random()*(e-n)}function un(n,e=70,r=60,a=.6){return`hsla(${n}, ${e}%, ${r}%, ${a})`}var O={glacial:8e-4,verySlow:.001,slow:.002,medium:.003,fast:.005,rapid:.01},I={micro:.02,small:.03,medium:.1,large:.3};function bn(n,e=O.verySlow,r=O.slow){return{x:Math.sin(n*e)*I.micro+Math.sin(n*r)*I.micro*.5,y:Math.cos(n*e*1.1)*I.micro+Math.cos(n*r*.9)*I.micro*.3,rotation:Math.sin(n*O.glacial)*I.small}}function mn(n,e=O.slow,r=.02){return Math.sin(n*e)*r}function Y(n,e=O.medium,r=.8,a=1.2){let t=(Math.sin(n*e)+1)/2;return r+t*(a-r)}function K(n,e,r=O.slow){return{x:Math.sin(n*r+e*.5)*.5,y:Math.cos(n*r+e*.3)*.5}}var Re=0;function Q(n,e,r=12,a){return{startX:n,startY:e,segments:Array.from({length:r},()=>({x:n,y:e})),targetX:n,targetY:e,speed:.02+Math.random()*.03,thickness:a??3+Math.random()*5,id:Re++}}function gn(n,e,r,a,t={}){let s=typeof t=="number"?{recoilFactor:t}:t,{maxReachRatio:o=.5,maxReachPixels:i=250,recoilFactor:l=1}=s,b=e-n.startX,u=r-n.startY,d=Math.sqrt(b*b+u*u);if(d===0)return;let m=d*Math.min(o,.6),g=Math.min(m,i)*l;n.targetX=n.startX+b/d*g,n.targetY=n.startY+u/d*g,n.segments[0].x+=(n.targetX-n.segments[0].x)*n.speed,n.segments[0].y+=(n.targetY-n.segments[0].y)*n.speed;for(let h=1;h<n.segments.length;h++){let f=n.segments[h-1],p=n.segments[h],w=f.x-p.x,c=f.y-p.y;p.x+=w*.15,p.y+=c*.15;let S=K(a,h);p.x+=S.x,p.y+=S.y}}var Z={flesh:{shadow:{r:15,g:8,b:12},base:{r:35,g:20,b:28},mid:{r:55,g:35,b:42},highlight:{r:85,g:55,b:60}},abyssal:{shadow:{r:10,g:15,b:22},base:{r:25,g:35,b:48},mid:{r:40,g:55,b:70},highlight:{r:60,g:80,b:100}},biolum:{shadow:{r:12,g:18,b:22},base:{r:20,g:40,b:45},mid:{r:35,g:65,b:70},highlight:{r:60,g:120,b:130}},dark:{shadow:{r:8,g:6,b:10},base:{r:18,g:14,b:20},mid:{r:28,g:22,b:30},highlight:{r:40,g:32,b:42}}};function x(n,e,r={}){let{palette:a="flesh",taperRatio:t=.15,waviness:s=0,time:o=0,illumination:i=0,drawBaseMass:l=!1,baseMassRadius:b,baseMassVisibility:u=.5}=r,d=typeof a=="string"?Z[a]:a;if(!d||e.segments.length<2)return;if(l){let w=b??e.thickness*8;Te(n,e.startX,e.startY,w,d,i,u)}let g=ke(e,o,s);if(g.length<2)return;let h=e.thickness,f=g.map((w,c)=>{let S=c/(g.length-1),M=1-Math.pow(S,.7)*(1-t),C=Math.sin(S*Math.PI)*.15;return h*M*(1+C)}),p=i*.4;if(E(n,g,f,d.shadow,2,1.3,.5),E(n,g,f,d.base,0,1,.9+p*.1),E(n,g,f,d.mid,-.5,.7,.5+p*.2),E(n,g,f,d.highlight,-1,.35,.3+p*.3),i>.3){let w={r:d.highlight.r+40,g:d.highlight.g+35,b:d.highlight.b+30};E(n,g,f,w,-1.5,.15,(i-.3)*.6)}}function Te(n,e,r,a,t,s,o){let i=[{radiusScale:1.5,alpha:.3*o},{radiusScale:1,alpha:.6*o},{radiusScale:.6,alpha:.8*o}];for(let l of i){let b=a*l.radiusScale,u=n.createRadialGradient(e,r,0,e,r,b),d=`rgba(${t.shadow.r}, ${t.shadow.g}, ${t.shadow.b}, ${l.alpha})`,m=`rgba(${t.shadow.r}, ${t.shadow.g}, ${t.shadow.b}, 0)`;u.addColorStop(0,d),u.addColorStop(.6,d),u.addColorStop(1,m),n.fillStyle=u,n.beginPath(),n.arc(e,r,b,0,Math.PI*2),n.fill()}if(o>.3)for(let b=0;b<5;b++){let u=b/5*Math.PI*2+Math.sin(e*.01+b)*.3,d=a*(.6+Math.sin(r*.01+b*2)*.2);n.strokeStyle=`rgba(${t.base.r+10}, ${t.base.g}, ${t.base.b}, ${.15*o})`,n.lineWidth=2+Math.sin(b)*1,n.lineCap="round",n.beginPath(),n.moveTo(e,r);let m=e+Math.cos(u)*d*.5+Math.sin(u+b)*5,g=r+Math.sin(u)*d*.5+Math.cos(u+b)*5,h=e+Math.cos(u)*d,f=r+Math.sin(u)*d;n.quadraticCurveTo(m,g,h,f),n.stroke()}if(s>.2){let l=n.createRadialGradient(e,r,0,e,r,a*.8);l.addColorStop(0,`rgba(${t.mid.r+20}, ${t.mid.g+15}, ${t.mid.b+10}, ${s*.15*o})`),l.addColorStop(1,"transparent"),n.fillStyle=l,n.beginPath(),n.arc(e,r,a*.8,0,Math.PI*2),n.fill()}}function ke(n,e,r){let a=n.segments,t=[];t.push({x:n.startX,y:n.startY});for(let s=0;s<a.length;s++){let o=s===0?{x:n.startX,y:n.startY}:a[s-1],i=a[s],l=a[Math.min(s+1,a.length-1)],b=a[Math.min(s+2,a.length-1)],u=0,d=0;if(r>0){let m=l.x-o.x,g=l.y-o.y,h=Math.sqrt(m*m+g*g)||1,f=-g/h,p=m/h,w=Math.sin(e*O.slow+s*.8+n.id*.5)*r;u=f*w,d=p*w}for(let m=0;m<=1;m+=.25){let g=m*m,h=g*m,f=-h+2*g-m,p=3*h-5*g+2,w=-3*h+4*g+m,c=h-g,S=.5*(o.x*f+i.x*p+l.x*w+b.x*c)+u*(1-m),M=.5*(o.y*f+i.y*p+l.y*w+b.y*c)+d*(1-m),C=t[t.length-1];(Math.abs(S-C.x)>.5||Math.abs(M-C.y)>.5)&&t.push({x:S,y:M})}}return t}function E(n,e,r,a,t,s,o){if(!(e.length<2||o<=0)){n.lineCap="round",n.lineJoin="round",n.strokeStyle=`rgba(${a.r}, ${a.g}, ${a.b}, ${o})`;for(let i=0;i<e.length-1;i++){let l=e[i],b=e[i+1],u=b.x-l.x,d=b.y-l.y,m=Math.sqrt(u*u+d*d)||1,g=-d/m*t,h=u/m*t,f=r[Math.min(i,r.length-1)]*s,p=r[Math.min(i+1,r.length-1)]*s,w=(f+p)/2;n.lineWidth=w,n.beginPath(),n.moveTo(l.x+g,l.y+h),n.lineTo(b.x+g,b.y+h),n.stroke()}}}function hn(n,e,r={}){let{lightX:a,lightY:t,lightRadius:s=200,...o}=r,i=[...e].sort((l,b)=>{if(a===void 0||t===void 0)return 0;let u=Math.sqrt((l.startX-a)**2+(l.startY-t)**2);return Math.sqrt((b.startX-a)**2+(b.startY-t)**2)-u});for(let l of i){let b=o.illumination??0;if(a!==void 0&&t!==void 0){let u=l.segments[0]?.x??l.startX,d=l.segments[0]?.y??l.startY,m=Math.sqrt((u-a)**2+(d-t)**2);b=m<s?Math.pow(1-m/s,2):0}x(n,l,{...o,illumination:b})}}function fn(n,e,r,a={}){let{edges:t=["left","right","bottom"],thickness:s=[4,8],segments:o=12,edgeOffset:i=30}=a,l=[];for(let b=0;b<n;b++){let u=t[b%t.length],d,m;switch(u){case"top":d=Math.random()*e,m=-i-Math.random()*20;break;case"bottom":d=Math.random()*e,m=r+i+Math.random()*20;break;case"left":d=-i-Math.random()*20,m=Math.random()*r;break;case"right":d=e+i+Math.random()*20,m=Math.random()*r;break}let g=s[0]+Math.random()*(s[1]-s[0]);l.push(Q(d,m,o,g))}return l}function cn(n,e){return{x:Math.random()*n,y:Math.random()*e,vx:0,vy:0,size:2+Math.random()*6,maxSpeed:1+Math.random()*3,awareness:150+Math.random()*250,timidity:.3+Math.random()*.7,glow:0,hue:180+Math.random()*40}}function H(n,e,r,a,t,s){let o=e-n.x,i=r-n.y,l=Math.sqrt(o*o+i*i);l<n.awareness?a>15*n.timidity?(n.vx-=o/l*.5,n.vy-=i/l*.5,n.glow=Math.max(0,n.glow-.1)):l>40?(n.vx+=o/l*.08,n.vy+=i/l*.08,n.glow=Math.min(1,n.glow+.02)):(n.vx+=i/l*.1,n.vy-=o/l*.1,n.glow=1):(n.vx+=(Math.random()-.5)*.1,n.vy+=(Math.random()-.5)*.1,n.glow=Math.max(0,n.glow-.01));let b=Math.sqrt(n.vx*n.vx+n.vy*n.vy);b>n.maxSpeed&&(n.vx=n.vx/b*n.maxSpeed,n.vy=n.vy/b*n.maxSpeed),n.vx*=.98,n.vy*=.98,n.x+=n.vx,n.y+=n.vy,n.x<-50&&(n.x=t+50),n.x>t+50&&(n.x=-50),n.y<-50&&(n.y=s+50),n.y>s+50&&(n.y=-50)}function pn(n,e,r,a={}){let{spawnBias:t="uniform",sizeRange:s=[2,8],speedRange:o=[1,4],hueRange:i=[180,220]}=a,l=[];for(let b=0;b<n;b++){let u,d;switch(t){case"center":{let m=Math.random()*Math.PI*2,g=Math.random()*Math.random()*Math.min(e,r)*.4;u=e/2+Math.cos(m)*g,d=r/2+Math.sin(m)*g;break}case"edges":{let m=Math.floor(Math.random()*4),g=Math.random();switch(m){case 0:u=g*e,d=Math.random()*50;break;case 1:u=e-Math.random()*50,d=g*r;break;case 2:u=g*e,d=r-Math.random()*50;break;default:u=Math.random()*50,d=g*r}break}default:u=Math.random()*e,d=Math.random()*r}l.push({x:u,y:d,vx:0,vy:0,size:s[0]+Math.random()*(s[1]-s[0]),maxSpeed:o[0]+Math.random()*(o[1]-o[0]),awareness:150+Math.random()*250,timidity:.3+Math.random()*.7,glow:0,hue:i[0]+Math.random()*(i[1]-i[0])})}return l}function nn(n,e,r,a,t,s,o=0){if(H(n,e,r,a,t,s),o>0){let i=e-n.x,l=r-n.y;if(Math.sqrt(i*i+l*l)>n.awareness){let u=t/2,d=s/2,m=u-n.x,g=d-n.y,h=Math.sqrt(m*m+g*g);h>0&&(n.vx+=m/h*o,n.vy+=g/h*o)}}}function wn(n,e,r,a,t,s,o=0){for(let i of n)o>0?nn(i,e,r,a,t,s,o):H(i,e,r,a,t,s)}function en(n,e,r,a,t,s,o){let i=o!==void 0?(Math.sin(o*.003)+1)/2:1,l=s*(.7+i*.3),b=a*(.9+i*.2),u=n.createRadialGradient(e,r,0,e,r,b*3);u.addColorStop(0,`hsla(${t}, 70%, 60%, ${l*.6})`),u.addColorStop(.5,`hsla(${t}, 60%, 40%, ${l*.2})`),u.addColorStop(1,"transparent"),n.fillStyle=u,n.beginPath(),n.arc(e,r,b*3,0,Math.PI*2),n.fill(),n.fillStyle=`hsla(${t}, 50%, 70%, ${l*.8})`,n.beginPath(),n.arc(e,r,b*.6,0,Math.PI*2),n.fill(),n.fillStyle=`hsla(${t}, 30%, 90%, ${l*.9})`,n.beginPath(),n.arc(e,r,b*.2,0,Math.PI*2),n.fill()}function rn(n,e,r=150,a,t,s){let o=e.glow;if(a!==void 0&&t!==void 0){let i=Math.sqrt((e.x-a)**2+(e.y-t)**2);i<r&&(o=Math.max(o,(1-i/r)*.8))}o<.05||en(n,e.x,e.y,e.size,e.hue,o,s)}function Mn(n,e,r={}){let{lightX:a,lightY:t,lightRadius:s=150,time:o}=r,i=[...e].sort((l,b)=>{let u=l.glow,d=b.glow;if(a!==void 0&&t!==void 0){let m=Math.sqrt((l.x-a)**2+(l.y-t)**2),g=Math.sqrt((b.x-a)**2+(b.y-t)**2);m<s&&(u=Math.max(u,(1-m/s)*.8)),g<s&&(d=Math.max(d,(1-g/s)*.8))}return u-d});for(let l of i)rn(n,l,s,a,t,o)}var Sn={pulse:"4s",drift:"8s",creature:"12s",ambient:"20s",glacial:"30s"};function yn(n,e=.3){return`${n*e}s`}function Cn(n,e){let r=n.createLinearGradient(0,0,0,e);return r.addColorStop(0,D.background.surface),r.addColorStop(.3,D.background.mid),r.addColorStop(.6,D.background.deep),r.addColorStop(1,D.background.abyss),r}function J(n,e,r,a,t,s){let o=n.createLinearGradient(e,r,e,r+t);return o.addColorStop(0,s.highlight),o.addColorStop(.5,s.mid),o.addColorStop(1,s.shadow),o}function vn(n,e,r,a,t,s){let o=n.createRadialGradient(e,r,a,e,r,t);return o.addColorStop(0,s.core),o.addColorStop(.4,s.mid),o.addColorStop(.7,s.outer),o.addColorStop(1,"transparent"),o}function $n(n,e,r,a,t=1){let s=[];for(let i=5;i>=1;i--){let l=a*(i/2),b=.15/i*t,u=n.createRadialGradient(e,r,0,e,r,l);u.addColorStop(0,`rgba(180, 220, 255, ${b})`),u.addColorStop(.5,`rgba(100, 180, 220, ${b*.5})`),u.addColorStop(1,"transparent"),s.push(u)}let o=n.createRadialGradient(e,r,0,e,r,15);return o.addColorStop(0,`rgba(255, 255, 255, ${.9*t})`),o.addColorStop(.5,`rgba(200, 240, 255, ${.5*t})`),o.addColorStop(1,"transparent"),s.push(o),s}function Pn(n,e,r){let a=n.createLinearGradient(0,e,0,r);return a.addColorStop(0,"rgba(255, 250, 230, 0.15)"),a.addColorStop(.5,"rgba(200, 220, 255, 0.05)"),a.addColorStop(1,"rgba(200, 220, 255, 0)"),a}function Rn(n,e,r,a,t,s=.5){let o=n.createRadialGradient(e,r,a,e,r,t);return o.addColorStop(0,"transparent"),o.addColorStop(1,`rgba(0, 0, 0, ${s})`),o}function Tn(n,e,r,a,t=0){let s=n.createRadialGradient(e,r,0,e,r,a),o=180+t*75,i=60+t*40,l=60+t*20;return s.addColorStop(0,`rgba(${o}, ${i}, ${l}, 0.8)`),s.addColorStop(.5,`rgba(${120+t*60}, 40, 40, 0.3)`),s.addColorStop(1,"transparent"),s}function kn(){return`linear-gradient(
    180deg,
    ${D.background.surface} 0%,
    ${D.background.mid} 30%,
    ${D.background.deep} 60%,
    ${D.background.abyss} 100%
  )`}function Dn(n="cyan"){let e=L[n];return`radial-gradient(
    circle,
    ${e.core} 0%,
    ${e.mid} 30%,
    ${e.outer} 60%,
    transparent 70%
  )`}function Gn(n=.8){return`radial-gradient(
    ellipse at 40% 40%,
    rgba(20, 30, 40, ${n}) 0%,
    rgba(15, 25, 35, ${n*.8}) 50%,
    rgba(10, 20, 30, ${n*.5}) 80%,
    transparent 100%
  )`}function On(){return`radial-gradient(
    ellipse at 50% 30%,
    rgba(180, 220, 255, 0.4) 0%,
    rgba(150, 200, 255, 0.2) 40%,
    rgba(120, 180, 255, 0.1) 70%,
    transparent 100%
  )`}function In(){return`radial-gradient(
    ellipse at center,
    rgba(10, 20, 35, 0.8) 0%,
    transparent 70%
  )`}function Bn(n,e,r=4,a=4,t=V.shadow){n.save(),n.translate(r,a),n.fillStyle=t,e(),n.restore()}function zn(n,e,r,a=0,t=0){n.shadowColor=r,n.shadowBlur=e,n.shadowOffsetX=a,n.shadowOffsetY=t}function Ln(n){n.shadowColor="transparent",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0}function En(n,e="medium"){let r={subtle:[.3,.15],medium:[.6,.3],strong:[.9,.5]},[a,t]=r[e],s=n.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(!s)return"none";let[,o,i,l]=s;return`
    0 0 20px rgba(${o}, ${i}, ${l}, ${a}),
    0 0 40px rgba(${o}, ${i}, ${l}, ${t})
  `.trim()}function Yn(){return`
    0 0 20px rgba(150, 200, 255, 0.3),
    inset 0 -10px 20px rgba(100, 180, 255, 0.2)
  `.trim()}function qn(){return`
    0 0 10px rgba(100, 200, 255, 0.5),
    0 0 20px rgba(80, 180, 255, 0.3)
  `.trim()}function An(){return`
    0 0 15px rgba(255, 100, 80, 0.6),
    0 0 30px rgba(255, 80, 60, 0.3)
  `.trim()}function Xn(){return"0 0 10px rgba(77, 208, 225, 0.3)"}function Wn(){return{dim:"0 0 10px rgba(77, 208, 225, 0.2)",bright:"0 0 25px rgba(77, 208, 225, 0.5)"}}var tn={equipment:{shadowOffset:{x:4,y:4},shadowColor:"rgba(0, 0, 0, 0.4)",outlineWidth:2,outlineColor:"#8a5a15"},light:{shadowOffset:{x:2,y:2},shadowColor:"rgba(0, 0, 0, 0.3)",outlineWidth:1,outlineColor:"#cc4420"},creature:{shadowOffset:{x:0,y:0},shadowColor:"transparent",outlineWidth:0,outlineColor:"transparent"}};function Vn(n,e,r,a){let t=tn[e];(t.shadowOffset.x!==0||t.shadowOffset.y!==0)&&(n.save(),n.translate(t.shadowOffset.x,t.shadowOffset.y),n.fillStyle=t.shadowColor,r(),n.restore()),n.fillStyle=a,r(),t.outlineWidth>0&&(n.strokeStyle=t.outlineColor,n.lineWidth=t.outlineWidth,r(),n.stroke())}function Hn(n=80){return Array.from({length:n},()=>({x:Math.random(),y:Math.random(),size:Math.random()*2+.5,speed:Math.random()*.008+.003,alpha:Math.random()*.5+.2}))}function Jn(n,e="down"){let r=e==="up"?-1:1;for(let a of n)a.y+=a.speed*r,e==="up"&&a.y<-.05?(a.y=1.05,a.x=Math.random()):e==="down"&&a.y>1.05&&(a.y=-.05,a.x=Math.random())}function Fn(n,e,r,a){for(let t of e)n.beginPath(),n.arc(t.x*r,t.y*a,t.size,0,Math.PI*2),n.fillStyle=`rgba(180, 200, 220, ${t.alpha})`,n.fill()}function jn(n=12){return Array.from({length:n},()=>({x:Math.random(),y:Math.random(),size:Math.random()*1.5+.5,speed:Math.random()*.002+.001,alpha:Math.random()*.3+.1,phase:Math.random()*Math.PI*2}))}function Un(n,e){for(let r of n)r.y+=r.speed,r.x+=Math.sin(e*.001+(r.phase??0))*5e-4,r.y>1.05&&(r.y=-.05,r.x=Math.random())}function Nn(n){let e=Math.random()*100,r=Math.random()*100,a=Math.random()*5,t=Math.random()>.5?3:2,s=Math.random()>.5?.3:.4;return{style:`
      position: absolute;
      left: ${e}%;
      top: ${r}%;
      width: ${t}px;
      height: ${t}px;
      background: rgba(200, 220, 255, ${s});
      border-radius: 50%;
      animation: snow-drift 8s linear infinite;
      animation-delay: ${a}s;
    `.trim(),animation:`
      @keyframes snow-drift {
        0% { transform: translateY(-20px) translateX(0); opacity: 0; }
        10% { opacity: 1; }
        90% { opacity: 1; }
        100% { transform: translateY(300px) translateX(20px); opacity: 0; }
      }
    `.trim()}}function _n(n=20){return`<div class="marine-snow">${Array.from({length:n},(r,a)=>{let t=Math.random()*100,s=Math.random()*100,o=Math.random()*5;return`<div class="snow-particle" style="left: ${t}%; top: ${s}%; animation-delay: ${o}s;"></div>`}).join(`
`)}</div>`}var Kn=`
  .marine-snow {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
  }
  
  .snow-particle {
    position: absolute;
    width: 2px;
    height: 2px;
    background: rgba(200, 220, 255, 0.4);
    border-radius: 50%;
    animation: snow-drift 8s linear infinite;
  }
  
  .snow-particle:nth-child(odd) {
    width: 3px;
    height: 3px;
    background: rgba(180, 200, 230, 0.3);
  }
  
  @keyframes snow-drift {
    0% { transform: translateY(-20px) translateX(0); opacity: 0; }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% { transform: translateY(300px) translateX(20px); opacity: 0; }
  }
`;function Qn(n=15){return Array.from({length:n},()=>({x:Math.random(),y:Math.random(),size:Math.random()*4+2,speed:Math.random()*.002+.001,alpha:Math.random()*.6+.3,hue:180+Math.random()*40,pulseSpeed:Math.random()*.003+.002,phase:Math.random()*Math.PI*2}))}function Zn(n,e,r,a,t){for(let s of e){let o=(Math.sin(t*s.pulseSpeed+(s.phase??0))+1)/2,i=s.alpha*(.5+o*.5),l=s.size*(.8+o*.4),b=s.x*r,u=s.y*a,d=n.createRadialGradient(b,u,0,b,u,l*3);d.addColorStop(0,`hsla(${s.hue}, 70%, 60%, ${i})`),d.addColorStop(.5,`hsla(${s.hue}, 60%, 40%, ${i*.3})`),d.addColorStop(1,"transparent"),n.fillStyle=d,n.beginPath(),n.arc(b,u,l*3,0,Math.PI*2),n.fill(),n.fillStyle=`hsla(${s.hue}, 50%, 80%, ${i})`,n.beginPath(),n.arc(b,u,l*.5,0,Math.PI*2),n.fill()}}function xn(){let n=[40+Math.random()*30,40+Math.random()*30,40+Math.random()*30,40+Math.random()*30];return`${n[0]}% ${n[1]}% ${n[2]}% ${n[3]}%`}var ne={blob:"60% 50% 45% 55%",fish:"60% 40% 40% 60%",bell:"50% 50% 40% 40%",head:"55% 45% 50% 50%",tail:"30% 70% 60% 40%"};function F(n,e,r,a,t,s=[.25,.75],o="rgba(100, 60, 20, 0.5)"){n.strokeStyle=o,n.lineWidth=1;for(let i of s){let l=e+a*i;n.beginPath(),n.moveTo(l,r),n.lineTo(l,r+t),n.stroke()}}function q(n,e,r,a,t,s=4,o="#555"){n.strokeStyle=o,n.lineWidth=2;let i=t/(s+1);for(let l=1;l<=s;l++){let b=r+i*l;n.beginPath(),n.moveTo(e,b),n.lineTo(e+a,b),n.stroke()}}function j(n,e,r,a,t,s,o=10,i="rgba(80, 80, 80, 0.6)"){n.strokeStyle=i,n.lineWidth=3,n.setLineDash([8,4]);let l=e+Math.sin(s*.002)*o;n.beginPath(),n.moveTo(e,r),n.lineTo(l,t),n.stroke(),n.setLineDash([])}function U(n,e,r,a,t,s="#222",o="#1a1a2e",i="rgba(100, 150, 200, 0.5)"){n.fillStyle=s,n.beginPath(),n.arc(e,r,a,0,Math.PI*2),n.fill(),n.fillStyle=o,n.beginPath(),n.arc(e,r,t,0,Math.PI*2),n.fill(),n.fillStyle=i,n.beginPath(),n.arc(e-2,r-2,t*.4,0,Math.PI*2),n.fill()}function N(n,e,r,a,t,s){if(n.fillStyle="#444",n.beginPath(),n.arc(e,r,a,0,Math.PI*2),n.fill(),t){let o=.8+Math.sin(s*.005)*.1,i=n.createRadialGradient(e,r,0,e,r,a*8);i.addColorStop(0,`rgba(255, 250, 230, ${o})`),i.addColorStop(.2,`rgba(255, 240, 200, ${o*.5})`),i.addColorStop(1,"rgba(255, 240, 200, 0)"),n.fillStyle=i,n.beginPath(),n.arc(e,r,a*8,0,Math.PI*2),n.fill(),n.fillStyle=`rgba(255, 255, 240, ${o})`,n.beginPath(),n.arc(e,r,a*.6,0,Math.PI*2),n.fill()}}function ee(n,e,r,a,t,s,o=0){let i=30+o*30,l=n.createRadialGradient(e,r,0,e,r,i);l.addColorStop(0,`rgba(${180+o*75}, ${60+o*40}, ${60+o*20}, 0.8)`),l.addColorStop(.5,`rgba(${120+o*60}, 40, 40, 0.3)`),l.addColorStop(1,"transparent"),n.fillStyle=l,n.beginPath(),n.arc(e,r,i,0,Math.PI*2),n.fill();let b=a*(1+o*.5);n.fillStyle=`rgba(${200+o*55}, ${80+o*80}, ${60+o*40}, 1)`,n.beginPath(),n.arc(e,r,b,0,Math.PI*2),n.fill();let u=t-e,d=s-r,m=Math.sqrt(u*u+d*d),g=m>0?u/m*3:0,h=m>0?d/m*3:0;n.fillStyle="rgba(10, 0, 0, 1)",n.beginPath(),o>.4?n.ellipse(e+g,r+h,2,b*.7,0,0,Math.PI*2):n.arc(e+g,r+h,4-o*2,0,Math.PI*2),n.fill()}function re(n,e,r,a="rgba(10, 10, 15, 0.9)"){if(!(e.length<2)){n.beginPath(),n.moveTo(e[0].x,e[0].y);for(let t=1;t<e.length;t++)n.lineTo(e[t].x,e[t].y);n.strokeStyle=a,n.lineWidth=r,n.lineCap="round",n.stroke()}}var A={glacial:8e-4,verySlow:.001,slow:.002,medium:.003};function te(n,e,r,a=1,t={}){let{lightsOn:s=!0,showTether:o=!0,showArm:i=!0,time:l=0,rotation:b=0}=t;n.save(),n.translate(e,r),n.rotate(b),n.scale(a,a);let u=80,d=50;n.fillStyle="rgba(0, 0, 0, 0.4)",n.fillRect(-u/2+4,-d/2+4,u,d),n.fillStyle=J(n,-u/2,-d/2,u,d,k.rovYellow),n.fillRect(-u/2,-d/2,u,d),n.strokeStyle=k.rovYellow.outline,n.lineWidth=2,n.strokeRect(-u/2,-d/2,u,d),F(n,-u/2,-d/2,u,d,[.25,.75]),n.fillStyle=k.flotation.fill,n.fillRect(-u/2+5,-d/2-15,u-10,15),n.strokeStyle=k.flotation.outline,n.lineWidth=1,n.strokeRect(-u/2+5,-d/2-15,u-10,15),n.fillStyle=k.metal.dark,n.fillRect(-u/2-15,-10,15,20),n.fillRect(u/2,-10,15,20),q(n,-u/2-15,-10,15,20,4,k.metal.mid),q(n,u/2,-10,15,20,4,k.metal.mid),U(n,0,d/2+10,12,8),s?[-25,25].forEach(m=>{N(n,m,d/2+5,8,!0,l)}):[-25,25].forEach(m=>{n.fillStyle=k.metal.mid,n.beginPath(),n.arc(m,d/2+5,8,0,Math.PI*2),n.fill()}),i&&(n.strokeStyle=k.metal.mid,n.lineWidth=4,n.lineCap="round",n.beginPath(),n.moveTo(-u/2+10,d/2),n.lineTo(-u/2+5,d/2+20),n.lineTo(-u/2+15,d/2+25),n.stroke()),o&&j(n,0,-d/2-15,0,-d/2-100,l),n.restore()}function ae(n,e,r,a,t,s={}){let{spread:o=.5,startOpacity:i=.15,color:l={r:255,g:250,b:230}}=s;n.save(),n.translate(e,r),n.rotate(a-Math.PI/2);let b=o/2,u=Math.tan(b)*t,d=n.createLinearGradient(0,0,0,t);d.addColorStop(0,`rgba(${l.r}, ${l.g}, ${l.b}, ${i})`),d.addColorStop(.5,`rgba(${l.r}, ${l.g}, ${l.b}, ${i*.3})`),d.addColorStop(1,`rgba(${l.r}, ${l.g}, ${l.b}, 0)`),n.fillStyle=d,n.beginPath(),n.moveTo(-10,0),n.lineTo(-u,t),n.lineTo(u,t),n.lineTo(10,0),n.closePath(),n.fill(),n.restore()}function oe(n,e,r,a={}){let{bellWidth:t=50,tentacleCount:s=4,time:o=0,glowIntensity:i=.4}=a,l=t*.7,b=Y(o,A.slow,.95,1.05);n.save(),n.translate(e,r);let u=n.createRadialGradient(0,0,0,0,0,t*1.5);u.addColorStop(0,`rgba(150, 200, 255, ${i*.3})`),u.addColorStop(.5,`rgba(150, 200, 255, ${i*.1})`),u.addColorStop(1,"transparent"),n.fillStyle=u,n.beginPath(),n.arc(0,0,t*1.5,0,Math.PI*2),n.fill(),n.scale(b,1/b);let d=n.createRadialGradient(0,-l*.3,0,0,0,t);d.addColorStop(0,`rgba(180, 220, 255, ${i})`),d.addColorStop(.4,`rgba(150, 200, 255, ${i*.5})`),d.addColorStop(.7,`rgba(120, 180, 255, ${i*.25})`),d.addColorStop(1,"transparent"),n.fillStyle=d,n.beginPath(),n.ellipse(0,0,t/2,l/2,0,0,Math.PI,!0),n.fill(),n.fillStyle=`rgba(200, 230, 255, ${i*.3})`,n.beginPath(),n.ellipse(0,-l*.15,t*.25,l*.2,0,0,Math.PI*2),n.fill();let m=t/(s+1),g=l*.3;for(let h=0;h<s;h++){let f=-t/2+m*(h+1),p=40+h%2*15,w=Math.sin(o*A.slow+h*.8)*5,c=n.createLinearGradient(f,g,f+w,g+p);c.addColorStop(0,`rgba(150, 200, 255, ${i*.5})`),c.addColorStop(.5,`rgba(150, 200, 255, ${i*.2})`),c.addColorStop(1,"transparent"),n.strokeStyle=c,n.lineWidth=2,n.lineCap="round",n.beginPath(),n.moveTo(f,g),n.quadraticCurveTo(f+w*.5,g+p*.5,f+w,g+p),n.stroke()}n.restore()}function ie(n,e,r,a={}){let{width:t=70,time:s=0,illumination:o=0,lookAt:i}=a,l=t*.65,b=Math.sin(s*A.verySlow)*3,u=Math.sin(s*A.glacial)*.02;n.save(),n.translate(e,r+b),n.rotate(u);let d=.6+o*.3,m=n.createRadialGradient(-t*.1,-l*.1,0,0,0,t*.7);m.addColorStop(0,`rgba(${20+o*15}, ${30+o*10}, ${40+o*10}, ${d})`),m.addColorStop(.5,`rgba(15, 25, 35, ${d*.8})`),m.addColorStop(.8,`rgba(10, 20, 30, ${d*.5})`),m.addColorStop(1,"transparent"),n.fillStyle=m,n.beginPath(),n.ellipse(0,0,t/2,l/2,0,0,Math.PI*2),n.fill();let g=Y(s,A.medium,.6,1),h=-t*.1,f=-l*.05,p=8*g,w=n.createRadialGradient(h,f,0,h,f,p*2);w.addColorStop(0,`rgba(255, 100, 80, ${.8*g})`),w.addColorStop(.4,`rgba(255, 80, 60, ${.4*g})`),w.addColorStop(1,"transparent"),n.fillStyle=w,n.beginPath(),n.arc(h,f,p*2,0,Math.PI*2),n.fill();let c=t*.15,S=-l*.1,M=4+o*2,C=15+o*10,R=n.createRadialGradient(c,S,0,c,S,C);R.addColorStop(0,`rgba(200, 50, 50, ${.6+o*.3})`),R.addColorStop(.5,`rgba(150, 30, 30, ${.2+o*.2})`),R.addColorStop(1,"transparent"),n.fillStyle=R,n.beginPath(),n.arc(c,S,C,0,Math.PI*2),n.fill(),n.fillStyle=`rgba(200, 50, 50, ${.8+o*.2})`,n.beginPath(),n.arc(c,S,M,0,Math.PI*2),n.fill();let T=0,G=0;if(i){let $=i.x-(e+c),P=i.y-(r+S),v=Math.sqrt($*$+P*P);v>0&&(T=$/v*2,G=P/v*2)}if(n.fillStyle="rgba(10, 0, 0, 0.9)",n.beginPath(),o>.4?n.ellipse(c+T,S+G,1.5,M*.6,0,0,Math.PI*2):n.arc(c+T,S+G,2,0,Math.PI*2),n.fill(),o>.3){let $=(o-.3)*1.4,P=t*.05,v=l*.15;n.fillStyle=`rgba(180, 40, 40, ${$*.5})`,n.beginPath(),n.arc(P,v,3,0,Math.PI*2),n.fill()}n.restore()}function X(n,e,r,a,t=200){let s=n-r,o=e-a,i=Math.sqrt(s*s+o*o);if(i>=t)return 0;let l=1-i/t;return l*l}function se(n,e,r,a,t,s=200){let o=X(n,e,r,a,s);if(o===0)return 0;let i=n-r,l=e-a,b=Math.atan2(l,i),u=Math.abs(b-t),m=1-Math.min(u,Math.PI*2-u)/Math.PI;return o*(.3+m*.7)}function le(n,e,r,a=120,t={}){let{intensity:s=1,pulseTime:o,coreColor:i={r:255,g:255,b:255},ambientColor:l={r:180,g:220,b:255}}=t,b=o!==void 0?Math.sin(o*.003)*20:0,u=a+b;for(let m=5;m>=1;m--){let g=u*(m/2),h=.15/m*s,f=n.createRadialGradient(e,r,0,e,r,g);f.addColorStop(0,`rgba(${l.r}, ${l.g}, ${l.b}, ${h})`),f.addColorStop(.5,`rgba(${Math.round(l.r*.55)}, ${l.g}, ${Math.round(l.b*.85)}, ${h*.5})`),f.addColorStop(1,"transparent"),n.fillStyle=f,n.beginPath(),n.arc(e,r,g,0,Math.PI*2),n.fill()}let d=n.createRadialGradient(e,r,0,e,r,15);d.addColorStop(0,`rgba(${i.r}, ${i.g}, ${i.b}, ${.9*s})`),d.addColorStop(.5,`rgba(${Math.round(i.r*.8)}, ${Math.round(i.g*.94)}, ${i.b}, ${.5*s})`),d.addColorStop(1,"transparent"),n.fillStyle=d,n.beginPath(),n.arc(e,r,15,0,Math.PI*2),n.fill()}function de(n,e,r,a={}){let{density:t=20,color:s={r:20,g:30,b:40},intensity:o=.15,time:i=0,seed:l=12345}=a,b=u=>{let d=Math.sin(l+u*127.1)*43758.5453;return d-Math.floor(d)};for(let u=0;u<t;u++){let d=b(u)*e,m=b(u+1e3)*r,g=i>0?Math.sin(i*8e-4+u*.5)*3:0,h=i>0?Math.cos(i*6e-4+u*.3)*2:0,f=d+g,p=m+h,w=30+b(u+2e3)*80,c=o*(.5+b(u+3e3)*.5),S=n.createRadialGradient(f,p,0,f,p,w);S.addColorStop(0,`rgba(${s.r}, ${s.g}, ${s.b}, ${c})`),S.addColorStop(.6,`rgba(${s.r}, ${s.g}, ${s.b}, ${c*.3})`),S.addColorStop(1,"transparent"),n.fillStyle=S,n.beginPath(),n.arc(f,p,w,0,Math.PI*2),n.fill()}}function ue(n,e,r,a,t={}){let{count:s=5,heightRatio:o=.4,intensity:i=.03}=t;for(let l=0;l<s;l++){let b=(Math.sin(a*.001+l)*.3+.5)*e,u=r*.1,d=n.createRadialGradient(b,u,0,b,u,150);d.addColorStop(0,`rgba(100, 150, 200, ${i})`),d.addColorStop(1,"rgba(100, 150, 200, 0)"),n.fillStyle=d,n.fillRect(0,0,e,r*o)}}function an(n){return{x:n.x,y:n.y,size:n.size??8,openness:1,awarenessRadius:n.awarenessRadius??200,blinkTimer:2e3+Math.random()*3e3,isBlinking:!1,blinkProgress:0,dilation:.5,hue:n.hue??0,illumination:0,pupilOffset:{x:0,y:0}}}function on(n,e,r,a=16){n.illumination=X(e,r,n.x,n.y,n.awarenessRadius);let t=e-n.x,s=r-n.y,o=Math.sqrt(t*t+s*s);if(o>0){let l=n.size*.3,b=t/o*l,u=s/o*l;n.pupilOffset.x+=(b-n.pupilOffset.x)*.1,n.pupilOffset.y+=(u-n.pupilOffset.y)*.1}let i=1-n.illumination*.8;n.dilation+=(i-n.dilation)*.05,n.isBlinking?(n.blinkProgress+=a/150,n.blinkProgress<.5?n.openness=1-n.blinkProgress*2:n.openness=(n.blinkProgress-.5)*2,n.blinkProgress>=1&&(n.isBlinking=!1,n.blinkProgress=0,n.openness=1,n.blinkTimer=2e3+Math.random()*4e3)):(n.blinkTimer-=a,n.blinkTimer<=0&&(n.isBlinking=!0,n.blinkProgress=0))}function sn(n,e,r={}){let{showGlow:a=!0,glowSize:t=2.5}=r,s=e.size*e.openness;if(s<.5)return;let o=e.hue===0||e.hue<60?200:100,i=e.hue>30&&e.hue<90?150:50,l=e.hue>150?200:50,b=e.illumination*55,u=Math.min(255,o+b),d=Math.min(255,i+e.illumination*40),m=Math.min(255,l+e.illumination*20);if(a){let f=s*t+e.illumination*s,p=n.createRadialGradient(e.x,e.y,0,e.x,e.y,f);p.addColorStop(0,`rgba(${u}, ${d}, ${m}, ${.6+e.illumination*.2})`),p.addColorStop(.5,`rgba(${u*.6}, ${d*.6}, ${m*.6}, ${.2+e.illumination*.2})`),p.addColorStop(1,"transparent"),n.fillStyle=p,n.beginPath(),n.arc(e.x,e.y,f,0,Math.PI*2),n.fill()}n.fillStyle=`rgba(${u}, ${d}, ${m}, ${.8+e.illumination*.2})`,n.beginPath(),n.arc(e.x,e.y,s,0,Math.PI*2),n.fill();let g=e.x+e.pupilOffset.x,h=e.y+e.pupilOffset.y;if(n.fillStyle="rgba(10, 0, 0, 0.9)",n.beginPath(),e.illumination>.4){let f=2*e.dilation,p=s*.7;n.ellipse(g,h,f,p,0,0,Math.PI*2)}else{let f=2+e.dilation*2;n.arc(g,h,f,0,Math.PI*2)}n.fill(),e.openness>.5&&(n.fillStyle=`rgba(255, 255, 255, ${.3*e.openness})`,n.beginPath(),n.arc(e.x-s*.3,e.y-s*.3,s*.2,0,Math.PI*2),n.fill())}function be(n){return n.map(an)}function me(n,e,r,a=16){for(let t of n)on(t,e,r,a)}function ge(n,e,r){for(let a of e)sn(n,a,r)}var De=.5*(Math.sqrt(3)-1),W=(3-Math.sqrt(3))/6,B=[[1,1],[-1,1],[1,-1],[-1,-1],[1,0],[-1,0],[0,1],[0,-1]];function fe(n){let e=Array.from({length:256},(a,t)=>t),r=n;for(let a=255;a>0;a--){r=r*1103515245+12345&2147483647;let t=r%(a+1);[e[a],e[t]]=[e[t],e[a]]}return[...e,...e]}function y(n,e,r){let a=(n+e)*De,t=Math.floor(n+a),s=Math.floor(e+a),o=(t+s)*W,i=t-o,l=s-o,b=n-i,u=e-l,d=b>u?1:0,m=b>u?0:1,g=b-d+W,h=u-m+W,f=b-1+2*W,p=u-1+2*W,w=t&255,c=s&255,S=r[w+r[c]]%8,M=r[w+d+r[c+m]]%8,C=r[w+1+r[c+1]]%8,R=0,T=0,G=0,$=.5-b*b-u*u;$>=0&&($*=$,R=$*$*(B[S][0]*b+B[S][1]*u));let P=.5-g*g-h*h;P>=0&&(P*=P,T=P*P*(B[M][0]*g+B[M][1]*h));let v=.5-f*f-p*p;return v>=0&&(v*=v,G=v*v*(B[C][0]*f+B[C][1]*p)),70*(R+T+G)}function he(n,e,r,a=4){let t=0,s=.5,o=1,i=0;for(let l=0;l<a;l++)t+=s*y(n*o,e*o,r),i+=s,s*=.5,o*=2;return t/i}var z={fleshy:{base:{r:28,g:22,b:26},mid:{r:38,g:30,b:35},highlight:{r:58,g:48,b:52},shadow:{r:18,g:14,b:18},vein:{r:50,g:28,b:35},veinHighlight:{r:85,g:50,b:55}},abyssal:{base:{r:20,g:25,b:32},mid:{r:30,g:38,b:48},highlight:{r:50,g:62,b:75},shadow:{r:12,g:15,b:22},vein:{r:35,g:45,b:60},veinHighlight:{r:60,g:80,b:100}},rocky:{base:{r:25,g:28,b:25},mid:{r:38,g:42,b:38},highlight:{r:55,g:62,b:55},shadow:{r:15,g:18,b:16},vein:{r:35,g:32,b:30},veinHighlight:{r:55,g:50,b:45}},membranous:{base:{r:25,g:20,b:30},mid:{r:38,g:30,b:45},highlight:{r:60,g:48,b:68},shadow:{r:15,g:12,b:20},vein:{r:70,g:40,b:55},veinHighlight:{r:100,g:60,b:75}}},Ge={visible:{noiseScale:.003,showVeins:!0,veinCount:6},subtle:{noiseScale:.005,showVeins:!0,veinCount:3},dramatic:{noiseScale:.002,showVeins:!0,veinCount:10}};function ce(n,e,r,a={}){let t=a.preset?Ge[a.preset]:{},{type:s="fleshy",noiseScale:o=t.noiseScale??.003,showVeins:i=t.showVeins??!0,veinCount:l=t.veinCount??6,seed:b=42,time:u=0,lightX:d,lightY:m,lightRadius:g=250}={...t,...a},h=z[s]||z.fleshy,f=fe(b);Oe(n,e,r,h,f,o,u),Ie(n,e,r,h,f,o),i&&Be(n,e,r,h,f,l,u),ze(n,e,r,h,f,o*3),d!==void 0&&m!==void 0&&Le(n,e,r,d,m,g,h,f)}function Oe(n,e,r,a,t,s,o){let i=n.createImageData(e,r),l=i.data,b=o*5e-5;for(let u=0;u<r;u++)for(let d=0;d<e;d++){let m=he(d*s+b,u*s,t,4),g=he(d*s*2+100,u*s*2+100,t,3),h=(m+1)/2,f=(g+1)/2,p,w,c;if(h<.4){let M=h/.4;p=a.shadow.r+(a.base.r-a.shadow.r)*M,w=a.shadow.g+(a.base.g-a.shadow.g)*M,c=a.shadow.b+(a.base.b-a.shadow.b)*M}else if(h<.7){let M=(h-.4)/.3;p=a.base.r+(a.mid.r-a.base.r)*M,w=a.base.g+(a.mid.g-a.base.g)*M,c=a.base.b+(a.mid.b-a.base.b)*M}else{let M=(h-.7)/.3;p=a.mid.r+(a.highlight.r-a.mid.r)*M*.3,w=a.mid.g+(a.highlight.g-a.mid.g)*M*.3,c=a.mid.b+(a.highlight.b-a.mid.b)*M*.3}p+=(f-.5)*8,w+=(f-.5)*6,c+=(f-.5)*8;let S=(u*e+d)*4;l[S]=Math.max(0,Math.min(255,p)),l[S+1]=Math.max(0,Math.min(255,w)),l[S+2]=Math.max(0,Math.min(255,c)),l[S+3]=255}n.putImageData(i,0,0)}function Ie(n,e,r,a,t,s){let o=s*.5;n.globalCompositeOperation="overlay";for(let i=0;i<8;i++){let l=y(i*50,0,t)*.5+.5,b=y(0,i*50,t)*.5+.5,u=l*e,d=b*r,m=100+Math.abs(y(i*30,i*30,t))*200;if(y(i*20,i*20+500,t)>0){let h=y(i*10,0,t)*Math.PI;n.save(),n.translate(u,d),n.rotate(h);let f=n.createLinearGradient(0,-m*.3,0,m*.3);f.addColorStop(0,`rgba(${a.highlight.r}, ${a.highlight.g}, ${a.highlight.b}, 0.15)`),f.addColorStop(.5,"rgba(128, 128, 128, 0)"),f.addColorStop(1,`rgba(${a.shadow.r}, ${a.shadow.g}, ${a.shadow.b}, 0.1)`),n.fillStyle=f,n.beginPath(),n.ellipse(0,0,m,m*.4,0,0,Math.PI*2),n.fill(),n.restore()}}n.globalCompositeOperation="source-over"}function Be(n,e,r,a,t,s,o){for(let i=0;i<s;i++){let l=Math.floor((y(i*100,0,t)+1)*2)%4,b,u,d,m=(y(i*50,i*50,t)+1)/2;switch(l){case 0:b=m*e,u=-20,d=Math.PI/2+y(i*30,0,t)*.4;break;case 1:b=e+20,u=m*r,d=Math.PI+y(i*30,100,t)*.4;break;case 2:b=m*e,u=r+20,d=-Math.PI/2+y(i*30,200,t)*.4;break;default:b=-20,u=m*r,d=y(i*30,300,t)*.4}pe(n,b,u,d,5+Math.abs(y(i*20,i*20,t))*4,0,t,a,o,e,r,i*1e3)}}function pe(n,e,r,a,t,s,o,i,l,b,u,d){if(t<1||s>4)return;let m=[{x:e,y:r,thickness:t}],g=e,h=r,f=a,p=t,w=8+Math.floor(Math.abs(y(d,0,o))*6);for(let c=0;c<w;c++){let S=y(d+c*10,s*100,o)*.6;f+=S;let M=30+y(d+c*20,0,o)*20,C=l>0?Math.sin(l*.002+c*.5+d*.01)*2:0;g+=Math.cos(f)*M,h+=Math.sin(f)*M+C;let R=y(d+c*15,s*50+500,o);if(p*=.92+R*.1,R>.6&&(p*=1.15),m.push({x:g,y:h,thickness:Math.max(.5,p)}),g<-50||g>b+50||h<-50||h>u+50)break;if(c>2&&y(d+c*25,s*200,o)>.7&&s<3){let T=f+(y(d+c*30,0,o)>0?1:-1)*(.5+Math.abs(y(d+c*35,0,o))*.5);pe(n,g,h,T,p*.6,s+1,o,i,l,b,u,d+c*1e3+s*1e4)}}if(!(m.length<2)){n.lineCap="round",n.lineJoin="round";for(let c=0;c<m.length-1;c++){let S=m[Math.max(0,c-1)],M=m[c],C=m[c+1],R=m[Math.min(m.length-1,c+2)],T=M.x+(C.x-S.x)/6,G=M.y+(C.y-S.y)/6,$=C.x-(R.x-M.x)/6,P=C.y-(R.y-M.y)/6,v=(M.thickness+C.thickness)/2;n.strokeStyle=`rgba(${i.shadow.r}, ${i.shadow.g}, ${i.shadow.b}, 0.4)`,n.lineWidth=v+2,n.beginPath(),n.moveTo(M.x+1,M.y+1),n.bezierCurveTo(T+1,G+1,$+1,P+1,C.x+1,C.y+1),n.stroke(),n.strokeStyle=`rgba(${i.vein.r}, ${i.vein.g}, ${i.vein.b}, 0.7)`,n.lineWidth=v,n.beginPath(),n.moveTo(M.x,M.y),n.bezierCurveTo(T,G,$,P,C.x,C.y),n.stroke(),n.strokeStyle=`rgba(${i.veinHighlight.r}, ${i.veinHighlight.g}, ${i.veinHighlight.b}, 0.25)`,n.lineWidth=v*.4,n.beginPath(),n.moveTo(M.x,M.y-v*.25),n.bezierCurveTo(T,G-v*.25,$,P-v*.25,C.x,C.y-v*.25),n.stroke()}}}function ze(n,e,r,a,t,s){n.globalCompositeOperation="soft-light";for(let o=0;o<15;o++){let i=(y(o*70,0,t)+1)/2*e,l=(y(0,o*70,t)+1)/2*r,b=40+Math.abs(y(o*40,o*40,t))*100,u=y(o*25,500,t)*Math.PI;n.save(),n.translate(i,l),n.rotate(u);let d=.3+Math.abs(y(o*35,0,t))*.4,m=n.createRadialGradient(0,0,0,0,0,b),g=y(o*45,250,t)>0?1.2:.8;m.addColorStop(0,`rgba(${a.mid.r*g}, ${a.mid.g*g}, ${a.mid.b*g}, 0.15)`),m.addColorStop(.7,`rgba(${a.base.r}, ${a.base.g}, ${a.base.b}, 0.05)`),m.addColorStop(1,"transparent"),n.fillStyle=m,n.beginPath(),n.ellipse(0,0,b,b*d,0,0,Math.PI*2),n.fill(),n.restore()}n.globalCompositeOperation="source-over"}function Le(n,e,r,a,t,s,o,i){let l=n.createRadialGradient(a,t,0,a,t,s*1.5);l.addColorStop(0,`rgba(${o.veinHighlight.r+20}, ${o.veinHighlight.g}, ${o.veinHighlight.b-10}, 0.12)`),l.addColorStop(.3,`rgba(${o.vein.r+15}, ${o.vein.g}, ${o.vein.b}, 0.08)`),l.addColorStop(.6,`rgba(${o.mid.r+10}, ${o.mid.g+5}, ${o.mid.b+5}, 0.04)`),l.addColorStop(1,"transparent"),n.fillStyle=l,n.fillRect(0,0,e,r);let b=n.createRadialGradient(a,t,0,a,t,s*.5);b.addColorStop(0,`rgba(${o.highlight.r+40}, ${o.highlight.g+35}, ${o.highlight.b+30}, 0.2)`),b.addColorStop(.5,`rgba(${o.highlight.r+20}, ${o.highlight.g+15}, ${o.highlight.b+10}, 0.08)`),b.addColorStop(1,"transparent"),n.fillStyle=b,n.fillRect(0,0,e,r),n.globalCompositeOperation="overlay";let u=s*1.2;for(let d=0;d<5;d++){let m=(y(a*.01+d*20,t*.01,i)+1)*Math.PI,g=20+Math.abs(y(d*30,0,i))*60,h=a+Math.cos(m)*g,f=t+Math.sin(m)*g,p=Math.max(0,1-Math.sqrt((h-a)**2+(f-t)**2)/u)*.3;if(p>.05){n.strokeStyle=`rgba(${o.vein.r+20}, ${o.vein.g}, ${o.vein.b}, ${p})`,n.lineWidth=1+Math.abs(y(d*25,0,i))*2,n.lineCap="round",n.beginPath(),n.moveTo(h,f);let w=m+y(d*15,500,i)*.8,c=20+Math.abs(y(d*35,0,i))*40,S=c*.5,M=m+y(d*20,250,i)*.5;n.quadraticCurveTo(h+Math.cos(M)*S,f+Math.sin(M)*S,h+Math.cos(w)*c,f+Math.sin(w)*c),n.stroke()}}n.globalCompositeOperation="source-over"}function we(n,e,r,a,t={}){let{count:s=8,seed:o=123,palette:i=z.rocky}=t,l=fe(o);for(let b=0;b<s;b++){let u=(y(b*50,0,l)+1)*Math.PI,d=Math.abs(y(b*30,b*30,l))*a,m=e+Math.cos(u)*d,g=r+Math.sin(u)*d,h=3+Math.abs(y(b*40,0,l))*8;n.strokeStyle=`rgba(${i.highlight.r}, ${i.highlight.g}, ${i.highlight.b}, 0.5)`,n.lineWidth=2,n.beginPath(),n.arc(m,g,h,Math.PI*.7,Math.PI*1.9),n.stroke(),n.strokeStyle=`rgba(${i.shadow.r}, ${i.shadow.g}, ${i.shadow.b}, 0.6)`,n.beginPath(),n.arc(m,g,h,Math.PI*1.9,Math.PI*.7),n.stroke(),n.fillStyle=`rgba(${i.mid.r}, ${i.mid.g}, ${i.mid.b}, 0.7)`,n.beginPath(),n.arc(m,g,h*.5,0,Math.PI*2),n.fill()}}function Me(n,e,r,a,t={}){let{angle:s=0,width:o=3,palette:i=z.fleshy}=t,l=e+Math.cos(s)*a*.5,b=r+Math.sin(s)*a*.5,u=e+Math.cos(s)*a,d=r+Math.sin(s)*a,m=(Math.random()-.5)*15,g=l+Math.cos(s+Math.PI/2)*m,h=b+Math.sin(s+Math.PI/2)*m;n.strokeStyle=`rgba(${i.shadow.r}, ${i.shadow.g}, ${i.shadow.b}, 0.7)`,n.lineWidth=o,n.lineCap="round",n.beginPath(),n.moveTo(e,r),n.quadraticCurveTo(g,h,u,d),n.stroke(),n.strokeStyle=`rgba(${i.veinHighlight.r}, ${i.veinHighlight.g}, ${i.veinHighlight.b}, 0.35)`,n.lineWidth=o*.4,n.beginPath(),n.moveTo(e,r-o*.4),n.quadraticCurveTo(g,h-o*.4,u,d-o*.4),n.stroke()}return Pe(Ee);})();
